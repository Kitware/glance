!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var a=t();for(var i in a)("object"==typeof exports?exports:e)[i]=a[i]}}(self,(function(){return(self.webpackChunkglance=self.webpackChunkglance||[]).push([[2],{489:function(e,t,a){"use strict";a.r(t),a.d(t,{createViewer:function(){return Ma},getReader:function(){return _a},importBase64Dataset:function(){return Sa},listReaders:function(){return Pa},listSupportedExtensions:function(){return ka},loadFiles:function(){return Ca},openFiles:function(){return Va},registerReader:function(){return Ia},registerReadersToProxyManager:function(){return Ta},setActiveProxyConfiguration:function(){return Da}});var i=a(490),s=a(612),n=a(563),o=a(83),r=a(562),l=a(571),c=a(329);i.default.use(r.ZP);const{girderRoute:d,noGirder:u}=c.Z.extractURLParameters(),p=d||"https://data.kitware.com/api/v1",v=u?void 0:new l.ZP({apiRoot:p});v&&v.fetchUser();var m={girderRest:v},g=a(697),h=(a(492),a(368)),y=a(494),f=a(495),b=a(496),x=a(375),w=a(497),_=a(498),S=a(499),P=a(500),k=a(56),C=a.n(k),V=a(9);function I(e,t){t.classHierarchy.push("vtkGlanceStateReader"),t.appState=null,e.parseAsArrayBuffer=a=>{return a&&a!==t.rawDataBuffer?(t.rawDataBuffer=a,(i=a,new Promise(((e,t)=>{const a=new(C());a.loadAsync(i).then((()=>{a.forEach(((a,i)=>{a.match(/state\.json$/i)&&i.async("string").then((t=>{e(JSON.parse(t))})).catch(t)}))})).catch(t)}))).then((a=>(t.appState=a,e.modified(),t.appState)))):Promise.resolve(t.appState);var i},e.requestData=()=>{e.parseAsArrayBuffer(t.rawDataBuffer)}}function T(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,a),V.ZP.obj(e,t),V.ZP.algo(e,t,0,1),V.ZP.get(e,t,["appState"]),I(e,t)}var $={newInstance:V.ZP.newInstance(T,"vtkGlanceStateReader"),extend:T},D=(a(501),a(19)),M=a(502),L=a(11),Z=a(377),O=a(116);function R(e,t){const a=t=>function(e,t,a){return e[t]?(e[t][0]=Math.min(e[t][0],a[0]),e[t][1]=Math.max(e[t][1],a[1])):e[t]=a.slice(),e}(e,t.getName(),t.getRange(-1));t.getPointData().getArrays().forEach(a),t.getCellData().getArrays().forEach(a)}function B(e,t){t.classHierarchy.push("vtkGlanceVtkJsReader"),e.parseAsArrayBuffer=a=>{return a&&a!==t.rawDataBuffer?(t.rawDataBuffer=a,(i=a,new Promise((e=>{let t=0;const a=D.ZP.get("zip",{zipContent:i,callback(){const i=M.ZP.newInstance({dataAccessHelper:a,startLODLoaders:!1});i.setUrl("index.json"),i.onReady((()=>{if(++t===i.getScene().length){const t={...i.getMetadata()};t.scene=i.getScene(),t.animationHandler=i.getAnimationHandler(),e(t)}}))}})}))).then((a=>{let{scene:i,camera:s,background:n,lookupTables:o,cameraViewPoints:r,animationHandler:l}=a;return t.scene=i,t.camera=s,t.background=n,t.lookupTables=o,t.cameraViewPoints=r,t.animationHandler=l,e.modified(),t.scene}))):Promise.resolve(t.appState);var i},e.requestData=()=>{e.parseAsArrayBuffer(t.rawDataBuffer)},e.setProxyManager=e=>{const a=e.getViews(),i={};t.scene.forEach((s=>{const{source:n,mapper:o,actor:r,volume:l,name:c,volumeComponents:d}=s,u=r?r.get("origin","scale","position"):{},p=l?l.get("origin","scale","position"):{},v=r?r.getProperty().get("representation","edgeVisibility","diffuseColor","pointSize","opacity"):{},m=l?l.getProperty().get("interpolationType","independantComponents","shade"):{},g=o.get("colorByArrayName","colorMode","scalarMode"),h=e.createProxy("Sources","TrivialProducer",{name:c});h.setInputAlgorithm(n,n.getOutputData().getClassName()),h.activate(),R(i,n.getOutputData());for(let i=0;i<a.length;i++){const s=a[i],n=e.getRepresentation(h,a[i]);if(n.setRescaleOnColorBy(!1),r){const e=n.getActors()[0];e&&(e.set(u),e.getProperty().set(v),e.getMapper().set(g),r.getTextures().forEach((t=>{e.addTexture(t)})))}if(l){const e=n.getVolumes()[0];e&&(e.set(p),e.getProperty().set(m))}let o="pointData";if(g.scalarMode===L.ZP.ScalarMode.USE_CELL_FIELD_DATA&&(o="cellData"),n.setColorBy(g.colorByArrayName,o),"default"===s.getName()&&(s.getCamera().set(t.camera),t.animationHandler&&t.animationHandler.addRenderer(s.getRenderer())),d){const[e]=n.getColorBy(),[{rgbTransferFunction:t,scalarOpacity:a}]=d,i=n.getLookupTableProxy(e),s=n.getPiecewiseFunctionProxy(e);if(t){i.setPresetName("-");const[e,a]=t.getMappingRange();i.setDataRange(e,a),i.setMode(Z.Z.Mode.Nodes),i.getLookupTable().setColorSpace(t.getColorSpace()),i.setNodes(t.get("nodes").nodes)}if(a){s.getPiecewiseFunction().setClamping(a.getClamping());const e=[],t=a.getRange();s.setDataRange(...t);const i=t[1]-t[0];for(let s=0;s<a.getSize();++s){const n=[];a.getNodeValue(s,n);const[o,r,l,c]=n;e.push({x:(o-t[0])/i,y:r,midpoint:l,sharpness:c})}s.setMode(O.Z.Mode.Nodes),s.setNodes(e)}}}const{textureLODsDownloader:y}=s;if(y){y.setStepFinishedCallback(e.renderAllViews);const t=e.getReferenceByName("$store").state.views.maxTextureLODSize;y.setMaxTextureLODSize(t),y.startDownloads()}const{dataSetLODsLoader:f}=s;if(f){const e=()=>{const e=f.getCurrentSource();h.setInputAlgorithm(e,e.getOutputData().getClassName())};f.setStepFinishedCallback(e),f.startDownloads()}if(t.animationHandler&&e.getProxyInGroup("AnimationManager").length){const a=e.getProxyInGroup("AnimationManager")[0],i=e.createProxy("Animations","TimeStepAnimation");i.setInputAnimationHandler(t.animationHandler),a.addAnimation(i),a.onCurrentFrameChanged((()=>e.renderAllViews()))}})),Object.keys(i).forEach((t=>{e.getLookupTable(t).setDataRange(...i[t])})),Object.keys(t.lookupTables||{}).forEach((a=>{const i=t.lookupTables[a],s=e.getLookupTable(a),n=s.getLookupTable(),o=i.nodes[0][0],r=i.nodes[i.nodes.length-1][0];s.setPresetName("-"),s.setDataRange(o,r),s.setMode(3),n.setColorSpace(i.colorSpace),s.setNodes(i.nodes.map((e=>{let[t,a,i,s,n,o]=e;return{x:t,r:a,g:i,b:s,midpoint:n,sharpness:o}})))})),e.renderAllViews()}}function A(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,a),V.ZP.obj(e,t),V.ZP.get(e,t,["scene","camera","background","cameraViewPoints"]),B(e,t)}var F={newInstance:V.ZP.newInstance(A,"vtkGlanceVtkJsReader"),extend:A},N=a(503);let E=0;function j(e,t){t.classHierarchy.push("vtkGlanceZipObjReader"),e.parseAsArrayBuffer=a=>a&&a!==t.rawDataBuffer?(t.rawDataBuffer=a,function(e){const t={obj:{},mtl:{},img:{}},a={};return new Promise(((i,s)=>{const n=new(C());n.loadAsync(e).then((()=>{let e=0;function s(){0===e&&(Object.keys(t.mtl).forEach((e=>{const a=t.mtl[e],i=e.split("/").filter(((e,t,a)=>t<a.length-1)).join("/");a.listImages().forEach((e=>{const s=`${i}/${e}`,n=t.img[s];n&&a.setImageSrc(e,n)}))})),Object.keys(t.obj).forEach((e=>{const i=e.replace(/\.obj$/,".mtl"),s=t.obj[e],n=t.mtl[i],o=s.getNumberOfOutputPorts();for(let e=0;e<o;e++){const t=s.getOutputData(e),i=t.getReferenceByName("name"),o=`${i}__${E++}`;a[o]={name:i,dataset:t,mtlReader:n}}})),i(a))}n.forEach(((a,i)=>{a.match(/\.obj$/i)&&(e++,i.async("string").then((i=>{const n=x.ZP.newInstance({splitMode:"usemtl"});n.parseAsText(i),t.obj[a]=n,e--,s()}))),a.match(/\.mtl$/i)&&(e++,i.async("string").then((i=>{const n=N.ZP.newInstance();n.parseAsText(i),t.mtl[a]=n,e--,s()}))),(a.match(/\.jpg$/i)||a.match(/\.png$/i))&&(e++,i.async("base64").then((i=>{const n=a.slice(-3).toLowerCase();t.img[a]=`data:image/${n};base64,${i}`,e--,s()})))}))})).catch(s)}))}(a).then((a=>(t.scene=a,e.modified(),t.scene)))):Promise.resolve(t.appState),e.requestData=()=>{e.parseAsArrayBuffer(t.rawDataBuffer)},e.setProxyManager=e=>{const a=e.getViews();Object.keys(t.scene).forEach((i=>{const{dataset:s,mtlReader:n,name:o}=t.scene[i],r=e.createProxy("Sources","TrivialProducer",{name:i});r.setInputData(s),r.activate();for(let t=0;t<a.length;t++){const i=e.getRepresentation(r,a[t]).getActors()[0];n&&o&&n.applyMaterialToActor(o,i)}})),e.renderAllViews()}}function z(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,a),V.ZP.obj(e,t),V.ZP.get(e,t,["scene"]),j(e,t)}var G={newInstance:V.ZP.newInstance(z,"vtkGlanceZipObjReader"),extend:z},U=a(504),W=a(30);const H={},K={readAsArrayBuffer:(e,t)=>U.Z.fetchBinary(e,t),readAsText:(e,t)=>U.Z.fetchText({},e,t)};function q(e){let{name:t}=e;const a=t.toLowerCase(),i=Object.keys(H).find((e=>a.endsWith(e)));return H[i]}let Y=null;const X=document.createElement("input");function J(e){return new Promise(((t,a)=>{const i=q(e);if(i){const{readMethod:s}=i,n=new FileReader;n.onload=function(){(function(e){let{fileName:t,data:a}=e;return new Promise(((e,i)=>{const s=q({name:t});if(s){const{vtkReader:n,parseMethod:o,fileNameMethod:r,sourceType:l}=s,c=n.newInstance();r&&c[r](t);try{const s=c[o](a);Promise.resolve(s).then((a=>e({dataset:a,reader:c,sourceType:l,name:t}))).catch(i)}catch(e){i(e)}}else i(new Error("No reader mapping"))}))})({fileName:e.name,data:n.result}).then((e=>t(e))).catch((e=>a(e)))},n[s](e)}else a(new Error("No reader mapping"))}))}function Q(e){const t=[];for(let a=0;a<e.length;a+=1)t.push(J(e[a]));return Promise.all(t)}function ee(e,t){const a=[];for(let i=0;i<e.length;i+=1){const{reader:s,sourceType:n,name:o,dataset:r,metadata:l,proxyKeys:c}=e[i];let d=null;if(s||r){const e=s&&s.getOutputData||r&&r.isA&&r.isA("vtkDataSet");let a="TrivialProducer";c&&c.meta&&"vtkLabelMap"===c.meta.glanceDataType&&(a="LabelMap");const i=e?t.createProxy("Sources",a,{name:o,...l}):null;r&&r.isA&&r.isA("vtkDataSet")?i.setInputData(r,n):s&&s.getOutputData?i.setInputAlgorithm(s,n):s&&s.setProxyManager?s.setProxyManager(t):console.error(`No proper reader handler was found for ${o}`),i&&((0,W._3)(t,i),c&&Object.keys(c).forEach((e=>{i.setKey(e,c[e]),"onLoad"===e&&c[e](i)}))),s&&s.getCameraViewPoints&&s.getCameraViewPoints()&&t.getReferenceByName("$store").dispatch("setCameraViewPoints",s.getCameraViewPoints()),d=i}a.push(d)}return t.renderAllViews(),a}X.setAttribute("type","file"),X.setAttribute("multiple","multiple"),X.addEventListener("change",(function(e){Y&&Y(e.target.files),Y=null}));var te={downloadDataset:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(((i,s)=>{const n=q({name:e});if(!n)throw new Error(`No reader found for ${e}`);{const{readMethod:o}=n;K[o](t,a).then((t=>{if(!t)throw new Error(`No data for ${e}`);i(new File([t],e))})).catch(s)}}))},listReaders:function(){return Object.keys(H).map((e=>({name:H[e].name,ext:e})))},listSupportedExtensions:function(){return Object.keys(H)},importBase64Dataset:function(e,t,a){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:512;const s=[],n=atob(t);for(let e=0;e<n.length;e+=i){const t=n.slice(e,e+i),a=new Uint8Array(t.length);for(let e=0;e<t.length;e++)a[e]=t.charCodeAt(e);s.push(a)}const o=new Blob(s,{type:"application/octet-stream"}),r=new File([o],e);return a?(Q([r]).then((e=>{ee(e,a)})),Promise.resolve("loading")):Q([r])},loadFiles:Q,loadFileSeries:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new Promise(((i,s)=>{if(e.length){const n=H[t];if(n){const{vtkReader:t,fileSeriesMethod:o,fileNameMethod:r,sourceType:l}=n,c=t.newInstance();if(r&&c[r](a),o){const t=c[o](e);Promise.resolve(t).then((e=>i({dataset:e,reader:c,sourceType:l,name:a})))}else s(new Error("No file series method available"))}else s(new Error(`No file series reader mapping for ${t}`))}else i()}))},openFiles:function(e,t){Y=t,X.setAttribute("accept",e.map((e=>`.${e}`)).join(",")),X.value=null,X.click()},registerReader:function(e){let{extension:t,name:a,vtkReader:i,readMethod:s,parseMethod:n,fileNameMethod:o,fileSeriesMethod:r,sourceType:l,binary:c}=e;H[t]={name:a,vtkReader:i,readMethod:s||c?"readAsArrayBuffer":"readAsText",parseMethod:n||c?"parseAsArrayBuffer":"parseAsText",fileNameMethod:o,fileSeriesMethod:r,sourceType:l}},registerReadersToProxyManager:ee};te.registerReader({extension:"glance",name:"Glance State Reader",vtkReader:$,binary:!0}),te.registerReader({extension:"obz",name:"OBJ bundle",vtkReader:G,binary:!0}),te.registerReader({extension:"vtkjs",name:"vtkjs",vtkReader:F,binary:!0}),te.registerReader({extension:"vtp",name:"Polydata Reader",vtkReader:y.ZP,binary:!0}),te.registerReader({extension:"vti",name:"ImageData Reader",vtkReader:f.ZP,binary:!0}),te.registerReader({extension:"stl",name:"STL Binary Reader",vtkReader:b.ZP,binary:!0}),te.registerReader({extension:"obj",name:"OBJ Reader",vtkReader:x.ZP,binary:!1}),te.registerReader({extension:"pdb",name:"PDB Reader",vtkReader:w.ZP,binary:!1,sourceType:"vtkMolecule"}),te.registerReader({extension:"glyph",name:"Glyph Data Reader",vtkReader:S.ZP,binary:!1,sourceType:"Glyph"}),te.registerReader({extension:"skybox",name:"Skybox Data Reader",vtkReader:P.ZP,binary:!0,sourceType:"Skybox"}),te.registerReader({extension:"json",name:"JSON Reader",vtkReader:S.ZP,binary:!1}),te.registerReader({extension:"ply",name:"PLY Reader",vtkReader:_.ZP,binary:!0});a(378);var ae=a(150),ie=a(539),se=a(543),ne=a(544),oe=a(545),re=a(547),le=a(548),ce=a(369),de=a(549),ue=a(465),pe=a(35),ve=a(473),me=a(551);function ge(e,t){t.classHierarchy.push("vtkCropWidgetProp"),t.representations.filter((e=>e.isA("vtkOutlineContextRepresentation"))).forEach((e=>e.getActor().getProperty().set({ambient:1,diffuse:0}))),t.widgetState.getAllNestedStates().filter((e=>!!e.setScale1)).forEach((e=>e.setScale1(20)))}var he=a(21);function ye(e,t){t.classHierarchy.push("vtkCropWidget"),t.behavior=V.ZP.chain(t.behavior,ge),t.methodsToLink=t.methodsToLink||[],t.methodsToLink.push("handleScale"),e.getRepresentationsForViewType=e=>{switch(e){case he.cO.DEFAULT:case he.cO.GEOMETRY:case he.cO.SLICE:case he.cO.VOLUME:}return[{builder:pe.ZP,labels:["handles"],initialValues:{scaleInPixels:!0}},{builder:ve.ZP,labels:["corners"]}]}}const fe={};function be(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fe,a),me.ZP.extend(e,t,a),ye(e,t)}var xe={newInstance:V.ZP.newInstance(be,"vtkCropWidget"),extend:be},we=a(552),_e=a(476);function Se(e,t){const a={...e},i=[];let s=null;e.handleMouseMove=e=>{const t=a.handleMouseMove(e);return s=e,t},e.delete=()=>{for(a.delete();i.length;)i.pop().unsubscribe()},i.push(t.manipulator.onModified((()=>{s&&a.handleMouseMove(s)})))}function Pe(e,t){(0,_e.Z)(e,t),Se(e,t)}var ke=a(41);function Ce(e,t){t.classHierarchy.push("vtkAngle2DWidget"),t.methodsToLink=[...t.methodsToLink??[],"circleProps","lineProps","textProps","text","textStateIndex"],t.behavior=Pe,t.widgetState=ke.Z.createBuilder().addStateFromMixin({labels:["moveHandle"],mixins:["origin","color","scale1","visible","manipulator"],name:"moveHandle",initialValues:{scale1:50,origin:[-1,-1,-1],visible:!1}}).addDynamicMixinState({labels:["handles"],mixins:["origin","color","scale1","visible","manipulator"],name:"handle",initialValues:{scale1:50,origin:[-1,-1,-1],visible:!0}}).build(),e.getRepresentationsForViewType=e=>{switch(e){case he.cO.DEFAULT:case he.cO.GEOMETRY:case he.cO.SLICE:case he.cO.VOLUME:}return[{builder:pe.ZP,labels:["handles"],initialValues:{scaleInPixels:!0}},{builder:pe.ZP,labels:["moveHandle"],initialValues:{scaleInPixels:!0}}]}}const Ve={};function Ie(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ve,a),we.ZP.extend(e,t,a),V.ZP.setGet(e,t,["manipulator"]),Ce(e,t)}var Te={newInstance:V.ZP.newInstance(Ie,"vtkAngle2DWidget"),extend:Ie},$e=a(553),De=a(477);function Me(e,t){(0,De.Z)(e,t),Se(e,t)}function Le(e,t){t.classHierarchy.push("vtkDistance2DWidget"),t.methodsToLink=[...t.methodsToLink??[],"circleProps","lineProps","textProps","text","textStateIndex"],t.behavior=Me,t.widgetState=ke.Z.createBuilder().addStateFromMixin({labels:["moveHandle"],mixins:["origin","color","scale1","visible","manipulator"],name:"moveHandle",initialValues:{scale1:50,origin:[0,0,0],visible:!1}}).addDynamicMixinState({labels:["handles"],mixins:["origin","color","scale1","visible","manipulator"],name:"handle",initialValues:{scale1:50,origin:[0,0,0],visible:!0}}).build(),e.getRepresentationsForViewType=e=>{switch(e){case he.cO.DEFAULT:case he.cO.GEOMETRY:case he.cO.SLICE:case he.cO.VOLUME:}return[{builder:pe.ZP,labels:["handles"],initialValues:{scaleInPixels:!0}},{builder:pe.ZP,labels:["moveHandle"],initialValues:{scaleInPixels:!0}}]}}const Ze={};function Oe(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ze,a),$e.ZP.extend(e,t,a),Le(e,t)}var Re={newInstance:V.ZP.newInstance(Oe,"vtkDistance2DWidget"),extend:Oe},Be=a(62),Ae=a(63);function Fe(e,t){t.classHierarchy.push("vtkTextWidgetProp");let a=null;function i(e){return e.altKey||e.controlKey||e.shiftKey}e.setDisplayCallback=e=>t.representations[0].setDisplayCallback(e),e.handleLeftButtonPress=s=>{if(!t.activeState||!t.activeState.getActive()||!t.pickable||i(s))return V.ZP.VOID;if(t.activeState===t.widgetState.getMoveHandle()&&t.widgetState.getHandleList().length<1){const e=t.widgetState.getMoveHandle(),a=t.widgetState.addHandle();a.setOrigin(...e.getOrigin()),a.setColor(e.getColor()),a.setScale1(e.getScale1())}else a=!0,t._apiSpecificRenderWindow.setCursor("grabbing"),t._interactor.requestAnimation(e);return e.invokeStartInteractionEvent(),V.ZP.EVENT_ABORT},e.handleMouseMove=s=>{if(t.hasFocus&&1===t.widgetState.getHandleList().length)return t._widgetManager.releaseFocus(),V.ZP.VOID;if(t.pickable&&t.manipulator&&t.activeState&&t.activeState.getActive()&&!i(s)){const{worldCoords:i}=t.manipulator.handleEvent(s,t._apiSpecificRenderWindow);if(i.length&&(t.activeState===t.widgetState.getMoveHandle()||a))return t.activeState.setOrigin(i),e.invokeInteractionEvent(),V.ZP.EVENT_ABORT}return V.ZP.VOID},e.handleLeftButtonRelease=()=>{a&&t.pickable?(t._apiSpecificRenderWindow.setCursor("pointer"),t.widgetState.deactivate(),t._interactor.cancelAnimation(e),e.invokeEndInteractionEvent()):t.activeState!==t.widgetState.getMoveHandle()&&t.widgetState.deactivate(),(t.hasFocus&&!t.activeState||t.activeState&&!t.activeState.getActive())&&e.invokeEndInteractionEvent(),a=!1},e.grabFocus=()=>{!t.hasFocus&&t.widgetState.getHandleList().length<1&&(t.activeState=t.widgetState.getMoveHandle(),t.activeState.activate(),t.activeState.setVisible(!0),t._interactor.requestAnimation(e),e.invokeStartInteractionEvent()),t.hasFocus=!0},e.loseFocus=()=>{t.hasFocus&&(t._interactor.cancelAnimation(e),e.invokeEndInteractionEvent()),t.widgetState.deactivate(),t.widgetState.getMoveHandle().deactivate(),t.widgetState.getMoveHandle().setVisible(!1),t.activeState=null,t.hasFocus=!1,t._widgetManager.enablePicking(),t._interactor.render()}}function Ne(e,t){t.classHierarchy.push("vtkTextWidget"),t.methodsToLink=["activeScaleFactor","activeColor","useActiveColor","defaultScale","circleProps","textProps","text","textStateIndex","handleScale"],t.behavior=Fe,t.widgetState=ke.Z.createBuilder().addStateFromMixin({labels:["moveHandle"],mixins:["origin","color","scale1","visible"],name:"moveHandle",initialValues:{scale1:50,origin:[0,0,0],visible:!1}}).addDynamicMixinState({labels:["handles"],mixins:["origin","color","scale1","visible"],name:"handle",initialValues:{scale1:50,origin:[0,0,0]}}).build(),e.getRepresentationsForViewType=e=>{switch(e){case he.cO.DEFAULT:case he.cO.GEOMETRY:case he.cO.SLICE:case he.cO.VOLUME:}return[{builder:pe.ZP,labels:["handles"],initialValues:{scaleInPixels:!0}},{builder:pe.ZP,labels:["moveHandle"]}]},t.widgetState.onBoundsChange((e=>{const a=[.5*(e[0]+e[1]),.5*(e[2]+e[3]),.5*(e[4]+e[5])];t.widgetState.getMoveHandle().setOrigin(a)})),t.manipulator=Ae.ZP.newInstance()}const Ee={};function je(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ee,a),Be.ZP.extend(e,t,a),V.ZP.setGet(e,t,["manipulator"]),Ne(e,t)}var ze={newInstance:V.ZP.newInstance(je,"vtkTextWidget"),extend:je},Ge=a(554),Ue=a(478);function We(e,t){t.classHierarchy.push("vtkCustomSliceRepresentationProxy");const a={...e};e.setOpacity=e=>{e>=0&&e<=1&&a.setOpacity(e)&&t.property.setOpacity(e)},e.setColorBy=function(i,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(a.setColorBy(i,s,n),null!==i&&t.useColorByForColor||t.property.setRGBTransferFunction(0,null),null!==i&&t.useColorByForOpacity||t.property.setPiecewiseFunction(0,null),i&&s){if(t.useColorByForColor){const a=e.getLookupTableProxy(i);t.property.setRGBTransferFunction(0,a.getLookupTable())}if(t.useColorByForOpacity){const a=e.getPiecewiseFunctionProxy(i);t.property.setPiecewiseFunction(0,a.getPiecewiseFunction())}}},e.setUseColorByForColor=t=>{if(a.setUseColorByForColor(t)){const t=e.getColorBy();e.setColorBy(...t)}},e.setUseColorByForOpacity=t=>{if(a.setUseColorByForOpacity(t)){const t=e.getColorBy();e.setColorBy(...t)}}}const He={opacity:1,useColorByForColor:!1,useColorByForOpacity:!1};function Ke(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,He,a),Ue.ZP.extend(e,t),V.ZP.setGet(e,t,["opacity","useColorByForColor","useColorByForOpacity"]),We(e,t)}var qe={newInstance:V.ZP.newInstance(Ke,"vtkCustomSliceRepresentationProxy"),extend:Ke},Ye=a(555);function Xe(e,t){t.classHierarchy.push("vtkCustomVolumeRepresentationProxy");const a={...e};e.setColorBy=function(i,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(a.setColorBy(i,s,n),null!==i&&t.sliceUseColorByForColor||t.propertySlices.setRGBTransferFunction(0,null),null!==i&&t.sliceUseColorByForOpacity||t.propertySlices.setPiecewiseFunction(0,null),i&&s){if(t.sliceUseColorByForColor){const a=e.getLookupTableProxy(i);t.propertySlices.setRGBTransferFunction(0,a.getLookupTable())}if(t.sliceUseColorByForOpacity){const a=e.getPiecewiseFunctionProxy(i);t.propertySlices.setPiecewiseFunction(0,a.getPiecewiseFunction())}}},e.setSliceOpacity=e=>{e>=0&&e<=1&&a.setSliceOpacity(e)&&t.propertySlices.setOpacity(e)},e.setSliceUseColorByForColor=t=>{if(a.setSliceUseColorByForColor(t)){const t=e.getColorBy();e.setColorBy(...t)}},e.setSliceUseColorByForOpacity=t=>{if(a.setSliceUseColorByForOpacity(t)){const t=e.getColorBy();e.setColorBy(...t)}},e.setIs2DVolume=t=>{a.setIs2DVolume(t),t&&(e.setSliceUseColorByForColor(!0),e.setSliceUseColorByForOpacity(!0))}}const Je={sliceOpacity:1,sliceUseColorByForColor:!1,sliceUseColorByForOpacity:!1};function Qe(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Je,a),Ye.ZP.extend(e,t),V.ZP.setGet(e,t,["sliceOpacity","sliceUseColorByForColor","sliceUseColorByForOpacity"]),Xe(e,t)}var et={newInstance:V.ZP.newInstance(Qe,"vtkCustomVolumeRepresentationProxy"),extend:Qe},tt=a(119),at=a(120),it=a(40),st=a(51),nt=a(50);function ot(e,t){t.classHierarchy.push("vtkLabelMapVolumeRepProxy");const a=(0,W.y5)();function i(e){const a=e.getColorMap(),i=st.ZP.newInstance(),s=nt.ZP.newInstance();Object.keys(a).forEach((e=>{const t=Number(e);i.addRGBPoint(t,...a[e].slice(0,3).map((e=>e/255))),s.addPoint(t,a[e][3]/255)})),t.property.setRGBTransferFunction(0,i),t.property.setScalarOpacity(0,s);const n=Math.max(...e.getDimensions());t.property.setScalarOpacityUnitDistance(0,Math.sqrt(n));const o=e.getSpacing().map((e=>e*e)).reduce(((e,t)=>e+t),0);t.mapper.setSampleDistance(o*2**-1.5)}t.mapper=at.ZP.newInstance(),t.volume=tt.ZP.newInstance(),t.property=t.volume.getProperty(),t.property.setInterpolationTypeToNearest(),t.sourceDependencies.push({setInputData(e){e?(a.sub(e.onModified((()=>i(e)))),i(e),t.mapper.setInputData(e)):a.unsub()}}),t.volume.setMapper(t.mapper),t.volumes.push(t.volume),e.setVisibility=e=>{t.volume.setVisibility(e)},e.getVisibility=()=>t.volume.getVisibility(),e.isVisible=e.getVisibility,e.delete=V.ZP.chain(e.delete,(()=>{a.unsub()}))}const rt={};function lt(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,rt,a),it.Z.extend(e,t),ot(e,t),V.ZP.proxyPropertyMapping(e,t,{volumeVisibility:{modelKey:"volume",property:"visibility"}})}var ct={newInstance:V.ZP.newInstance(lt,"vtkLabelMapVolumeRepProxy"),extend:lt},dt=a(47);const{InterpolationType:ut}=dt.C;function pt(e,t){t.classHierarchy.push("vtkLabelMapSliceRepProxy");const a=(0,W.y5)();function i(e){const a=e.getColorMap(),i=st.ZP.newInstance(),s=nt.ZP.newInstance();Object.keys(a).forEach((e=>{const t=Number(e);i.addRGBPoint(t,...a[e].slice(0,3).map((e=>e/255))),s.addPoint(t,a[e][3]/255)})),t.property.setRGBTransferFunction(i),t.property.setScalarOpacity(s)}t.property.setInterpolationType(ut.NEAREST),e.setColorBy=()=>{},e.delete=V.ZP.chain(e.delete,(()=>a.unsub())),t.sourceDependencies.push({setInputData:function(e){a.sub(e.onModified((()=>i(e)))),i(e)}})}const vt={};function mt(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,vt,a),Ue.ZP.extend(e,t),pt(e,t)}var gt={newInstance:V.ZP.newInstance(mt,"vtkLabelMapSliceRepProxy"),extend:mt};function ht(e,t){t.classHierarchy.push("vtkWidgetProxy"),t.widget=t.factory.newInstance();const a=[],i=t.widget.getWidgetState().onModified((()=>e.modified())),s=new WeakSet;function n(e){t.proxyManager.getViews().forEach((t=>{const a=t.getReferenceByName("widgetManager");a&&e(t,a)}))}e.addToViews=()=>n((e=>{const a=he.cO[t.viewTypes[e.getProxyName()]],i=function(e,t,a){const i=t.getReferenceByName("widgetManager");if(i){const s=i.addWidget(e,a);return i.enablePicking(),t.renderLater(),s}return null}(t.widget,e,a);i&&s.add(i)})),e.removeFromViews=()=>n((e=>function(e,t){const a=t.getReferenceByName("widgetManager");a&&(a.removeWidget(e),a.enablePicking(),t.renderLater())}(t.widget,e))),e.grabFocus=()=>n(((e,a)=>a.grabFocus(t.widget))),e.releaseFocus=()=>n(((e,a)=>a.releaseFocus(t.widget))),e.getViewWidget=e=>{const a=e.getReferenceByName("widgetManager");return a?t.widget.getWidgetForView({viewId:a.getViewId()}):null},e.getAllViewWidgets=()=>t.proxyManager.getViews().map((t=>[e.getViewWidget(t),t])).filter((e=>{let[t]=e;return!!t})),e.executeViewFuncs=t=>{n(((i,s)=>{const n=t[i.getProxyName()];if(n){const t=n(i,s,e.getViewWidget(i));if(Array.isArray(t))for(let e=0;e<t.length;e++)t[e]instanceof Function&&a.push(t[e]);else t instanceof Function&&a.push(t)}}))};const o=e.delete;e.delete=()=>{i.unsubscribe();for(let e=0;e<a.length;e++)a[e]();t.widget.delete(),t.widget=null,o()}}const yt={name:"",widget:null,factory:null,viewTypes:{}};function ft(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,yt,a),V.ZP.obj(e,t),V.ZP.proxy(e,t),V.ZP.setGet(e,t,["name"]),V.ZP.get(e,t,["widget","viewTypes"]),ht(e,t),V.ZP.proxyPropertyMapping(e,t,{widgetState:{modelKey:"widget",property:"widgetState"}})}var bt={newInstance:V.ZP.newInstance(ft,"vtkWidgetProxy"),extend:ft},xt=a(556),wt=a(557);var _t={createProxyDefinition:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{class:e,options:{links:a,ui:t,...i},props:s}},activateOnCreate:function(e){return e.options.activateOnCreate=!0,e},deepCopyPath:function(e,t){const a="string"==typeof t?t.split("."):t,i={...e};let s=i;for(;a.length;){const e=a.shift();if(!Object.prototype.hasOwnProperty.call(s,e))throw new Error(`Invalid property path given: ${a}`);s[e]instanceof Array?s[e]=Array.from(s[e]):s[e]={...s[e]},s=s[e]}return i},objAssignPath:function(e,t,a){const i="string"==typeof t?t.split("."):t;let s=e;for(;i.length>1;){const e=i.shift();if(!Object.prototype.hasOwnProperty.call(s,e))throw new Error(`Invalid property path given: ${i}`);s=s[e]}if(1!==i.length)throw new Error(`Invalid property path given: ${i}`);s[i.shift()]=a}};var St=[{name:"colorBy",domain:{}},{name:"xSliceVisibility"},{name:"ySliceVisibility"},{name:"zSliceVisibility"},{name:"volumeVisibility"},{name:"sliceOpacity"},{name:"sliceUseColorByForColor"},{name:"sliceUseColorByForOpacity"},{name:"useShadow"},{name:"sampleDistance",domain:{min:0,max:1,step:.01}},{name:"edgeGradient",domain:{min:0,max:1,step:.01}},{name:"windowWidth",domain:{min:0,max:255,step:.01}},{name:"windowLevel",domain:{min:0,max:255,step:.01}},{name:"xSlice",domain:{min:0,max:255,step:1}},{name:"ySlice",domain:{min:0,max:255,step:1}},{name:"zSlice",domain:{min:0,max:255,step:1}}],Pt=[{name:"colorBy",domain:{}},{name:"color"},{name:"representation",domain:{items:[{text:"Surface",value:"Surface"},{text:"Surface with edges",value:"Surface with edges"},{text:"Wireframe",value:"Wireframe"},{text:"Points",value:"Points"}]}},{name:"opacity",domain:{min:0,max:1,step:.01}},{name:"interpolateScalarsBeforeMapping"},{name:"visibility"},{name:"pointSize",domain:{min:1,max:50}}],kt=[{name:"colorBy",domain:{}},{name:"useColorByForColor"},{name:"useColorByForOpacity"},{name:"visibility"},{name:"windowWidth",domain:{min:0,max:255,step:.01}},{name:"windowLevel",domain:{min:0,max:255,step:.01}},{name:"slice",domain:{min:0,max:255,step:1}},{name:"opacity",domain:{min:0,max:1,step:.01}}],Ct=[{name:"tolerance",domain:{min:0,max:.5,step:.01}},{name:"atomicRadiusScaleFactor",domain:{min:0,max:.5,step:.01}},{name:"bondRadius",domain:{min:0,max:.5,step:.01}},{name:"deltaBondFactor",domain:{min:0,max:.5,step:.01}},{name:"hideElements"}],Vt=[{name:"edgeVisibility"}],It=[{name:"name"},{name:"background",domain:{palette:[]}},{name:"orientationAxesVisibility"},{name:"presetToOrientationAxes",domain:{items:[{text:"XYZ",value:"default"},{text:"LPS",value:"lps"}]}}],Tt=[{name:"name"},{name:"background",domain:{palette:[]}},{name:"orientationAxesVisibility"},{name:"presetToOrientationAxes",domain:{items:[{text:"XYZ",value:"default"},{text:"LPS",value:"lps"}]}},{name:"annotationOpacity",domain:{min:0,max:1,step:.01}}],$t=[{name:"position"}];var Dt=[{link:"Visibility",property:"visibility",updateOnBind:!0},{link:"WW",property:"windowWidth",updateOnBind:!0},{link:"WL",property:"windowLevel",updateOnBind:!0},{link:"SliceX",property:"xSlice",updateOnBind:!0,type:"application"},{link:"SliceY",property:"ySlice",updateOnBind:!0,type:"application"},{link:"SliceZ",property:"zSlice",updateOnBind:!0,type:"application"},{link:"SliceOpacity",property:"sliceOpacity",updateOnBind:!0},{link:"UseSliceColor",property:"sliceUseColorByForColor",updateOnBind:!0},{link:"UseSliceOpacity",property:"sliceUseColorByForOpacity",updateOnBind:!0}],Mt=[{link:"GeometryColorBy",property:"colorBy",updateOnBind:!0},{link:"Representation",property:"representation",updateOnBind:!0},{link:"Opacity",property:"opacity",updateOnBind:!0},{link:"InterpolateScalarsBeforeMapping",property:"interpolateScalarsBeforeMapping",updateOnBind:!0},{link:"Visibility",property:"visibility",updateOnBind:!0},{link:"PointSize",property:"pointSize",updateOnBind:!0}],Lt=[{link:"Visibility",property:"visibility",updateOnBind:!0},{link:"WW",property:"windowWidth",updateOnBind:!0},{link:"WL",property:"windowLevel",updateOnBind:!0},{link:"SliceOpacity",property:"opacity",updateOnBind:!0},{link:"UseSliceColor",property:"useColorByForColor",updateOnBind:!0},{link:"UseSliceOpacity",property:"useColorByForOpacity",updateOnBind:!0}],Zt=[{link:"Tolerance",property:"tolerance",updateOnBind:!0},{link:"AtomicRadiusScaleFactor",property:"atomicRadiusScaleFactor",updateOnBind:!0},{link:"BondRadius",property:"bondRadius",updateOnBind:!0},{link:"DeltaBondFactor",property:"deltaBondFactor",updateOnBind:!0},{link:"HideElements",property:"hideElements",updateOnBind:!0}],Ot=[{link:"GlyphEdgeVisibility",property:"edgeVisibility",updateOnBind:!0}],Rt=[{link:"SkyboxPosition",property:"position",updateOnBind:!0}];var Bt={View2D:{vtkPolyData:{name:"Geometry"},vtkImageData:{name:"Slice"},vtkLabelMap:{name:"LabelMapSlice"},vtkMolecule:{name:"Molecule"},Glyph:{name:"Glyph"},Skybox:{name:"Skybox"}},View3D:{vtkPolyData:{name:"Geometry"},vtkImageData:{name:"Volume"},vtkLabelMap:{name:"LabelMapVolume"},vtkMolecule:{name:"Molecule"},Glyph:{name:"Glyph"},Skybox:{name:"Skybox"}}};const{createProxyDefinition:At,activateOnCreate:Ft}=_t,Nt={View3D:"VOLUME",View2D_X:"SLICE",View2D_Y:"SLICE",View2D_Z:"SLICE"};function Et(e,t,a,i){return Ft(At(e,t,[{type:"application",link:"AnnotationOpacity",property:"annotationOpacity",updateOnBind:!0},{type:"application",link:"OrientationAxesVisibility",property:"orientationAxesVisibility",updateOnBind:!0},{type:"application",link:"OrientationAxesPreset",property:"presetToOrientationAxes",updateOnBind:!0},{type:"application",link:"OrientationAxesType",property:"orientationAxesType",updateOnBind:!0}],a,i))}var jt={Proxy:{definitions:{Proxy:{LookupTable:At(re.ZP,[],[],{presetName:"Default (Cool to Warm)"}),PiecewiseFunction:At(ce.Z)},Widgets:{Crop:At(bt,[],[],{factory:xe,viewTypes:Nt}),Paint:At(bt,[],[],{factory:Ge.ZP,viewTypes:Nt}),Angle:At(bt,[],[],{factory:Te,viewTypes:Nt}),Ruler:At(bt,[],[],{factory:Re,viewTypes:Nt}),Text:At(bt,[],[],{factory:ze,viewTypes:Nt})},Sources:{TrivialProducer:Ft(At(de.ZP)),LabelMap:At(de.ZP)},Representations:{Geometry:At(se.ZP,Pt,Mt),Skybox:At(ne.ZP,$t,Rt),Slice:At(qe,kt,Lt),SliceX:At(qe,kt,[{link:"SliceX",property:"slice",updateOnBind:!0,type:"application"}].concat(Lt)),SliceY:At(qe,kt,[{link:"SliceY",property:"slice",updateOnBind:!0,type:"application"}].concat(Lt)),SliceZ:At(qe,kt,[{link:"SliceZ",property:"slice",updateOnBind:!0,type:"application"}].concat(Lt)),Volume:At(et,St,Dt),Molecule:At(le.ZP,Ct,Zt),Glyph:At(oe.ZP,Vt,Ot),LabelMapVolume:At(ct,[],[]),LabelMapSlice:At(gt),LabelMapSliceX:At(gt,[],[{link:"SliceX",property:"slice",updateOnBind:!0,type:"application"}]),LabelMapSliceY:At(gt,[],[{link:"SliceY",property:"slice",updateOnBind:!0,type:"application"}]),LabelMapSliceZ:At(gt,[],[{link:"SliceZ",property:"slice",updateOnBind:!0,type:"application"}])},Views:{View3D:Et(ue.Z,It),View2D:Et(ie.ZP,Tt),View2D_X:Et(ie.ZP,Tt,{axis:0}),View2D_Y:Et(ie.ZP,Tt,{axis:1}),View2D_Z:Et(ie.ZP,Tt,{axis:2})},AnimationManager:{AnimationProxyManager:{class:xt.Z}},Animations:{TimeStepAnimation:{class:wt.Z}}},representations:{View3D:Bt.View3D,View2D:Bt.View2D,View2D_X:{...Bt.View2D,vtkImageData:{name:"SliceX"},vtkLabelMap:{name:"LabelMapSliceX"}},View2D_Y:{...Bt.View2D,vtkImageData:{name:"SliceY"},vtkLabelMap:{name:"LabelMapSliceY"}},View2D_Z:{...Bt.View2D,vtkImageData:{name:"SliceZ"},vtkLabelMap:{name:"LabelMapSliceZ"}}},filters:{vtkPolyData:[],vtkImageData:[],vtkMolecule:[],Glyph:[]}}},zt=a(23);function Gt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(;e.length>0;)e.pop().unsubscribe()}function Ut(e){const t=[],a={};return i=>{const s=(e,t)=>{e in i._actions&&i.dispatch(e,t)};t.push(e.onProxyRegistrationChange((e=>{const{action:t,proxyId:i,proxy:n}=e;"register"===t?(s("pxmProxyCreated",e),a[i]=n.onModified((e=>s("pxmProxyModified",e)))):i in a&&(a[i].unsubscribe(),s("pxmProxyDeleted",e)),s("pxmProxyRegistrationChange",e)}))),t.push(e.onActiveSourceChange((e=>s("pxmActiveSourceChange",e)))),t.push(e.onActiveViewChange((e=>s("pxmActiveViewChange",e))))}}const Wt=Symbol("PXM_SUBS"),Ht=Symbol("PROXY_SUBS"),Kt={install(e){e.mixin({beforeCreate(){const e=this.$options;this.$proxyManager=e.proxyManager||e.parent&&e.parent.$proxyManager},mounted(){if(this.$options.proxyManagerHooks){const e=[],t={},a=this.$options.proxyManagerHooks;if(a.onProxyCreated||a.onProxyModified||a.onProxyDeleted||a.onProxyRegistrationChange){if(a.onProxyModified){const e=this.$proxyManager.getProxyGroups();let i=[];for(let t=0;t<e.length;t++){const a=e[t];i=i.concat(this.$proxyManager.getProxyInGroup(a))}for(let e=0;e<i.length;e++){const s=i[e];t[s.getProxyId()]=s.onModified((e=>a.onProxyModified.call(this,e)))}}e.push(this.$proxyManager.onProxyRegistrationChange((e=>{const{action:i,proxyId:s,proxy:n}=e;"register"===i?(a.onProxyCreated&&a.onProxyCreated.call(this,e),a.onProxyModified&&(t[s]=n.onModified((e=>a.onProxyModified.call(this,e))))):"unregister"===i&&(s in t&&(t[s].unsubscribe(),delete t[s]),a.onProxyDeleted&&a.onProxyDeleted.call(this,e)),a.onProxyRegistrationChange&&a.onProxyRegistrationChange.call(this,e)})))}a.onActiveSourceChange&&e.push(this.$proxyManager.onActiveSourceChange((e=>V.ZP.setImmediate((()=>a.onActiveSourceChange.call(this,e)))))),a.onActiveViewChange&&e.push(this.$proxyManager.onActiveViewChange((e=>V.ZP.setImmediate((()=>a.onActiveViewChange.call(this,e)))))),this[Wt]=e,this[Ht]=t}},beforeDestroy(){this[Wt]&&Gt(this[Wt]),this[Ht]&&(Gt(Object.values(this[Ht])),this[Ht]={})}})}};var qt={getViewType:function(e){return`${e.getProxyName()}:${e.getName()}`}},Yt=a(381);function Xt(e){const t=Yt.ZP.newInstance(e.get("direction","origin","spacing"));return t.setDimensions(e.getDimensions()),t.computeTransforms(),t.getPointData().setScalars(e.getPointData().getScalars()),t}function Jt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("vtkLabelMap"===t.glanceDataType){const a=Xt(e);return t.colorMap&&a.setColorMap(t.colorMap),a}return e}var Qt=a(4),ea=a(15);function ta(){return["zip","raw","glance","gz"].concat(te.listSupportedExtensions())}function aa(e){const t=e.lastIndexOf(".");return t>-1?e.substr(t+1).toLowerCase():""}function ia(e,t){const a=ta(),i=[];return e.folder(t).forEach(((t,s)=>{if(s.dir)i.push(ia(e,t));else if(a.indexOf(aa(s.name))>-1){const t=s.name.split("/"),a=t[t.length-1];i.push(e.file(s.name).async("blob").then((e=>new File([e],a))))}})),i}var sa=e=>{let{proxyManager:t,girder:a}=e;return{namespaced:!0,state:{remoteFileList:[],fileList:[],loading:!1,progress:{}},getters:{anyErrors:e=>e.fileList.reduce(((e,t)=>e||"error"===t.state),!1),totalProgress(e){const t=Object.values(e.progress);return 0===t.length?0:t.reduce(((e,t)=>e+t),0)/t.length}},mutations:{startLoading(e){e.loading=!0},stopLoading(e){e.loading=!1},resetQueue(e){e.fileList=[]},addToFileList(e,t){for(let a=0;a<t.length;a++){const i=t[a],s={state:"loading",name:i.name,ext:aa(i.name),files:null,reader:null,extraInfo:null,remoteURL:null,withGirderToken:!1,proxyKeys:i.proxyKeys};"dicom"===i.type&&(s.files=i.list),"remote"===i.type&&Object.assign(s,{state:"needsDownload",remoteURL:i.remoteURL,remoteOpts:i.remoteOpts||{},withGirderToken:!!i.withGirderToken}),"regular"===i.type&&(s.files=[i.file]),e.fileList.push(s)}},setFileNeedsInfo(e,t){t>=0&&t<e.fileList.length&&(e.fileList[t].state="needsInfo",e.fileList[t].extraInfo=null)},setRemoteFile(e,t){let{index:a,file:i}=t;a>=0&&a<e.fileList.length&&(e.fileList[a].state="loading",e.fileList[a].files=[i])},setFileReader(e,t){let{index:a,reader:i}=t;i&&a>=0&&a<e.fileList.length&&(e.fileList[a].reader=i,e.fileList[a].state="ready")},setRawFileInfo(e,t){let{index:a,info:i}=t;i&&a>=0&&a<e.fileList.length&&(e.fileList[a].extraInfo=i,e.fileList[a].state="loading")},setFileError(e,t){let{index:a,error:i}=t;i&&a>=0&&a<e.fileList.length&&(e.fileList[a].error=i,e.fileList[a].state="error")},deleteFile(e,t){t>=0&&t<e.fileList.length&&e.fileList.splice(t,1)},setProgress(e,t){let{id:a,percentage:s}=t;i.default.set(e.progress,a,s)},clearProgresses(e){e.progress={}}},actions:{promptLocal(e){let{dispatch:t}=e;const a=ta();return new Promise(((e,i)=>te.openFiles(a,(a=>{t("openFiles",Array.from(a)).then(e).catch(i)}))))},resetQueue(e){let{commit:t}=e;t("resetQueue")},deleteFile(e,t){let{commit:a}=e;a("deleteFile",t)},openRemoteFiles(e,t){let{commit:a,dispatch:i}=e;return a("addToFileList",t.map((e=>({type:"remote",name:e.name,remoteURL:e.url,remoteOpts:e.options,withGirderToken:!!e.withGirderToken,proxyKeys:e.proxyKeys})))),i("readAllFiles")},openFiles(e,t){let{commit:a,dispatch:i}=e;const s=t.filter((e=>"zip"===aa(e.name)));if(s.length){const e=t.filter((e=>"zip"!==aa(e.name))),a=s.map((e=>C().loadAsync(e).then((e=>Promise.all(ia(e))))));return Promise.all(a).then((t=>[].concat.apply(e,t))).then((e=>i("openFiles",e)))}const n=[],o=[];if(t.forEach((e=>{"dcm"===aa(e.name)?o.push(e):n.push(e)})),o.length){a("addToFileList",[{type:"dicom",name:o[0].name,list:o}])}return a("addToFileList",n.map((e=>({type:"regular",name:e.name,file:e})))),i("readAllFiles")},readAllFiles(e){let{dispatch:t,state:a}=e;const i=[];for(let e=0;e<a.fileList.length;e++)i.push(t("readFileIndex",e));return Promise.all(i)},readFileIndex(e,t){let{commit:i,dispatch:s,state:n}=e;const o=n.fileList[t];let r=Promise.resolve();if("ready"===o.state||"error"===o.state)return r;if("needsDownload"===o.state&&o.remoteURL)o.withGirderToken&&(o.remoteOpts.headers={...o.remoteOpts.headers,"Girder-Token":a.girderRest.token}),r=te.downloadDataset(o.name,o.remoteURL,{...o.remoteOpts,progressCallback(e){const t=e.lengthComputable?e.loaded/e.total:1/0;i("setProgress",{id:o.name,percentage:t})}}).then((e=>(i("setRemoteFile",{index:t,file:e}),s("readFileIndex",t)))).catch((()=>{throw new Error("Failed to download file")}));else if("raw"===o.ext)o.extraInfo&&(r=function(e,t){let{dimensions:a,spacing:i,dataType:s}=t;return new Promise(((t,n)=>{const o=new FileReader;o.onload=function(){const e=ea.ZP.newInstance({spacing:i,extent:[0,a[0]-1,0,a[1]-1,0,a[2]-1]}),n=Qt.ZP.newInstance({name:"Scalars",values:new s.constructor(o.result)});e.getPointData().setScalars(n),t(e)},o.onerror=e=>n(e),o.readAsArrayBuffer(e)}))}(o.files[0],o.extraInfo).then((e=>{i("setFileReader",{index:t,reader:{name:o.name,dataset:e}})}))),i("setFileNeedsInfo",t);else if("dcm"===o.ext)r=te.loadFileSeries(o.files,"dcm",o.name).then((e=>{e&&i("setFileReader",{index:t,reader:e})}));else{if("glance"===o.ext)for(let e=0;e<t;e++){if("glance"===n.fileList[e].ext){const e=new Error("Cannot load multiple state files");return i("setFileError",{index:t,error:e}),r}}r=te.loadFiles(o.files).then((e=>{e&&1===e.length&&i("setFileReader",{index:t,reader:e[0]})}))}return r.catch((e=>{e&&i("setFileError",{index:t,error:e.message||"File load failure"})}))},setRawFileInfo(e,t){let{commit:a,dispatch:i}=e,{index:s,info:n}=t;return n?a("setRawFileInfo",{index:s,info:n}):a("setFileNeedsInfo",s),i("readFileIndex",s)},load(e){let{state:a,commit:i,dispatch:s}=e;i("startLoading"),i("clearProgresses");const n=a.fileList.filter((e=>"ready"===e.state));let o=Promise.resolve();const r=n.find((e=>"glance"===e.ext));if(r){const e=r.reader.reader;o=o.then((()=>e.parseAsArrayBuffer().then((()=>s("restoreAppState",e.getAppState(),{root:!0})))))}return o=o.then((()=>{const e=n.filter((e=>"glance"!==e.ext)),a=[],i=[],o=[];for(let t=0;t<e.length;t++){const s=e[t];"vtkLabelMap"===(s.proxyKeys&&s.proxyKeys.meta||{}).glanceDataType?i.push(s):s.name.endsWith(".measurements.json")?o.push(s):a.push(s)}const r=e=>{let a=[];for(let i=0;i<e.length;i++){const s=e[i],n={...s.reader,metadata:s.reader.metadata||{}};s.remoteURL&&Object.assign(n.metadata,{url:s.remoteURL});const o=s.proxyKeys&&s.proxyKeys.meta;if(o){const{reader:e,dataset:t}=n,a=e&&e.getOutputData?e.getOutputData():t;Object.assign(n,{dataset:Jt(a,o),reader:null})}const r=te.registerReadersToProxyManager([{...n,proxyKeys:s.proxyKeys}],t);a=a.concat(r.filter(Boolean))}return a};r(a);const l=r(i),c=t.getSources().filter((e=>"TrivialProducer"===e.getProxyName()));if(c[c.length-1]){const e=c[c.length-1].getProxyId();for(let t=0;t<l.length;t++){const a=l[t];s("widgets/addLabelmapToImage",{imageId:e,labelmapId:a.getProxyId()},{root:!0}).then((()=>s("widgets/setLabelmapState",{labelmapId:a.getProxyId(),labelmapState:{selectedLabel:1,lastColorIndex:1}},{root:!0})))}for(let t=0;t<o.length;t++){const a=o[t].reader.reader.getOutputData();for(let t=0;t<a.length;t++)s("widgets/addMeasurementTool",{datasetId:e,componentName:a[t].componentName,data:a[t].data},{root:!0})}}})),o.finally((()=>i("stopLoading")))}}}},na=a(99),oa=a(379),ra=a(574),la=a(463),ca=a(174);const{CaptureOn:da}=he.ZP;var ua=e=>{let{proxyManager:t}=e;return{namespaced:!0,state:{viewsInitialized:!1,viewTypeToId:{},backgroundColors:{},globalBackgroundColor:ca.qV,axisType:"arrow",axisPreset:la.Bp,axisVisible:!0,annotationOpacity:1,interactionStyle3D:"3D",firstPersonMovementSpeed:null,maxTextureLODSize:5e4,viewOrder:Object.values(la.Zp),visibleCount:1,viewOrientation:la.In,viewTypes:la.v7,masterSourceId:null,previousConfigurationPreset:null},mutations:{setGlobalBackground(e,t){e.globalBackgroundColor=t;const a=Object.keys(e.backgroundColors);for(let i=0;i<a.length;i++)e.backgroundColors[a[i]]=t},setAxisType(e,t){e.axisType=t},setAxisPreset(e,t){e.axisPreset=t},setAxisVisible(e,t){e.axisVisible=t},setAnnotationOpacity(e,t){e.annotationOpacity=t},setInteractionStyle3D(e,t){e.interactionStyle3D=t},setFirstPersonMovementSpeed(e,t){e.firstPersonMovementSpeed=t},setMaxTextureLODSize(e,t){e.maxTextureLODSize=t},mapViewTypeToId(e,t){let{viewType:a,viewId:s}=t;i.default.set(e.viewTypeToId,a,s)},setViewTypes(e,t){e.viewTypes=t},setViewOrientation(e,t){e.viewOrientation=t},setMasterSourceId(e,t){e.masterSourceId=t},setPreviousConfigurationPreset(e,t){e.previousConfigurationPreset=t},changeBackground(e,t){let{viewType:a,color:i}=t;e.backgroundColors[a]=i},viewsInitialized(e){e.viewsInitialized=!0},visibleCount(e,t){e.visibleCount=t},swapViews(e,t){let{index:a,viewType:s}=t;const n=e.viewOrder.indexOf(s),o=e.viewOrder[a];i.default.set(e.viewOrder,a,s),i.default.set(e.viewOrder,n,o)},rewriteProxyIds(e,t){let{views:a}=t;e.viewTypeToId=(0,W.JL)(e.viewTypeToId,a)}},actions:{initViews(e){let{commit:a,state:s}=e;if(!s.viewsInitialized){a("viewsInitialized");let e=null;s.viewOrder.forEach((n=>{const[o,r]=n.split(":"),l=t.createProxy("Views",o,{name:r});if((0,W.XC)(l,s.viewOrientation,r),l.setBackground(0,0,0,0),i.default.set(s.backgroundColors,n,s.globalBackgroundColor),l.setPresetToOrientationAxes("default"),!l.getReferenceByName("widgetManager")){const e=na.ZP.newInstance();e.setRenderer(l.getRenderer()),e.setCaptureOn(da.MOUSE_MOVE),l.set({widgetManager:e},!0)}n===la.H_&&(e=l),a("mapViewTypeToId",{viewType:n,viewId:l.getProxyId()})})),e&&e.activate()}},swapViews(e,t){let{commit:a}=e,{index:i,viewType:s}=t;a("swapViews",{index:i,viewType:s})},singleView(e,t){let{state:a,commit:i}=e;i("swapViews",{index:0,viewType:a.viewOrder[t]}),i("visibleCount",1)},splitView(e,t){let{state:a,commit:i}=e;i("swapViews",{index:t,viewType:a.viewOrder[1]}),i("visibleCount",2)},quadView(e){let{commit:t}=e;t("visibleCount",4)},setGlobalBackground(e,t){let{commit:a}=e;a("setGlobalBackground",t)},changeBackground(e,t){let{commit:a}=e,{viewType:i,color:s}=t;a("changeBackground",{viewType:i,color:s})},setAxisType(e,a){let{commit:i}=e;t.getViews().forEach((e=>{e.setOrientationAxesType(a)})),i("setAxisType",a)},setAxisPreset(e,a){let{commit:i,dispatch:s}=e;t.getViews().forEach((e=>{e.setPresetToOrientationAxes(a)})),i("setAxisPreset",a),s("configureViewOrientationAndTypes",!1)},setViewOrientation(e,a){let{commit:i,state:s}=e,{orientation:n,blockAnimation:o}=a;i("setViewOrientation",n),Object.entries(s.viewTypeToId).forEach((e=>{let[a,i]=e;const s=t.getProxyById(i),[r,l]=a.split(":");(0,W.XC)(s,n,l,o||"View3D"!==r?0:100)}))},setViewTypes(e,t){let{commit:a}=e;a("setViewTypes",t)},configureViewOrientationAndTypes(e,a){let{commit:i,dispatch:s,state:n}=e;if("lps"===n.axisPreset){const e=t.getProxyById(n.masterSourceId);if(e?.getDataset().isA("vtkImageData")){const t=e.getDataset().getDirection(),i=(0,oa.NZ)(t),n={};for(let e=0;e<3;++e)for(let t=0;t<3;++t){0!==i[e+3*t]&&(n["lps"[e]]="xyz"[t])}const o={[la.Zp.default]:"3D",[la.Zp[n.l]]:"Sagittal",[la.Zp[n.p]]:"Coronal",[la.Zp[n.s]]:"Axial"},r=Array(3);ra.transpose(r,i),ra.mul(r,t,r),s("setViewTypes",o),s("setViewOrientation",{orientation:r,blockAnimation:a})}else"lps"!==n.previousConfigurationPreset&&(s("setViewTypes",la.h$),s("setViewOrientation",{orientation:la.In,blockAnimation:a}))}else s("setViewTypes",la.v7),s("setViewOrientation",{orientation:la.In,blockAnimation:a});i("setPreviousConfigurationPreset",n.axisPreset)},updateMasterSourceId(e,a){let{dispatch:i,state:s}=e;const n=t.getRepresentations().filter((e=>!e.isVisible())).map((e=>e.getInput().getProxyId())),o=a.filter((e=>!n.includes(e)));o.includes(s.masterSourceId)||(0===o.length?i("setMasterSourceId",null):i("setMasterSourceId",o[0]))},setMasterSourceId(e,t){let{commit:a,dispatch:i,state:s}=e;const n=null===s.masterSourceId&&null!==t;a("setMasterSourceId",t),"lps"===s.axisPreset&&i("configureViewOrientationAndTypes",n)},setAxisVisible(e,a){let{commit:i}=e;t.getViews().forEach((e=>{e.setOrientationAxesVisibility(a)})),i("setAxisVisible",a)},setAnnotationOpacity(e,a){let{commit:i}=e;t.getViews().forEach((e=>{e.setAnnotationOpacity(a)})),i("setAnnotationOpacity",a)},setInteractionStyle3D(e,a){let{commit:i}=e;t.getViews().filter((e=>"default"===e.getName())).forEach((e=>{e.setPresetToInteractor3D(a)})),i("setInteractionStyle3D",a)},setFirstPersonMovementSpeed(e,a){let{commit:i}=e;t.getViews().filter((e=>"default"===e.getName())).forEach((e=>{e.getInteractorStyle3D().getKeyboardManipulators().forEach((e=>{e.setMovementSpeed&&e.setMovementSpeed(a)}))})),i("setFirstPersonMovementSpeed",a)},resetFirstPersonMovementSpeed(e){let{dispatch:a}=e,i=0;const s=t.getViews().filter((e=>"default"===e.getName()));for(let e=0;e<s.length;++e){const t=s[e],a=t.getInteractorStyle3D().getKeyboardManipulators();for(let e=0;e<a.length;++e){const s=a[e];if(s.resetMovementSpeed){s.setRenderer(t.getRenderer()),s.resetMovementSpeed(),i=s.getMovementSpeed();break}}}i<0&&(i=0),a("setFirstPersonMovementSpeed",i)},setMaxTextureLODSize(e,t){let{commit:a}=e;a("setMaxTextureLODSize",t)},rewriteProxyIds:(0,W.Gy)("rewriteProxyIds")}}},pa=e=>{let{proxyManager:t}=e;return{namespaced:!0,state:{measurements:{},distanceUnitSymbol:"mm",distanceUnitFactor:1,imageToLabelmaps:{},labelmapToImage:{},labelmapStates:{},croppingStates:{}},mutations:{setDistanceUnitSymbol(e,t){e.distanceUnitSymbol=t},setDistanceUnitFactor(e,t){e.distanceUnitFactor=t},addLabelmapToImage(e,t){let{imageId:a,labelmapId:s}=t;a in e.imageToLabelmaps||i.default.set(e.imageToLabelmaps,a,[]),i.default.set(e.labelmapToImage,s,a),e.imageToLabelmaps[a].push(s)},deleteLabelmap(e,t){if(t in e.labelmapToImage){const a=e.labelmapToImage[t];i.default.delete(e.labelmapToImage,t),e.imageToLabelmaps[a].splice(e.imageToLabelmaps[a].indexOf(t),1)}},setLabelmapState(e,t){let{labelmapId:a,labelmapState:s}=t;i.default.set(e.labelmapStates,a,s)},addMeasurementTool(e,t){let{datasetId:a,componentName:s,data:n}=t;a in e.measurements||i.default.set(e.measurements,a,[]),e.measurements[a].push({componentName:s,data:n})},updateMeasurementTool(e,t){let{datasetId:a,index:s,data:n}=t;a in e.measurements&&i.default.set(e.measurements[a][s],"data",n)},removeMeasurementTool(e,t){let{datasetId:a,index:i}=t;a in e.measurements&&e.measurements[a].splice(i,1)},setCroppingState(e,t){let{datasetId:a,planes:i}=t;e.croppingStates[a]=Array.from(i)},rewriteProxyIds(e,t){let{sources:a}=t;e.measurements=(0,W.cO)(e.measurements,a),e.imageToLabelmaps=(0,W.cO)(e.imageToLabelmaps,a),e.labelmapStates=(0,W.cO)(e.labelmapStates,a),e.croppingStates=(0,W.cO)(e.croppingStates,a),Object.keys(e.imageToLabelmaps).forEach((t=>{e.imageToLabelmaps[t]=(0,W.Lg)(e.imageToLabelmaps[t],a)}));const i={};Object.entries(e.labelmapToImage).forEach((e=>{let[t,s]=e;i[a[t]]=a[s]})),e.labelmapToImage=i}},actions:{addLabelmapToImage:(0,W.Gy)("addLabelmapToImage"),deleteLabelmap:(0,W.Gy)("deleteLabelmap"),setLabelmapState:(0,W.Gy)("setLabelmapState"),addMeasurementTool:(0,W.Gy)("addMeasurementTool"),removeMeasurementTool:(0,W.Gy)("removeMeasurementTool"),updateMeasurementTool:(0,W.Gy)("updateMeasurementTool"),setCroppingState:(0,W.Gy)("setCroppingState"),setDistanceUnitSymbol:(0,W.Gy)("setDistanceUnitSymbol"),setDistanceUnitFactor:(0,W.Gy)("setDistanceUnitFactor"),rewriteProxyIds:(0,W.Gy)("rewriteProxyIds"),pxmProxyCreated:{root:!0,handler(e,a){let{state:i}=e,{proxy:s,proxyId:n}=a;if(n in i.croppingStates){const e=i.croppingStates[n],a=(0,W.aX)(t,s);a&&a.setCroppingPlanes(e)}}}}}},va=e=>{let{animationManager:t}=e;return{namespaced:!0,state:{playing:!1,currentFrame:"0.0",frames:[]},mutations:{setCurrentFrame(e,t){e.currentFrame=t},setPlaying(e,t){e.playing=t},setFrames(e,t){e.frames=t}},actions:{initializeAnimations(e){let{commit:a}=e;t.onCurrentFrameChanged((()=>{a("setCurrentFrame",t.getCurrentFrame())})),t.onFramesChanged((()=>{a("setFrames",t.getFrames())})),a("setCurrentFrame",t.getCurrentFrame()),a("setFrames",t.getFrames())},play(e){let{commit:a}=e;a("setPlaying",!0),t.play(),t.onDonePlaying((()=>{a("setPlaying",!1),t.onDonePlaying((()=>{}))}))},pause(e){let{commit:a}=e;a("setPlaying",!1),t.pause()},nextFrame(){t.nextFrame()},previousFrame(){t.previousFrame()},firstFrame(){t.firstFrame()},lastFrame(){t.lastFrame()},setFrameIndex(e,a){t.setFrameIndex(a)}}}};function ma(e){return{}.toString.call(e).slice(8,-1).toLowerCase()}function ga(e,t){const a=Object.keys(t);for(let s=0;s<a.length;++s){const n=a[s];"object"===ma(e[n])&&"object"===ma(t[n])?i.default.set(e,n,ga(e[n],t[n])):i.default.set(e,n,t[n])}return e}function ha(e,t){const a=e.getActiveView(),i=e.getActiveSource(),s=e.getRepresentation(i,a),n=s.getPropertyDomainByName("slice");if(s.isA("vtkSliceRepresentationProxy")&&n){const e=t?n.step:-n.step,a=Math.min(n.max,Math.max(n.min,s.getSlice()+e));s.setSlice(a)}}var ya=function(e){const{girder:t}=e;let{proxyManager:a}=e;a||(a=h.ZP.newInstance({proxyConfiguration:jt.Proxy}));const n=a.createProxy("AnimationManager","AnimationProxyManager"),o=new s.ZP.Store({plugins:[Ut(a)],state:{proxyManager:a,route:"landing",savingStateName:null,loadingState:!1,screenshotDialog:!1,pendingScreenshot:null,panels:{},cameraViewPoints:{},mostRecentViewPoint:null,collapseDatasetPanels:!1,suppressBrowserWarning:!1},getters:{proxyManager:e=>e.proxyManager,cameraViewPoints:e=>e.cameraViewPoints,mostRecentViewPoint:e=>e.mostRecentViewPoint},modules:{files:sa({proxyManager:a,girder:t}),views:ua({proxyManager:a,girder:t}),widgets:pa({proxyManager:a,girder:t}),animations:va({animationManager:n})},mutations:{showLanding(e){e.route="landing"},showApp(e){e.route="app"},savingState(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.savingStateName=t},loadingState(e,t){e.loadingState=t},addPanel:(e,t)=>{let{component:a,priority:s=0}=t;s in e.panels||i.default.set(e.panels,s,[]),e.panels[s].push(a)},openScreenshotDialog(e,t){e.pendingScreenshot=t,e.screenshotDialog=!0},closeScreenshotDialog(e){e.pendingScreenshot=null,e.screenshotDialog=!1},mostRecentViewPoint(e,t){e.mostRecentViewPoint=t},collapseDatasetPanels(e,t){e.collapseDatasetPanels=t},suppressBrowserWarning(e,t){e.suppressBrowserWarning=t}},actions:{addPanel:(0,W.Gy)("addPanel"),closeScreenshotDialog:(0,W.Gy)("closeScreenshotDialog"),collapseDatasetPanels:(0,W.Gy)("collapseDatasetPanels"),suppressBrowserWarning:(0,W.Gy)("suppressBrowserWarning"),saveState(e,t){let{commit:i,state:s}=e;const n=new Date,o=t||`${n.getFullYear()}${n.getMonth()+1}${n.getDate()}_${n.getHours()}-${n.getMinutes()}-${n.getSeconds()}.glance`;i("savingState",o);const r={version:2,activeSourceId:a.getActiveSource()?a.getActiveSource().getProxyId():-1,store:{route:s.route,views:s.views,widgets:s.widgets}},l={recycleViews:!0,datasetHandler(e,t){const a=t.get("name","url","remoteMetaData"),i=e.get("name","url","remoteMetaData"),s=a.url?a:i;return t.getKey("girderProvenance")?{serializedType:"girder",provenance:t.getKey("girderProvenance"),item:t.getKey("girderItem"),meta:t.getKey("meta")}:s.name&&s.url?s:e.getState()}},c=new(C());a.saveState(l,r).then((e=>{c.file("state.json",JSON.stringify(e)),c.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}}).then((e=>{const t=URL.createObjectURL(e),a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("download",o),document.body.appendChild(a),a.click(),document.body.removeChild(a),setTimeout((()=>URL.revokeObjectURL(t)),6e4)})).then((()=>i("savingState",null)))}))},restoreAppState(e,i){let{commit:s,dispatch:n,state:o}=e;s("loadingState",!0);const r=new WeakMap;return n("resetWorkspace"),a.loadState(i,{datasetHandler(e){if(e.vtkClass)return(0,zt.Z)(e);let i=e.name,n=e.url;const o={};if("girder"===e.serializedType){const{itemId:a,itemName:s}=e.item,{apiRoot:r}=e.provenance;i=s,n=`${r}/item/${a}/download`,o.headers={...o.headers||{},"Girder-Token":t.girderRest.token}}let l;if(e.seriesUrls){const t=aa(e.name),a=e.seriesUrls.map((e=>te.downloadDataset(function(e){return e.split("/").pop()?.split("?").shift()}(e),e,o)));l=Promise.all(a).then((e=>te.loadFileSeries(e,t,i)))}else l=te.downloadDataset(i,n,{...o,progressCallback(e){const t=e.lengthComputable?e.loaded/e.total:1/0;s("files/setProgress",{id:i,percentage:t})}}).then((e=>te.loadFiles([e]))).then((e=>e[0]));return l.then((t=>{let{dataset:i,reader:s}=t,n=null;if(s&&s.getOutputData)n=s.getOutputData();else if(i&&i.isA)n=i;else if(s&&s.setProxyManager)return s.setProxyManager(a),null;if(!n)throw new Error("Invalid dataset");return"girder"===e.serializedType?(n=Jt(n,e.meta),r.set(n,{girderProvenance:e.provenance,girderItem:e.item,meta:e.meta})):n.set(e,!0),n})).catch((e=>{const t="Dataset doesn't exist or adblock/firewall prevents access.";if("xhr"in e){const{xhr:a}=e;throw new Error(`${a.statusText} (${a.status}): ${t}`)}throw new Error(`${e.message} (${t})`)}))}}).then((e=>{const{version:t,store:s,$oldToNewIdMapping:l}=e;t>=2?this.replaceState(ga(o,s)):this.replaceState(ga(o,e)),a.getSources().forEach((e=>{const t=e.getDataset();if(r.has(t)){const a=r.get(t);Object.keys(a).forEach((t=>e.setKey(t,a[t])))}})),n("rewriteProxyIds",{appState:i,mapping:l}).then((()=>{a.modified();const i=a.getViews().filter((e=>e.getContainer())),s=i.find((e=>"View3D"===e.getProxyName()))||i[0];if(s&&s.activate(),a.getSources().forEach((e=>(0,W._3)(a,e))),t>=2){const{activeSourceId:t}=e,i=l[t],s=a.getProxyById(i);s&&s.activate()}else{const e=a.getSources()[0];e&&e.activate()}}))})).then((()=>s("loadingState",!1)))},resetWorkspace(){a.getSources().forEach((e=>setTimeout((()=>a.deleteProxy(e)),0))),setTimeout((()=>{a.renderAllViews(),a.resetCameraInAllViews()}),0)},resetActiveCamera(){a.resetCamera()},increaseSlice(e){let{state:t}=e;"app"===t.route&&ha(a,!0)},decreaseSlice(e){let{state:t}=e;"app"===t.route&&ha(a,!1)},takeScreenshot(e){let{commit:t,state:i}=e;const s=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||a.getActiveView(),n=qt.getViewType(s);return s?s.captureImage().then((e=>{t("openScreenshotDialog",{imgSrc:e,viewName:s.getName(),viewData:{background:i.views.backgroundColors[n]}})})):Promise.resolve()},setCameraViewPoints(e,t){let{dispatch:a,state:i}=e;i.cameraViewPoints=t;const s=Object.keys(t);if(0!==s.length){a("changeCameraViewPoint",s[0]);a("views/setInteractionStyle3D","FirstPerson")}},changeCameraViewPoint(e,t){let{commit:a,getters:i,state:s}=e;const n=s.proxyManager.getViews(),o=i.proxyManager,r=i.cameraViewPoints[t]||{},l=r.camera,c=r.show,d=r.hide,u=[];n.filter((e=>"default"===e.getName())).forEach((e=>{const t=e.getCamera().getDistance(),a=[l.focalPoint[0]-l.position[0],l.focalPoint[1]-l.position[1],l.focalPoint[2]-l.position[2]],i=[l.position[0]+a[0]*t,l.position[1]+a[1]*t,l.position[2]+a[2]*t],s=e.moveCamera(i,l.position,l.viewUp,100);u.push(s)})),Promise.all(u).then((()=>{o.getSources().forEach((e=>{const t=e.getName();if(!c.includes(t)&&!d.includes(t))return;const a=c.includes(t),i=o.getRepresentations().filter((t=>t.getInput()===e))[0];i.getVisibility()!==a&&i.setVisibility(a)})),o.renderAllViews()})),a("mostRecentViewPoint",t)},previousViewPoint(e){let{dispatch:t,getters:a}=e;const i=a.mostRecentViewPoint;if(!i)return;const s=Object.keys(a.cameraViewPoints);if(!s.includes(i))return;const n=s.length,o=(s.indexOf(i)+n-1)%n;t("changeCameraViewPoint",s[o])},nextViewPoint(e){let{dispatch:t,getters:a}=e;const i=a.mostRecentViewPoint;if(!i)return;const s=Object.keys(a.cameraViewPoints);if(!s.includes(i))return;const n=(s.indexOf(i)+1)%s.length;t("changeCameraViewPoint",s[n])},rewriteProxyIds(e,t){let{dispatch:a}=e,{appState:i,mapping:s}=t;const n=e=>e.reduce(((e,t)=>({...e,[t.id]:s[t.id]})),{}),o={sources:n(i.sources),views:n(i.views),reps:n(i.representations),all:s};a("widgets/rewriteProxyIds",o),a("views/rewriteProxyIds",o)}}});return a.set({$store:o},!0),o};function fa(e){for(;e.length;)e.pop()()}class ba{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"settings";this.keyPrefix=e,this.storeSettingsMap={},this.store=null,this.storeWatchers=[]}key(e){return this.keyPrefix?`${this.keyPrefix}.${e}`:e}get(e){const t=window.localStorage.getItem(this.key(e));if(null!==t)return JSON.parse(t)}set(e,t){return window.localStorage.setItem(this.key(e),JSON.stringify(t))}syncWithStore(e,t){fa(this.storeWatchers),this.store=e,this.storeSettingsMap=t;const a=Object.keys(t);a.forEach((e=>{const a=this.get(e);if(void 0!==a){const{set:i}=t[e];i(a)}})),this.storeWatchers=a.map((a=>{const{get:i}=t[a];return e.watch(i,(e=>this.set(a,e)))}))}delete(){fa(this.storeWatchers),this.storeSettingsMap={},this.store=null}}class xa extends EventTarget{constructor(){super(),this.targets=[]}addTarget(e){this.targets.push(e),this.dispatchEvent(new CustomEvent("updateTargets"))}removeTarget(e){const t=this.targets.indexOf(e);t>-1&&(this.targets.splice(t,1),this.dispatchEvent(new CustomEvent("updateTargets")))}}var wa={install(e){const t=new xa;e.mixin({beforeCreate(){this.$toolSvgPortal=t}})}};const{getReader:_a,importBase64Dataset:Sa,listReaders:Pa,listSupportedExtensions:ka,loadFiles:Ca,openFiles:Va,registerReader:Ia,registerReadersToProxyManager:Ta}=te;i.default.use(s.ZP),i.default.use(n.Z),i.default.use(Kt),i.default.use(o.ZP),i.default.use(wa);let $a=null;function Da(e){$a=e}function Ma(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a=t||$a||jt.Proxy,s=h.ZP.newInstance({proxyConfiguration:a}),n=new ba,o=ya({proxyManager:s,girder:m}),r=new i.default({el:e,components:{App:ae.Z},store:o,provide:m,vuetify:g.Hl,proxyManager:s,template:"<App />"});function l(e){(e.state||{}).app?o.commit("showApp"):o.commit("showLanding")}return o.watch((e=>e.route),(e=>{if(n.get("noHistory"))return;const t=window.history.state||{};"landing"===e&&t.app&&window.history.back(),"app"!==e||t.app||window.history.pushState({app:!0},"")})),window.history.replaceState({app:!1},""),window.addEventListener("popstate",l),n.set("noHistory",!1),n.syncWithStore(o,{collapseDatasetPanels:{set:e=>o.dispatch("collapseDatasetPanels",e),get:e=>e.collapseDatasetPanels},suppressBrowserWarning:{set:e=>o.dispatch("suppressBrowserWarning",e),get:e=>e.suppressBrowserWarning}}),{proxyManager:s,store:o,processURLArgs(){const e=c.Z.extractURLParameters();Object.keys(e).filter((e=>e.startsWith("setting."))).forEach((t=>{const a=t.substr("setting.".length);n.set(a,e[t])}));const{name:t,url:a}=e;if(t&&a){const e="string"==typeof t?[t]:t,i="string"==typeof a?[a]:a;r.$children[0].autoLoadRemotes("resources from url",i,e)}},addDatasetPanel(e){o.commit("addPanel",{component:e})},showApp(){o.commit("showApp")},getSetting:e=>n.get(e),setSetting:(e,t)=>n.set(e,t)}}},127:function(e,t,a){"use strict";var i=a(612),s=a(9);function n(e,t){for(let a=0;a<t.length;a++){const{name:i}=t[a];if(i&&t[a].domain){const{domain:s}=t[a];e[i]={...s},s.step&&"any"===s.step&&(Number.isInteger(s.min)&&Number.isInteger(s.max)?e[i].step=.01:e[i].step=(s.max-s.min)/500)}else t[a].children&&n(e,t[a].children)}}function o(e,t){const a=[],i=e.$proxyManager.getProxyById(e.sourceId);i[t]&&a.push(i);const s=e.$proxyManager.getRepresentations().filter((t=>t.getInput()===e.source));for(let e=0;e<s.length;e++){const i=s[e];i[t]&&a.push(i)}return a}function r(e){const t={fields:e,domains:{}};for(let a=0;a<e.length;a++){const{name:i,initialValue:s,computed:n}=e[a];n||(t[i]=s)}return t}function l(e){const t={};for(let a=0;a<e.length;a++){const{name:i,computed:s}=e[a];s&&(t[i]=s)}return t}function c(e,t,a){const i=[];for(let s=0;s<t.length;s++){const{name:n}=t[s];i.push(e.$watch(n,(t=>{e.updateProxies(n,t,a&&a[n])})))}return i}t.Z={generateComponent:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{onChange:{},onUpdate:[]};const u=l(t),p={};return Object.keys(u).forEach((e=>{p[`get${s.ZP.capitalize(e)}`]=u[e].get,p[`set${s.ZP.capitalize(e)}`]=u[e].set})),{name:e,props:["sourceId"],data:()=>r(t),computed:{...u,...(0,i.rn)("views",{viewOrder:e=>e.viewOrder}),source(){return this.$proxyManager.getProxyById(this.sourceId)}},watch:{viewOrder(){a&&this.$nextTick(this.$forceUpdate)}},proxyManagerHooks:{onProxyModified(e){e.isA("vtkAbstractRepresentationProxy")&&e.getInput()&&e.getInput()===this.source&&this.updateData()},onProxyCreated(e){const{proxyGroup:t,proxy:a}=e;"Representations"===t&&a.getInput()===this.source&&this.updateAll()}},created(){this.subscriptions=c(this,t,d.onChange)},mounted(){this.updateAll()},beforeDestroy(){for(;this.subscriptions.length;)this.subscriptions.pop()()},methods:{...p,updateAll(){if(this.updateDomains(),this.updateData(),d.onUpdate)for(let e=0;e<d.onUpdate.length;e++)this[d.onUpdate[e]]()},updateDomains(){if(this.inUpdateDomains)return;this.inUpdateDomains=!0;const e=this.$proxyManager.getRepresentations().filter((e=>e.getInput()===this.source)),t=[this.$proxyManager.getProxyById(this.sourceId)].concat(e),a={};for(;t.length;){n(a,t.pop().getReferenceByName("ui"))}this.inUpdateDomains=!1,this.domains=a},updateData(){if(!this.inUpdateData){this.inUpdateData=!0;for(let e=0;e<this.fields.length;e++){const{name:t}=this.fields[e],a=`get${s.ZP.capitalize(t)}`,i=o(this,a);if(i.length){const e=i[0][a]();this[t]!==e&&(this[t]=e)}}this.inUpdateData=!1}},updateProxies(e,t,a){const i=`set${s.ZP.capitalize(e)}`,n=o(this,i);let r=!n.length;for(;n.length;)r=n.pop()[i](t)||r;r&&a&&this[a]&&this[a](e,t)}}}},findProxiesWithMethod:o}},463:function(e,t,a){"use strict";a.d(t,{H_:function(){return i},Bp:function(){return s},Zp:function(){return n},jB:function(){return o},v7:function(){return r},h$:function(){return l},In:function(){return c}});const i="View3D:default",s="default",n={default:"View3D:default",x:"View2D_X:x",y:"View2D_Y:y",z:"View2D_Z:z"},o={s:"Image&nbsp;size:&nbsp;${sliceWidth}&nbsp;x&nbsp;${sliceHeight}",nw:"Origin:&nbsp;${sliceOrigin}<br>Spacing:&nbsp;${sliceSpacing}&nbsp;mm<br>${sliceIndex}&nbsp;of&nbsp;${sliceCount}",se:"WL:&nbsp;${windowLevel}&nbsp;/&nbsp;WW:&nbsp;${windowWidth}"},r={[n.default]:"3D",[n.x]:"Orientation X",[n.y]:"Orientation Y",[n.z]:"Orientation Z"},l={[n.default]:"3D",[n.x]:"Sagittal",[n.y]:"Coronal",[n.z]:"Axial"},c=[1,0,0,0,1,0,0,0,1]},174:function(e,t,a){"use strict";a.d(t,{qV:function(){return s},qg:function(){return n}});var i=a(57);const s="linear-gradient(#333, #999)",n=["#000000","#ffffff",...i.oe,"linear-gradient(#7478BE, #C1C3CA)","linear-gradient(#00002A, #52576E)",s]},378:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var i=a(121),s=JSON.parse('[{"Name":"Medical","Children":[{"Name":"CT","Children":[{"Name":"CT-AAA","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-3024,0,143.556,0,166.222,0.686275,214.389,0.696078,419.736,0.833333,3071,0.803922],"RGBPoints":[-3024,0,0,0,143.556,0.615686,0.356863,0.184314,166.222,0.882353,0.603922,0.290196,214.389,1,1,1,419.736,1,0.937033,0.954531,3071,0.827451,0.658824,1]},{"Name":"CT-AAA2","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-3024,0,129.542,0,145.244,0.166667,157.02,0.5,169.918,0.627451,395.575,0.8125,1578.73,0.8125,3071,0.8125],"RGBPoints":[-3024,0,0,0,129.542,0.54902,0.25098,0.14902,145.244,0.6,0.627451,0.843137,157.02,0.890196,0.47451,0.6,169.918,0.992157,0.870588,0.392157,395.575,1,0.886275,0.658824,1578.73,1,0.829256,0.957922,3071,0.827451,0.658824,1]},{"Name":"CT-Bone","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-3024,0,-16.4458,0,641.385,0.715686,3071,0.705882],"RGBPoints":[-3024,0,0,0,-16.4458,0.729412,0.254902,0.301961,641.385,0.905882,0.815686,0.552941,3071,1,1,1]},{"Name":"CT-Bones","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-1000,0,152.19,0,278.93,0.190476,952,0.2],"RGBPoints":[-1000,0.3,0.3,1,-488,0.3,1,0.3,463.28,1,0,0,659.15,1,0.912535,0.0374849,953,1,0.3,0.3]},{"Name":"CT-Cardiac","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-3024,0,-77.6875,0,94.9518,0.285714,179.052,0.553571,260.439,0.848214,3071,0.875],"RGBPoints":[-3024,0,0,0,-77.6875,0.54902,0.25098,0.14902,94.9518,0.882353,0.603922,0.290196,179.052,1,0.937033,0.954531,260.439,0.615686,0,0,3071,0.827451,0.658824,1]},{"Name":"CT-Cardiac2","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-3024,0,42.8964,0,163.488,0.428571,277.642,0.776786,1587,0.754902,3071,0.754902],"RGBPoints":[-3024,0,0,0,42.8964,0.54902,0.25098,0.14902,163.488,0.917647,0.639216,0.0588235,277.642,1,0.878431,0.623529,1587,1,1,1,3071,0.827451,0.658824,1]},{"Name":"CT-Cardiac3","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-3024,0,-86.9767,0,45.3791,0.169643,139.919,0.589286,347.907,0.607143,1224.16,0.607143,3071,0.616071],"RGBPoints":[-3024,0,0,0,-86.9767,0,0.25098,1,45.3791,1,0,0,139.919,1,0.894893,0.894893,347.907,1,1,0.25098,1224.16,1,1,1,3071,0.827451,0.658824,1]},{"Name":"CT-Chest-Contrast-Enhanced","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-3024,0,67.0106,0,251.105,0.446429,439.291,0.625,3071,0.616071],"RGBPoints":[-3024,0,0,0,67.0106,0.54902,0.25098,0.14902,251.105,0.882353,0.603922,0.290196,439.291,1,0.937033,0.954531,3071,0.827451,0.658824,1]},{"Name":"CT-Chest-Vessels","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-3024,0,-1278.35,0,22.8277,0.428571,439.291,0.625,3071,0.616071],"RGBPoints":[-3024,0,0,0,-1278.35,0.54902,0.25098,0.14902,22.8277,0.882353,0.603922,0.290196,439.291,1,0.937033,0.954531,3071,0.827451,0.658824,1]},{"Name":"CT-Coronary-Arteries","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-2048,0,136.47,0,159.215,0.258929,318.43,0.571429,478.693,0.776786,3661,1],"RGBPoints":[-2048,0,0,0,136.47,0,0,0,159.215,0.159804,0.159804,0.159804,318.43,0.764706,0.764706,0.764706,478.693,1,1,1,3661,1,1,1]},{"Name":"CT-Coronary-Arteries-2","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-2048,0,142.677,0,145.016,0.116071,192.174,0.5625,217.24,0.776786,384.347,0.830357,3661,0.830357],"RGBPoints":[-2048,0,0,0,142.677,0,0,0,145.016,0.615686,0,0.0156863,192.174,0.909804,0.454902,0,217.24,0.972549,0.807843,0.611765,384.347,0.909804,0.909804,1,3661,1,1,1]},{"Name":"CT-Coronary-Arteries-3","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-2048,0,128.643,0,129.982,0.0982143,173.636,0.669643,255.884,0.857143,584.878,0.866071,3661,1],"RGBPoints":[-2048,0,0,0,128.643,0,0,0,129.982,0.615686,0,0.0156863,173.636,0.909804,0.454902,0,255.884,0.886275,0.886275,0.886275,584.878,0.968627,0.968627,0.968627,3661,1,1,1]},{"Name":"CT-Cropped-Volume-Bone","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-2048,0,-451,0,-450,1,1050,1,3661,1],"RGBPoints":[-2048,0,0,0,-451,0,0,0,-450,0.0556356,0.0556356,0.0556356,1050,1,1,1,3661,1,1,1]},{"Name":"CT-Fat","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-1000,0,-100,0,-99,0.15,-60,0.15,-59,0,101.2,0,952,0],"RGBPoints":[-1000,0.3,0.3,1,-497.5,0.3,1,0.3,-99,0,0,1,-76.946,0,1,0,-65.481,0.835431,0.888889,0.0165387,83.89,1,0,0,463.28,1,0,0,659.15,1,0.912535,0.0374849,2952,1,0.300267,0.299886]},{"Name":"CT-Liver-Vasculature","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-2048,0,149.113,0,157.884,0.482143,339.96,0.660714,388.526,0.830357,1197.95,0.839286,3661,0.848214],"RGBPoints":[-2048,0,0,0,149.113,0,0,0,157.884,0.501961,0.25098,0,339.96,0.695386,0.59603,0.36886,388.526,0.854902,0.85098,0.827451,1197.95,1,1,1,3661,1,1,1]},{"Name":"CT-Lung","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-1000,0,-600,0,-599,0.15,-400,0.15,-399,0,2952,0],"RGBPoints":[-1000,0.3,0.3,1,-600,0,0,1,-530,0.134704,0.781726,0.0724558,-460,0.929244,1,0.109473,-400,0.888889,0.254949,0.0240258,2952,1,0.3,0.3]},{"Name":"CT-MIP","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-3024,0,-637.62,0,700,1,3071,1],"RGBPoints":[-3024,0,0,0,-637.62,1,1,1,700,1,1,1,3071,1,1,1]},{"Name":"CT-Muscle","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-3024,0,-155.407,0,217.641,0.676471,419.736,0.833333,3071,0.803922],"RGBPoints":[-3024,0,0,0,-155.407,0.54902,0.25098,0.14902,217.641,0.882353,0.603922,0.290196,419.736,1,0.937033,0.954531,3071,0.827451,0.658824,1]},{"Name":"CT-Pulmonary-Arteries","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-2048,0,-568.625,0,-364.081,0.0714286,-244.813,0.401786,18.2775,0.607143,447.798,0.830357,3592.73,0.839286],"RGBPoints":[-2048,0,0,0,-568.625,0,0,0,-364.081,0.396078,0.301961,0.180392,-244.813,0.611765,0.352941,0.0705882,18.2775,0.843137,0.0156863,0.156863,447.798,0.752941,0.752941,0.752941,3592.73,1,1,1]},{"Name":"CT-Soft-Tissue","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-2048,0,-167.01,0,-160,1,240,1,3661,1],"RGBPoints":[-2048,0,0,0,-167.01,0,0,0,-160,0.0556356,0.0556356,0.0556356,240,1,1,1,3661,1,1,1]}]},{"Name":"MR","Children":[{"Name":"MR-Angio","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-2048,0,151.354,0,158.279,0.4375,190.112,0.580357,200.873,0.732143,3661,0.741071],"RGBPoints":[-2048,0,0,0,151.354,0,0,0,158.279,0.74902,0.376471,0,190.112,1,0.866667,0.733333,200.873,0.937255,0.937255,0.937255,3661,1,1,1]},{"Name":"MR-Default","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[0,0,20,0,40,0.15,120,0.3,220,0.375,1024,0.5],"RGBPoints":[0,0,0,0,20,0.168627,0,0,40,0.403922,0.145098,0.0784314,120,0.780392,0.607843,0.380392,220,0.847059,0.835294,0.788235,1024,1,1,1]},{"Name":"MR-MIP","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[0,0,98.3725,0,416.637,1,2800,1],"RGBPoints":[0,1,1,1,98.3725,1,1,1,416.637,1,1,1,2800,1,1,1]},{"Name":"MR-T2-Brain","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[0,0,36.05,0,218.302,0.171429,412.406,1,641,1],"RGBPoints":[0,0,0,0,98.7223,0.956863,0.839216,0.192157,412.406,0,0.592157,0.807843,641,1,1,1]}]},{"Name":"DTI-FA-Brain","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[0,0,0,0,0.3501,0.0158,0.49379,0.7619,0.6419,1,0.992,1,0.995,0,0.995,0],"RGBPoints":[0,1,0,0,0,1,0,0,0.24974,0.4941,1,0,0.49949,0,0.9882,1,0.7492,0.51764,0,1,0.995,1,0,0,0.995,1,0,0]}]}]');const n={...i.Z.getPresetByName("Cool to Warm"),Name:"Default (Cool to Warm)"};function o(e,t){const a=e.Name.toLowerCase(),i=t.Name.toLowerCase();return a>i?1:-(a<i)}function r(e,t){const a=t.map((e=>i.Z.getPresetByName(e)));return a.sort(o),{Name:e,Children:a}}!function e(t){t.forEach((t=>{t.Children?e(t.Children):i.Z.addPreset(t)}))}(s.concat(n));var l=[].concat(n,s,r("ParaView",["2hot","Asymmtrical Earth Tones (6_21b)","Cold and Hot","Cool to Warm (Extended)","Cool to Warm","coolwarm","Grayscale","Linear Blue (8_31f)","Linear YGB 1211g","Rainbow Blended Black","Rainbow Blended Grey","Rainbow Blended White","Rainbow Desaturated","rainbow","Warm to Cool (Extended)","Warm to Cool"]),r("ERDC",["erdc_blue2cyan_BW","erdc_blue2gold","erdc_blue2gold_BW","erdc_blue2green_BW","erdc_blue2green_muted","erdc_blue2yellow","erdc_blue_BW","erdc_brown_BW","erdc_cyan2orange","erdc_divHi_purpleGreen","erdc_divHi_purpleGreen_dim","erdc_divLow_icePeach","erdc_divLow_purpleGreen","erdc_gold_BW","erdc_green2yellow_BW","erdc_iceFire_H","erdc_iceFire_L","erdc_magenta_BW","erdc_marine2gold_BW","erdc_orange_BW","erdc_pbj_lin","erdc_purple2green","erdc_purple2green_dark","erdc_purple2pink_BW","erdc_purple_BW","erdc_rainbow_bright","erdc_rainbow_dark","erdc_red2purple_BW","erdc_red2yellow_BW","erdc_red_BW","erdc_sapphire2gold_BW"]),r("Others",["Black, Blue and White","Black, Orange and White","Black-Body Radiation","blot","Blue to Red Rainbow","Blue to Yellow","BLUE-WHITE","blue2cyan","blue2yellow","Blues","bone_Matlab","BrBG","BrOrYl","BuGn","BuGnYl","BuPu","BuRd","CIELab Blue to Red","CIELab_blue2red","copper_Matlab","GBBr","gist_earth","GnBu","GnBuPu","GnRP","GnYlRd","gray_Matlab","Green-Blue Asymmetric Divergent (62Blbc)","GREEN-WHITE_LINEAR","Greens","GYPi","GyRd","Haze","Haze_cyan","Haze_green","Haze_lime","heated_object","hsv","hue_L60","Inferno (matplotlib)","jet","magenta","Magma (matplotlib)","Muted Blue-Green","nic_CubicL","nic_CubicYF","nic_Edge","Oranges","OrPu","pink_Matlab","PiYG","Plasma (matplotlib)","PRGn","PuBu","PuOr","PuRd","Purples","RdOr","RdOrYl","RdPu","Red to Blue Rainbow","Spectral_lowBlue","Viridis (matplotlib)","X Ray","Yellow 15"]))},462:function(e,t,a){"use strict";a.d(t,{u3:function(){return i}});const i={md:768}},57:function(e,t,a){"use strict";a.d(t,{oe:function(){return i},wY:function(){return s}});const i=["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],s=["#ffee00","#bbbe64","#f3b700","#91f5ad","#fdca40","#f79824","#e57c04"]},30:function(e,t,a){"use strict";a.d(t,{y5:function(){return s},Gy:function(){return n},cO:function(){return o},JL:function(){return r},Lg:function(){return l},_3:function(){return c},aX:function(){return d},XC:function(){return p}});var i=a(575);function s(){let e=null;const t={sub(a){t.unsub(),e=a},unsub(){null!==e&&(e.unsubscribe(),e=null)}};return t}function n(e){return(t,a)=>{let{commit:i}=t;return i(e,a)}}function o(e,t){const a={};return Object.keys(e).forEach((i=>{let s=i;i in t&&(s=t[i]),a[s]=e[i]})),a}function r(e,t){const a={};return Object.entries(e).forEach((e=>{let[i,s]=e,n=s;s in t&&(n=t[s]),a[i]=n})),a}function l(e,t){return e.map((e=>e in t?t[e]:e))}function c(e,t){const a=e.getViews().filter((e=>e.isA("vtkView2DProxy"))),i=a.map((e=>e.getReferenceByName("sliceRepresentation")));e.createRepresentationInAllViews(t),"LabelMap"===t.getProxyName()&&a.forEach(((e,t)=>e.bindRepresentationToManipulator(i[t])))}function d(e,t){const a=e.getViews().find((e=>"View3D"===e.getProxyName()));if(!a)throw new Error("Cannot find 3D view!");const i=e.getRepresentation(t,a);if(!i||!i.getCropFilter)throw new Error("Cannot find the volume rep with a crop filter!");return i.getCropFilter()}const u={default:{forwardAxis:1,forwardOrientation:1,upwardAxis:2,upwardOrientation:1},x:{forwardAxis:0,forwardOrientation:1,upwardAxis:2,upwardOrientation:1},y:{forwardAxis:1,forwardOrientation:1,upwardAxis:2,upwardOrientation:1},z:{forwardAxis:2,forwardOrientation:1,upwardAxis:1,upwardOrientation:-1}};function p(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const{forwardAxis:n,forwardOrientation:o,upwardAxis:r,upwardOrientation:l}=u[a],c=i.bA(Array(3),t.slice(3*n,3*n+3),o),d=i.bA(Array(3),t.slice(3*r,3*r+3),l),p=e.getCamera(),v=p.getPosition(),m=p.getViewUp(),g=p.getFocalPoint(),h=i.IH(Array(3),g,c);p.setPosition(...h),p.setViewUp(...d),e.resetCamera();const y=p.getFocalPoint(),f=p.getPosition(),b=p.getViewUp();return p.setFocalPoint(...g),p.setPosition(...v),p.setViewUp(...m),e.moveCamera(y,f,b,s)}},79:function(e,t,a){"use strict";var i=a(73),s=a(15),n=a(4);const{vtkErrorMacro:o}=i.ZP,r=1,l=2,c=3,d=4,u=5,p=6,v=7,m=8,g=9,h=10,y=11,f=12,b=13,x=14,w=15;const _=new Map([["Uint8Array","uint8_t"],["Int8Array","int8_t"],["Uint16Array","uint16_t"],["Int16Array","int16_t"],["Uint32Array","uint32_t"],["Int32Array","int32_t"],["Float32Array","float"],["Float64Array","double"]]);t.Z={convertItkToVtkImage:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a={origin:[0,0,0],spacing:[1,1,1]},i=[1,1,1],_=[1,0,0,0,1,0,0,0,1];for(let t=0;t<e.imageType.dimension;++t){a.origin[t]=e.origin[t],a.spacing[t]=e.spacing[t],i[t]=e.size[t];for(let a=0;a<e.imageType.dimension;++a)_[a+3*t]=e.direction.data[t+a*e.imageType.dimension]}const S=s.ZP.newInstance(a),P=n.ZP.newInstance({name:t.scalarArrayName||"Scalars",values:e.data,numberOfComponents:e.imageType.components});switch(S.setDirection(_),S.setDimensions(...i),S.getPointData().setScalars(P),e.imageType.pixelType){case r:case l:case c:case d:case p:case h:case y:case f:case b:case x:case w:break;case u:case v:3===e.imageType.dimension&&3===e.imageType.components&&S.getPointData().setVectors(P);break;case m:case g:3===e.imageType.dimension&&6===e.imageType.components&&S.getPointData().setTensors(P);break;default:return o(`Cannot handle unexpected ITK.js pixel type ${e.imageType.pixelType}`),null}return S},convertVtkToItkImage:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a={imageType:{dimension:3,pixelType:r,componentType:"",components:1},name:"name",origin:e.getOrigin(),spacing:e.getSpacing(),direction:{data:[1,0,0,0,1,0,0,0,1]},size:e.getDimensions()},i=e.getDirection(),s=a.size.length;a.imageType.dimension=s,a.direction.rows=s,a.direction.columns=s;for(let e=0;e<s;++e)for(let t=0;t<s;++t)a.direction.data[e+t*s]=i[t+e*s];const n=e.getPointData();let o;return null!==n.getTensors()?(a.imageType.pixelType=g,o=n.getTensors()):null!=n.getVectors()?(a.imageType.pixelType=u,o=n.getVectors()):o=n.getScalars(),a.imageType.componentType=_.get(o.getDataType()),a.data=t?o.getData().slice(0):o.getData(),a}}},381:function(e,t,a){"use strict";var i=a(9),s=a(15);const{vtkWarningMacro:n}=i.ZP;function o(e,t){t.classHierarchy.push("vtkLabelMap"),e.setLabelColor=(a,i)=>{Number.isNaN(Number(a))?n("Provided label is not a number"):(t.colorMap[a]=i.slice(),void 0===t.colorMap[a][3]&&(t.colorMap[a][3]=255),e.modified())},e.removeLabel=a=>{Number.isNaN(Number(a))?n("Provided label is not a number"):(delete t.colorMap[a],e.modified())},null===t.colorMap&&(t.colorMap={0:[0,0,0,0],1:[0,0,0,255]})}const r={colorMap:null};function l(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,r,a),s.ZP.extend(e,t,a),i.ZP.setGet(e,t,["colorMap"]),o(e,t)}const c=i.ZP.newInstance(l,"vtkLabelMap");t.ZP={newInstance:c,extend:l}},328:function(e,t,a){var i=a(489),s=a(481);void 0===s.Glance&&(s.Glance=i),e.exports=i},524:function(e,t,a){var i={"./af":180,"./af.js":180,"./ar":181,"./ar-dz":182,"./ar-dz.js":182,"./ar-kw":183,"./ar-kw.js":183,"./ar-ly":184,"./ar-ly.js":184,"./ar-ma":185,"./ar-ma.js":185,"./ar-sa":186,"./ar-sa.js":186,"./ar-tn":187,"./ar-tn.js":187,"./ar.js":181,"./az":188,"./az.js":188,"./be":189,"./be.js":189,"./bg":190,"./bg.js":190,"./bm":191,"./bm.js":191,"./bn":192,"./bn-bd":193,"./bn-bd.js":193,"./bn.js":192,"./bo":194,"./bo.js":194,"./br":195,"./br.js":195,"./bs":196,"./bs.js":196,"./ca":197,"./ca.js":197,"./cs":198,"./cs.js":198,"./cv":199,"./cv.js":199,"./cy":200,"./cy.js":200,"./da":201,"./da.js":201,"./de":202,"./de-at":203,"./de-at.js":203,"./de-ch":204,"./de-ch.js":204,"./de.js":202,"./dv":205,"./dv.js":205,"./el":206,"./el.js":206,"./en-au":207,"./en-au.js":207,"./en-ca":208,"./en-ca.js":208,"./en-gb":209,"./en-gb.js":209,"./en-ie":210,"./en-ie.js":210,"./en-il":211,"./en-il.js":211,"./en-in":212,"./en-in.js":212,"./en-nz":213,"./en-nz.js":213,"./en-sg":214,"./en-sg.js":214,"./eo":215,"./eo.js":215,"./es":216,"./es-do":217,"./es-do.js":217,"./es-mx":218,"./es-mx.js":218,"./es-us":219,"./es-us.js":219,"./es.js":216,"./et":220,"./et.js":220,"./eu":221,"./eu.js":221,"./fa":222,"./fa.js":222,"./fi":223,"./fi.js":223,"./fil":224,"./fil.js":224,"./fo":225,"./fo.js":225,"./fr":226,"./fr-ca":227,"./fr-ca.js":227,"./fr-ch":228,"./fr-ch.js":228,"./fr.js":226,"./fy":229,"./fy.js":229,"./ga":230,"./ga.js":230,"./gd":231,"./gd.js":231,"./gl":232,"./gl.js":232,"./gom-deva":233,"./gom-deva.js":233,"./gom-latn":234,"./gom-latn.js":234,"./gu":235,"./gu.js":235,"./he":236,"./he.js":236,"./hi":237,"./hi.js":237,"./hr":238,"./hr.js":238,"./hu":239,"./hu.js":239,"./hy-am":240,"./hy-am.js":240,"./id":241,"./id.js":241,"./is":242,"./is.js":242,"./it":243,"./it-ch":244,"./it-ch.js":244,"./it.js":243,"./ja":245,"./ja.js":245,"./jv":246,"./jv.js":246,"./ka":247,"./ka.js":247,"./kk":248,"./kk.js":248,"./km":249,"./km.js":249,"./kn":250,"./kn.js":250,"./ko":251,"./ko.js":251,"./ku":252,"./ku.js":252,"./ky":253,"./ky.js":253,"./lb":254,"./lb.js":254,"./lo":255,"./lo.js":255,"./lt":256,"./lt.js":256,"./lv":257,"./lv.js":257,"./me":258,"./me.js":258,"./mi":259,"./mi.js":259,"./mk":260,"./mk.js":260,"./ml":261,"./ml.js":261,"./mn":262,"./mn.js":262,"./mr":263,"./mr.js":263,"./ms":264,"./ms-my":265,"./ms-my.js":265,"./ms.js":264,"./mt":266,"./mt.js":266,"./my":267,"./my.js":267,"./nb":268,"./nb.js":268,"./ne":269,"./ne.js":269,"./nl":270,"./nl-be":271,"./nl-be.js":271,"./nl.js":270,"./nn":272,"./nn.js":272,"./oc-lnc":273,"./oc-lnc.js":273,"./pa-in":274,"./pa-in.js":274,"./pl":275,"./pl.js":275,"./pt":276,"./pt-br":277,"./pt-br.js":277,"./pt.js":276,"./ro":278,"./ro.js":278,"./ru":279,"./ru.js":279,"./sd":280,"./sd.js":280,"./se":281,"./se.js":281,"./si":282,"./si.js":282,"./sk":283,"./sk.js":283,"./sl":284,"./sl.js":284,"./sq":285,"./sq.js":285,"./sr":286,"./sr-cyrl":287,"./sr-cyrl.js":287,"./sr.js":286,"./ss":288,"./ss.js":288,"./sv":289,"./sv.js":289,"./sw":290,"./sw.js":290,"./ta":291,"./ta.js":291,"./te":292,"./te.js":292,"./tet":293,"./tet.js":293,"./tg":294,"./tg.js":294,"./th":295,"./th.js":295,"./tk":296,"./tk.js":296,"./tl-ph":297,"./tl-ph.js":297,"./tlh":298,"./tlh.js":298,"./tr":299,"./tr.js":299,"./tzl":300,"./tzl.js":300,"./tzm":301,"./tzm-latn":302,"./tzm-latn.js":302,"./tzm.js":301,"./ug-cn":303,"./ug-cn.js":303,"./uk":304,"./uk.js":304,"./ur":305,"./ur.js":305,"./uz":306,"./uz-latn":307,"./uz-latn.js":307,"./uz.js":306,"./vi":308,"./vi.js":308,"./x-pseudo":309,"./x-pseudo.js":309,"./yo":310,"./yo.js":310,"./zh-cn":311,"./zh-cn.js":311,"./zh-hk":312,"./zh-hk.js":312,"./zh-mo":313,"./zh-mo.js":313,"./zh-tw":314,"./zh-tw.js":314};function s(e){var t=n(e);return a(t)}function n(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=n,e.exports=s,s.id=524},39:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var i={block:"Datasets-block-MOv47",blockTitle:"Datasets-blockTitle-hRnLc",blockContent:"Datasets-blockContent-a3h1_",blockRow:"Datasets-blockRow-lFOcN",slimInput:"Datasets-slimInput-Cnehi",canSelect:"Datasets-canSelect-w1m5T",clickable:"Datasets-clickable-JOYIZ",smallLabel:"Datasets-smallLabel-_8o5q",active:"Datasets-active-zv1WS",inactive:"Datasets-inactive-twtbQ",matrix:"Datasets-matrix-_nvw3",disable:"Datasets-disable-wMFzA",lutImage:"Datasets-lutImage-h8bWl",dropdownMenu:"Datasets-dropdownMenu-Z0GS3",button:"Datasets-button-W4Ok7",click:"Datasets-click-URBWc",negativeTopSpacing:"Datasets-negativeTopSpacing-HrNz2"}},75:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var i={datasetPanel:"Datasets-datasetPanel-B9jFW",subpanel:"Datasets-subpanel-RQd0h",panelContent:"Datasets-panelContent-kpRWg",panelHeader:"Datasets-panelHeader-uNZ70",headerMenuButton:"Datasets-headerMenuButton-_t8U7",subpanelHeader:"Datasets-subpanelHeader-_vvrH"}},380:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var i={wrapper:"TreeView-wrapper-Uw6mP",node:"TreeView-node-gbM0d",arrow:"TreeView-arrow-KW7L0",openArrow:"TreeView-openArrow-ezZCc",header:"TreeView-header-KxYvL",expander:"TreeView-expander-SVvAO",name:"TreeView-name-_uKWF"}},151:function(e,t,a){"use strict";a.d(t,{Z:function(){return B}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.available?a("div",[a("v-card",{class:e.$style.block,attrs:{flat:""}},[a("v-container",{staticClass:"pa-0",attrs:{fluid:"","grid-list-xs":""}},[a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},["geometry"===e.available?[a("v-flex",{attrs:{xs3:""}},[a("span",{staticClass:"body-2"},[e._v("Color By:")])]),e._v(" "),a("v-flex",{attrs:{xs9:""}},[a("v-select",{staticClass:"pv-no-select",class:e.$style.slimInput,attrs:{dense:"",flat:"","hide-details":"",items:e.arrays,value:e.arraySelectValue},on:{change:e.setColorBy}})],1),e._v(" "),"solid"===e.colorBy?a("v-flex",{attrs:{xs12:""}},[a("palette-picker",{staticClass:"pt-1 pb-1",attrs:{palette:e.palette,size:24},model:{value:e.solidColor,callback:function(t){e.solidColor=t},expression:"solidColor"}})],1):e._e()]:e._e(),e._v(" "),"solid"!==e.colorBy?[a("v-flex",{staticClass:"pt-2",attrs:{xs12:""}},[a("v-menu",{attrs:{"close-on-content-click":!1,"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("div",e._g({class:e.$style.clickable},i),[a("span",{staticClass:"body-2"},[e._v(e._s(e.presetName))]),e._v(" "),a("img",{class:e.$style.lutImage,attrs:{src:e.lutImage}})])]}}],null,!1,2069699272),model:{value:e.presetMenu,callback:function(t){e.presetMenu=t},expression:"presetMenu"}},[e._v(" "),e.presetMenu?a("tree-view",{class:e.$style.dropdownMenu,attrs:{tree:e.presets,labelKey:"Name",childrenKey:"Children"},on:{input:e.onChangePreset}}):e._e()],1)],1),e._v(" "),a("v-flex",{staticClass:"pb-4",class:e.$style.negativeTopSpacing,attrs:{xs5:""}},[a("v-text-field",{class:e.$style.negativeTopSpacing,attrs:{label:"Min",step:"any",disabled:"geometry"!==e.available,"hide-details":"",value:e.dataRange[0]},on:{change:function(t){return e.$proxyManager.renderAllViews()},input:function(t){return e.setDataRangeIndex(0,t)}}})],1),e._v(" "),a("v-flex",{staticClass:"text-center pb-4",class:e.$style.negativeTopSpacing,attrs:{xs2:""}},["geometry"===e.available?a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({class:e.$style.negativeTopSpacing,attrs:{icon:"",small:""},on:{click:e.resetDataRange}},i),[a("v-icon",[e._v("mdi-arrow-expand-horizontal")])],1)]}}],null,!1,2807797372)},[e._v("\n              Reset range\n            ")]):a("v-spacer")],1),e._v(" "),a("v-flex",{staticClass:"pb-4",class:e.$style.negativeTopSpacing,attrs:{xs5:""}},[a("v-text-field",{class:e.$style.negativeTopSpacing,attrs:{label:"Max",step:"any",disabled:"geometry"!==e.available,reverse:"","hide-details":"",value:e.dataRange[1]},on:{change:function(t){return e.$proxyManager.renderAllViews()},input:function(t){return e.setDataRangeIndex(1,t)}}})],1)]:e._e(),e._v(" "),"volume"===e.available?[e.piecewiseFunction&&!e.hasPresetOpacity?a("v-flex",{attrs:{xs12:""},on:{touchstart:function(e){e.stopPropagation()}}},[a("piecewise-function-editor",{attrs:{piecewiseFunction:e.piecewiseFunction,source:e.source,proxyManager:e.$proxyManager}})],1):e._e(),e._v(" "),e.hasPresetOpacity?a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs3:""}},[a("span",{class:e.$style.smallLabel},[e._v("Shift")])]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{min:e.shiftRange[0],max:e.shiftRange[1],step:"0","hide-details":""},model:{value:e.shift,callback:function(t){e.shift=t},expression:"shift"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{type:"number",min:e.shiftRange[0],max:e.shiftRange[1],step:"1","hide-details":""},model:{value:e.shift,callback:function(t){e.shift=t},expression:"shift"}})],1)],1)],1):e._e(),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-checkbox",{class:e.$style.slimInput,attrs:{"hide-details":"",label:"Apply color to slices"},on:{change:e.applyColorToSlices},model:{value:e.colorToSlices,callback:function(t){e.colorToSlices=t},expression:"colorToSlices"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-checkbox",{class:e.$style.slimInput,attrs:{"hide-details":"",label:"Apply opacity to slices"},on:{change:e.applyOpacityToSlices},model:{value:e.opacityToSlices,callback:function(t){e.opacityToSlices=t},expression:"opacityToSlices"}})],1)]:e._e(),e._v(" "),"geometry"===e.available&&e.colorByName?a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs2:""}},[a("v-icon",{class:e.$style.click,on:{click:function(t){t.stopPropagation(),e.interpolateScalarsBeforeMapping=!e.interpolateScalarsBeforeMapping}}},[e._v("\n                "+e._s(e.interpolateScalarsBeforeMapping?"mdi-checkbox-marked":"mdi-checkbox-blank-outline")+"\n              ")])],1),e._v(" "),a("v-flex",{attrs:{xs10:""}},[a("span",{staticClass:"body-2"},[e._v("Interpolate scalar before mapping")])])],1)],1):e._e()],2)],1)],1)],1):e._e()};i._withStripped=!0;var s=a(9),n=a(379),o=a(121),r=a(116),l=a(152),c=a(38),d=a(153),u=a(57),p=a(378);const{Mode:v}=r.Z,m={text:"Solid color",value:"solid"},g=document.createElement("canvas");g.setAttribute("width",300),g.setAttribute("height",1);var h={name:"ColorBy",props:["sourceId"],components:{PalettePicker:c.Z,PiecewiseFunctionEditor:l.Z,TreeView:d.Z},data:()=>({palette:u.oe.concat("#ffffff","#000000"),available:"",colorBy:"solid",arrays:[m],piecewiseFunction:null,solidColor:"#ffffff",lutImage:"",presetName:"",presets:p.Z,presetMenu:!1,shift:0,dataRange:[0,0],interpolateScalarsBeforeMapping:!0,colorToSlices:!1,opacityToSlices:!1,originalLUTRanges:{}}),computed:{source(){return this.$proxyManager.getProxyById(this.sourceId)},colorByName(){return Array.isArray(this.colorBy)?this.colorBy[0]:null},colorByLocation(){return Array.isArray(this.colorBy)?this.colorBy[1]:null},hasPresetOpacity(){const e=o.Z.getPresetByName(this.presetName);return Boolean(e&&e.OpacityPoints)},shiftRange(){const e=o.Z.getPresetByName(this.presetName);if(e){let t=1/0,a=-1/0;for(let i=0;i<e.RGBPoints.length;i+=4)t=Math.min(t,e.RGBPoints[i]),a=Math.max(a,e.RGBPoints[i]);const i=(a-t)/2;return[-i,i]}return[0,0]},origDataRange(){return this.originalLUTRanges[this.colorByName]??[]},arraySelectValue(){return this.arrays.find((e=>Array.isArray(e.value)?e.value[0]===this.colorByName&&e.value[1]===this.colorByLocation:e.value===this.colorBy))}},watch:{interpolateScalarsBeforeMapping(e){this.updateRepProperty("interpolateScalarsBeforeMapping",e)},colorBy(){if("geometry"===this.available){const e=this.$proxyManager.getRepresentations().filter((e=>e.getInput()===this.source));if(e.forEach((e=>e.setColorBy(this.colorByName,this.colorByLocation))),this.colorByName){const e=this.$proxyManager.getLookupTable(this.colorByName);this.setDataRange(e.getDataRange())}this.interpolateScalarsBeforeMapping=e.reduce(((e,t)=>e||t.getInterpolateScalarsBeforeMapping()),!1),this.$proxyManager.renderAllViews(),this.setPreset()}this.colorByName&&this.updateLookupTableImage()},solidColor(e){const t=n.ZP.hex2float(e);this.updateRepProperty("color",...t)},presetName(){this.renderPreset()},shift(){this.renderPreset()},hasPresetOpacity(e){const t=this.colorByName,a=this.$proxyManager.getPiecewiseFunction(t);e?a.setMode(v.Points):a.setMode(v.Gaussians)},dataRange(){this.applyColorMap()}},proxyManagerHooks:{onProxyRegistrationChange(e){let{proxyGroup:t}=e;"Representations"===t&&this.update()}},mounted(){document.addEventListener("keyup",this.onEsc),this.$nextTick(this.update)},beforeDestroy(){document.removeEventListener("keyup",this.onEsc)},methods:{updateRepProperty(e){const t=`set${s.ZP.capitalize(e)}`,a=this.$proxyManager.getRepresentations().filter((e=>e.getInput()===this.source));for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];for(let e=0;e<a.length;e++)a[e][t]&&a[e][t](...n);this.$proxyManager.renderAllViews()},onChangePreset(e){e&&(this.presetName=e.Name,this.hasPresetOpacity&&(this.shift=0)),this.presetMenu=!1},onEsc(e){27===e.keyCode&&(this.presetMenu=!1)},renderPreset(){this.applyColorMap(),this.applyOpacity(),this.updateLookupTableImage(),this.$proxyManager.renderAllViews()},applyOpacity(){const e=this.colorByName,t=this.$proxyManager.getPiecewiseFunction(e),a=o.Z.getPresetByName(this.presetName);if(this.hasPresetOpacity&&a&&a.OpacityPoints){const e=[];for(let t=0;t<a.OpacityPoints.length;t+=2)e.push([a.OpacityPoints[t],a.OpacityPoints[t+1]]);let[i,s]=this.shiftRange;const n=s-i,o=e.map((e=>{let[t,a]=e;return[(t-i)/n,a]}));t.setPoints(o),i+=this.shift,s+=this.shift,t.setDataRange(i,s)}else t.setDataRange(...this.dataRange)},applyColorMap(){const e=this.colorByName,t=this.$proxyManager.getLookupTable(e);if(t.setPresetName(this.presetName),this.hasPresetOpacity){let[e,a]=this.shiftRange;e+=this.shift,a+=this.shift,t.setDataRange(e,a)}else t.setDataRange(...this.dataRange)},updateLookupTableImage(){const e=this.colorByName,t=this.$proxyManager.getLookupTable(e);this.lutImage=function(e,t,a,i){g.setAttribute("width",i);const s=g.getContext("2d"),n=e.getUint8Table(t,a,i,!0),o=s.getImageData(0,0,i,1);return o.data.set(n),s.putImageData(o,0,0),g.toDataURL("image/jpg")}(t.getLookupTable(),...t.getDataRange(),256),this.piecewiseFunction=this.$proxyManager.getPiecewiseFunction(e)},setPreset(){if(this.colorByName){const e=this.$proxyManager.getLookupTable(this.colorByName);if(this.presetName=e.getPresetName(),this.hasPresetOpacity){const e=this.$proxyManager.getPiecewiseFunction(this.colorByName).getDataRange();this.shift=e[0]-this.shiftRange[0]}}},update(){const e=this.$proxyManager.getRepresentations().filter((e=>e.getInput()===this.source));if(e.length){const t=e.find((e=>"Geometry"===e.getProxyName())),a=e.find((e=>"Volume"===e.getProxyName())),i=e.find((e=>"SliceX"===e.getProxyName()));if(t)this.available="geometry";else{if(!a)return void(this.available="");this.available="volume"}const s=t||a,o=s.getReferenceByName("ui").find((e=>"colorBy"===e.name));o&&(this.arrays=function(e){const t=[];arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&t.push(m);for(let a=0;a<e.length;a++){const i=e[a];t.push({text:i.name,value:[i.name,i.location]})}return t}(o.domain.arrays,"geometry"===this.available));const r=s.getColorBy(),l=s.getInputDataSet(),c=l.getPointData().getScalars(),d=l.getCellData().getScalars();r.length?this.colorBy=r.slice(0,2):this.colorBy=c?[c.getName(),"pointData"]:d?[d.getName(),"cellData"]:"solid","geometry"===this.available&&(this.solidColor=n.ZP.floatRGB2HexCode(t.getColor())),i&&(this.colorToSlices=i.getUseColorByForColor(),this.opacityToSlices=i.getUseColorByForOpacity(),this.applyFuncsToSlices({color:this.colorToSlices,opacity:this.opacityToSlices}))}if(this.setPreset(),this.colorByName){const e=this.$proxyManager.getLookupTable(this.colorByName);this.saveOriginalRange({arrayName:this.colorByName,dataRange:e.getDataRange()}),this.setDataRange(e.getDataRange())}},setDataRangeIndex(e,t){const a=Number.parseFloat(t);if(!Number.isNaN(a)){const a=[...this.dataRange];a[e]=t,a[0]<a[1]&&this.setDataRange(a)}},resetDataRange(){this.setDataRange(this.origDataRange),this.$proxyManager.renderAllViews()},applyColorToSlices(e){this.applyFuncsToSlices({color:!!e})},applyOpacityToSlices(e){this.applyFuncsToSlices({opacity:!!e})},applyFuncsToSlices(e){let{color:t,opacity:a}=e;this.colorToSlices=t??this.colorToSlices,this.opacityToSlices=a??this.opacityToSlices;const i=this.$proxyManager.getRepresentations().filter((e=>e.getInput()===this.source)).find((e=>e.isA("vtkCustomSliceRepresentationProxy")));i&&(i.setUseColorByForColor(this.colorToSlices),i.setUseColorByForOpacity(this.opacityToSlices)),this.$proxyManager.renderAllViews()},setDataRange(e){this.dataRange=[Number(e[0])||0,Number(e[1])||0]},setColorBy(e){this.colorBy=e},saveOriginalRange(e){let{arrayName:t,dataRange:a}=e;this.$set(this.originalLUTRanges,t,a)}}},y=h,f=a(39),b=a(581),x=a(3),w=a.n(x),_=a(582),S=a(601),P=a(613),k=a(637),C=a(608),V=a(610),I=a(611),T=a(638),$=a(640),D=a(652),M=a(653),L=a(634),Z=a(654);e=a.hmd(e);var O={};e.hot,e.hot;var R=(0,b.Z)(y,i,[],!1,(function(e){O.$style=f.Z.locals||f.Z,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return O.$style}})}),null,null);w()(R,{VBtn:_.Z,VCard:S.Z,VCheckbox:P.Z,VContainer:k.Z,VFlex:C.Z,VIcon:V.Z,VLayout:I.Z,VMenu:T.Z,VSelect:$.Z,VSlider:D.Z,VSpacer:M.Z,VTextField:L.Z,VTooltip:Z.Z}),R.options.__file="src/components/controls/ColorBy/index.vue";var B=R.exports},156:function(e,t,a){"use strict";a.d(t,{Z:function(){return y}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.hasFieldData()?a("v-card",{class:e.$style.block,attrs:{flat:""}},[a("v-card-text",{class:e.$style.blockContent},[a("v-select",{class:e.$style.noSelect,staticStyle:{"margin-bottom":"10px"},attrs:{label:e.name||e.type,items:this.getFieldData().getArrays().map((function(e){return e.getName()})),dense:"",flat:"","hide-details":""},model:{value:e.activeFieldName,callback:function(t){e.activeFieldName=t},expression:"activeFieldName"}}),e._v(" "),a("v-container",{staticClass:"pa-0",attrs:{fluid:"","grid-list-xs":""}},[e.activeFieldName?a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs6:""}},[e._v("Type:")]),e._v(" "),a("v-flex",{staticClass:"body-2",class:e.$style.canSelect,attrs:{xs6:""}},[e._v("\n          "+e._s(e.getActiveArray().getDataType())+"\n        ")])],1):e._e(),e._v(" "),e.activeFieldName?a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs6:""}},[e._v("Min value:")]),e._v(" "),a("v-flex",{staticClass:"body-2",class:e.$style.canSelect,attrs:{xs6:""}},[e._v("\n            "+e._s(e.getActiveArray().getRange()[0].toFixed(3))+"\n          ")])],1):e._e(),e._v(" "),e.activeFieldName?a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs6:""}},[e._v("Max value:")]),e._v(" "),a("v-flex",{staticClass:"body-2",class:e.$style.canSelect,attrs:{xs6:""}},[e._v("\n            "+e._s(e.getActiveArray().getRange()[1].toFixed(3))+"\n          ")])],1):e._e(),e._v(" "),e.activeFieldName?a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs6:""}},[e._v("# of components:")]),e._v(" "),a("v-flex",{staticClass:"body-2",class:e.$style.canSelect,attrs:{xs6:""}},[e._v("\n            "+e._s(e.getActiveArray().getNumberOfComponents())+"\n          ")])],1):e._e()],1)],1)],1):e._e()};i._withStripped=!0;var s={name:"FieldDataInformation",props:{dataset:{required:!0},name:{type:String},type:{type:String,required:!0}},data:()=>({activeFieldName:null}),mounted(){if(this.hasFieldData()){const e=this.getFieldData().getArrays();this.activeFieldName=e[0].getName()}},methods:{hasFieldData(){return this.dataset[`get${this.type}`]&&this.getFieldData().getArrays().length>0},getFieldData(){return this.dataset[`get${this.type}`]()},getActiveArray(){return this.getFieldData().getArray(this.activeFieldName)}}},n=a(39),o=a(581),r=a(3),l=a.n(r),c=a(601),d=a(607),u=a(637),p=a(608),v=a(611),m=a(640);e=a.hmd(e);var g={};e.hot,e.hot;var h=(0,o.Z)(s,i,[],!1,(function(e){g.$style=n.Z.locals||n.Z,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return g.$style}})}),null,null);l()(h,{VCard:c.Z,VCardText:d.ZB,VContainer:u.Z,VFlex:p.Z,VLayout:v.Z,VSelect:m.Z}),h.options.__file="src/components/controls/Information/FieldData/index.vue";var y=h.exports},157:function(e,t,a){"use strict";a.d(t,{Z:function(){return y}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.dataset.isA("vtkImageData")?a("v-card",{class:e.$style.block,attrs:{flat:""}},[a("v-card-title",{class:e.$style.blockTitle},[a("span",{staticClass:"body-2 font-weight-medium"},[e._v("vtkImageData")])]),e._v(" "),a("v-card-text",{class:e.$style.blockContent},[a("v-container",{staticClass:"pa-0",attrs:{fluid:"","grid-list-xs":""}},[a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs5:""}},[e._v("Dimensions:")]),e._v(" "),a("v-flex",{staticClass:"body-2",class:e.$style.canSelect,attrs:{xs7:""}},[e._v("\n          ("+e._s(e.showVect(e.dataset.getDimensions(),", "))+")\n        ")])],1),e._v(" "),a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs5:""}},[e._v("Origin:")]),e._v(" "),a("v-flex",{staticClass:"body-2",class:e.$style.canSelect,attrs:{xs7:""}},[e._v("\n          ("+e._s(e.showVect(e.dataset.getOrigin()))+")\n        ")])],1),e._v(" "),a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs5:""}},[e._v("Spacing:")]),e._v(" "),a("v-flex",{staticClass:"body-2",class:e.$style.canSelect,attrs:{xs7:""}},[e._v("\n          ("+e._s(e.showVect(e.dataset.getSpacing()))+")\n        ")])],1),e._v(" "),a("v-layout",{attrs:{row:"","align-top":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs5:""}},[e._v("Orientation:")]),e._v(" "),a("v-flex",{staticClass:"body-2",class:e.$style.canSelect,attrs:{xs7:""}},[a("matrix-view",{class:e.$style.matrix,attrs:{matrix:e.dataset.getDirection(),rows:3,columns:3}})],1)],1)],1)],1)],1):e._e()};i._withStripped=!0;var s={name:"ImageDataInformation",props:["dataset"],components:{MatrixView:a(158).Z},methods:{showVect:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:", ";return e.map((e=>e.toFixed(2))).join(t)}}},n=s,o=a(39),r=a(581),l=a(3),c=a.n(l),d=a(601),u=a(607),p=a(637),v=a(608),m=a(611);e=a.hmd(e);var g={};e.hot,e.hot;var h=(0,r.Z)(n,i,[],!1,(function(e){g.$style=o.Z.locals||o.Z,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return g.$style}})}),null,null);c()(h,{VCard:d.Z,VCardText:u.ZB,VCardTitle:u.EB,VContainer:p.Z,VFlex:v.Z,VLayout:m.Z}),h.options.__file="src/components/controls/Information/ImageData/index.vue";var y=h.exports},158:function(e,t,a){"use strict";a.d(t,{Z:function(){return m}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"pa-1"},e._l(e.rows,(function(t){return a("v-layout",{key:t,attrs:{row:"","align-center":""}},e._l(e.columns,(function(i){return a("v-flex",{key:t*e.rows+i},[a("span",{class:e.$style.canSelect},[e._v("\n        "+e._s(e.matrix[(t-1)*e.rows+(i-1)].toFixed(2))+"\n      ")])])})),1)})),1)};i._withStripped=!0;var s={name:"MatrixViewInformation",props:{rows:{type:Number,required:!0},columns:{type:Number,required:!0},matrix:{required:!0}}},n=a(75),o=a(581),r=a(3),l=a.n(r),c=a(637),d=a(608),u=a(611);e=a.hmd(e);var p={};e.hot,e.hot;var v=(0,o.Z)(s,i,[],!1,(function(e){p.$style=n.Z.locals||n.Z,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return p.$style}})}),null,null);l()(v,{VContainer:c.Z,VFlex:d.Z,VLayout:u.Z}),v.options.__file="src/components/controls/Information/MatrixView/index.vue";var m=v.exports},159:function(e,t,a){"use strict";a.d(t,{Z:function(){return v}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.dataset.isA("vtkMolecule")?a("v-card",{class:e.$style.block,attrs:{flat:""}},[a("v-card-title",{class:e.$style.blockTitle},[a("span",{staticClass:"body-2 font-weight-medium"},[e._v("vtkMolecule")])]),e._v(" "),a("v-card-text",{class:e.$style.blockContent})],1):e._e()};i._withStripped=!0;var s={name:"MoleculeInformation",props:["dataset"]},n=a(75),o=a(581),r=a(3),l=a.n(r),c=a(601),d=a(607);e=a.hmd(e);var u={};e.hot,e.hot;var p=(0,o.Z)(s,i,[],!1,(function(e){u.$style=n.Z.locals||n.Z,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return u.$style}})}),null,null);l()(p,{VCard:c.Z,VCardText:d.ZB,VCardTitle:d.EB}),p.options.__file="src/components/controls/Information/Molecule/index.vue";var v=p.exports},160:function(e,t,a){"use strict";a.d(t,{Z:function(){return f}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.dataset.isA("vtkPolyData")?a("v-card",{class:e.$style.block,attrs:{flat:""}},[a("v-card-title",{class:e.$style.blockTitle},[a("span",{staticClass:"body-2 font-weight-medium"},[e._v("vtkPolyData")])]),e._v(" "),a("v-card-text",{class:e.$style.blockContent},[a("v-container",{staticClass:"pa-0",attrs:{fluid:"","grid-list-xs":""}},[a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs6:""}},[e._v("# of points:")]),e._v(" "),a("v-flex",{staticClass:"body-2",class:e.$style.canSelect,attrs:{xs6:""}},[e._v(e._s(e.formatNumbersWithThousandSeparator(e.dataset.getPoints().getNumberOfPoints(),",")))])],1),e._v(" "),a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs6:""}},[e._v("# of cells:")]),e._v(" "),a("v-flex",{staticClass:"body-2",class:e.$style.canSelect,attrs:{xs6:""}},[e._v(e._s(e.formatNumbersWithThousandSeparator(e.dataset.getNumberOfCells(),",")))])],1)],1)],1)],1):e._e()};i._withStripped=!0;var s=a(9);const{formatNumbersWithThousandSeparator:n}=s.ZP;var o={name:"PolyDataInformation",props:["dataset"],methods:{formatNumbersWithThousandSeparator:n}},r=a(39),l=a(581),c=a(3),d=a.n(c),u=a(601),p=a(607),v=a(637),m=a(608),g=a(611);e=a.hmd(e);var h={};e.hot,e.hot;var y=(0,l.Z)(o,i,[],!1,(function(e){h.$style=r.Z.locals||r.Z,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return h.$style}})}),null,null);d()(y,{VCard:u.Z,VCardText:p.ZB,VCardTitle:p.EB,VContainer:v.Z,VFlex:m.Z,VLayout:g.Z}),y.options.__file="src/components/controls/Information/PolyData/index.vue";var f=y.exports},155:function(e,t,a){"use strict";a.d(t,{Z:function(){return v}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.available?a("div",[a("vtk-image-data",{attrs:{dataset:e.source.getDataset()}}),e._v(" "),a("vtk-molecule",{attrs:{dataset:e.source.getDataset()}}),e._v(" "),a("vtk-poly-data",{attrs:{dataset:e.source.getDataset()}}),e._v(" "),a("vtk-field-data",{attrs:{dataset:e.source.getDataset(),name:"Point Data",type:"PointData"}}),e._v(" "),a("vtk-field-data",{attrs:{dataset:e.source.getDataset(),name:"Cell Data",type:"CellData"}})],1):e._e()};i._withStripped=!0;var s=a(156),n=a(157),o=a(159),r=a(160),l={name:"Information",props:["sourceId"],components:{VtkFieldData:s.Z,VtkImageData:n.Z,VtkMolecule:o.Z,VtkPolyData:r.Z},computed:{source(){return this.$proxyManager.getProxyById(this.sourceId)},available(){if(this.source){const e=this.source.getDataset();if(e&&e.isA)return e.isA("vtkPolyData")||e.isA("vtkImageData")}return!1}}},c=a(75),d=a(581);e=a.hmd(e);var u={};e.hot,e.hot;var p=(0,d.Z)(l,i,[],!1,(function(e){u.$style=c.Z.locals||c.Z,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return u.$style}})}),null,null);p.options.__file="src/components/controls/Information/index.vue";var v=p.exports},161:function(e,t,a){"use strict";a.d(t,{Z:function(){return f}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.domains.atomicRadiusScaleFactor?a("div",[a("v-card",{class:e.$style.block,attrs:{light:"",flat:""}},[a("v-card-text",{class:e.$style.blockContent},[a("v-container",{staticClass:"pa-0",attrs:{fluid:"","grid-list-xs":""}},[a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[a("v-flex",{attrs:{xs3:""}},[a("label",{class:e.$style.smallLabel},[e._v("Tolerance")])]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"","always-dirty":"",min:e.domains.tolerance.min,max:e.domains.tolerance.max,step:e.domains.tolerance.step},model:{value:e.tolerance,callback:function(t){e.tolerance=t},expression:"tolerance"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:e.domains.tolerance.min,max:e.domains.tolerance.max,step:e.domains.tolerance.step},model:{value:e.tolerance,callback:function(t){e.tolerance=t},expression:"tolerance"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("label",{class:e.$style.smallLabel},[e._v("Atomic")])]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"","always-dirty":"",min:e.domains.atomicRadiusScaleFactor.min,max:e.domains.atomicRadiusScaleFactor.max,step:e.domains.atomicRadiusScaleFactor.step},model:{value:e.atomicRadiusScaleFactor,callback:function(t){e.atomicRadiusScaleFactor=t},expression:"atomicRadiusScaleFactor"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:e.domains.atomicRadiusScaleFactor.min,max:e.domains.atomicRadiusScaleFactor.max,step:e.domains.atomicRadiusScaleFactor.step},model:{value:e.atomicRadiusScaleFactor,callback:function(t){e.atomicRadiusScaleFactor=t},expression:"atomicRadiusScaleFactor"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("label",{class:e.$style.smallLabel},[e._v("Bond")])]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"","always-dirty":"",min:e.domains.bondRadius.min,max:e.atomicRadiusScaleFactor,step:e.domains.bondRadius.step},model:{value:e.bondRadius,callback:function(t){e.bondRadius=t},expression:"bondRadius"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:e.domains.bondRadius.min,max:e.atomicRadiusScaleFactor,step:e.domains.bondRadius.step},model:{value:e.bondRadius,callback:function(t){e.bondRadius=t},expression:"bondRadius"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("label",{class:e.$style.smallLabel},[e._v("Hide Elements")])]),e._v(" "),a("v-flex",{attrs:{xs9:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":""},model:{value:e.hideElements,callback:function(t){e.hideElements=t},expression:"hideElements"}})],1)],1)],1)],1)],1)],1):e._e()};i._withStripped=!0;var s=a(127).Z.generateComponent("Molecule",[{name:"tolerance",initialValue:1},{name:"atomicRadiusScaleFactor",initialValue:1},{name:"bondRadius",initialValue:1},{name:"hideElements",initialValue:""}],!1,{onChange:{bondRadius:"updateData",atomicRadiusScaleFactor:"updateData"}}),n=a(39),o=a(581),r=a(3),l=a.n(r),c=a(601),d=a(607),u=a(637),p=a(608),v=a(611),m=a(652),g=a(634);e=a.hmd(e);var h={};e.hot,e.hot;var y=(0,o.Z)(s,i,[],!1,(function(e){h.$style=n.Z.locals||n.Z,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return h.$style}})}),null,null);l()(y,{VCard:c.Z,VCardText:d.ZB,VContainer:u.Z,VFlex:p.Z,VLayout:v.Z,VSlider:m.Z,VTextField:g.Z}),y.options.__file="src/components/controls/Molecule/index.vue";var f=y.exports},162:function(e,t,a){"use strict";a.d(t,{Z:function(){return b}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.domains.representation||e.domains.opacity||e.domains.sampleDistance?a("div",[e.domains.representation?a("v-card",{class:e.$style.block,attrs:{flat:""}},[a("v-container",{staticClass:"pa-0",attrs:{fluid:"","grid-list-xs":""}},[a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("v-select",{attrs:{dense:"",flat:"",label:"Type",items:e.domains.representation.items},model:{value:e.representation,callback:function(t){e.representation=t},expression:"representation"}})],1)],1)],1)],1):e._e(),e._v(" "),e.domains.opacity&&e.domains.pointSize?a("v-card",{class:e.$style.block,attrs:{flat:""}},[a("v-card-title",{class:e.$style.blockTitle,attrs:{flat:""}},[a("span",{staticClass:"body-2"},[e._v("Mesh")])]),e._v(" "),a("v-card-text",{class:e.$style.blockContent},[a("v-container",{staticClass:"pa-0",attrs:{fluid:"","grid-list-xs":""}},[a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[a("v-flex",{attrs:{xs3:""}},[a("label",{class:e.$style.smallLabel},[e._v("Point Size")])]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"","always-dirty":"",min:e.domains.pointSize.min,max:e.domains.pointSize.max,step:e.domains.pointSize.step},model:{value:e.pointSize,callback:function(t){e.pointSize=t},expression:"pointSize"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:e.domains.pointSize.min,max:e.domains.pointSize.max,step:e.domains.pointSize.step},model:{value:e.pointSize,callback:function(t){e.pointSize=t},expression:"pointSize"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("label",{class:e.$style.smallLabel},[e._v("Opacity")])]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"","always-dirty":"",min:e.domains.opacity.min,max:e.domains.opacity.max,step:e.domains.opacity.step},model:{value:e.opacity,callback:function(t){e.opacity=t},expression:"opacity"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:e.domains.opacity.min,max:e.domains.opacity.max,step:e.domains.opacity.step,value:e.opacity},on:{input:function(t){e.opacity=Number(t)}}})],1)],1)],1)],1)],1):e._e(),e._v(" "),e.domains.sampleDistance&&e.domains.edgeGradient?a("v-card",{class:e.$style.block,attrs:{flat:""}},[a("v-card-title",{class:e.$style.blockTitle,attrs:{flat:""}},[a("span",{staticClass:"body-2"},[e._v("Shadow & Edge")])]),e._v(" "),a("v-card-text",{class:e.$style.blockContent},[a("v-container",{staticClass:"pa-0",attrs:{fluid:"","grid-list-xs":""}},[a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[a("v-flex",{attrs:{xs3:""}},[a("label",{class:e.$style.smallLabel},[e._v("Sample Distance")])]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"","always-dirty":"",min:e.domains.sampleDistance.min,max:e.domains.sampleDistance.max,step:e.domains.sampleDistance.step},model:{value:e.sampleDistance,callback:function(t){e.sampleDistance=t},expression:"sampleDistance"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:e.domains.sampleDistance.min,max:e.domains.sampleDistance.max,step:e.domains.sampleDistance.step},model:{value:e.sampleDistance,callback:function(t){e.sampleDistance=t},expression:"sampleDistance"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("label",{class:e.$style.smallLabel},[e._v("Edge Gradient")])]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"","always-dirty":"",min:e.domains.edgeGradient.min,max:e.domains.edgeGradient.max,step:e.domains.edgeGradient.step},model:{value:e.edgeGradient,callback:function(t){e.edgeGradient=t},expression:"edgeGradient"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:e.domains.edgeGradient.min,max:e.domains.edgeGradient.max,step:e.domains.edgeGradient.step},model:{value:e.edgeGradient,callback:function(t){e.edgeGradient=t},expression:"edgeGradient"}})],1)],1)],1)],1)],1):e._e()],1):e._e()};i._withStripped=!0;var s=a(127).Z.generateComponent("Representation",[{name:"pointSize",initialValue:1},{name:"opacity",initialValue:1},{name:"sampleDistance",initialValue:1},{name:"edgeGradient",initialValue:1},{name:"representation",initialValue:"Surface"}]),n=a(39),o=a(581),r=a(3),l=a.n(r),c=a(601),d=a(607),u=a(637),p=a(608),v=a(611),m=a(640),g=a(652),h=a(634);e=a.hmd(e);var y={};e.hot,e.hot;var f=(0,o.Z)(s,i,[],!1,(function(e){y.$style=n.Z.locals||n.Z,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return y.$style}})}),null,null);l()(f,{VCard:c.Z,VCardText:d.ZB,VCardTitle:d.EB,VContainer:u.Z,VFlex:p.Z,VLayout:v.Z,VSelect:m.Z,VSlider:g.Z,VTextField:h.Z}),f.options.__file="src/components/controls/Representation/index.vue";var b=f.exports},163:function(e,t,a){"use strict";a.d(t,{Z:function(){return P}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.domains.windowWidth&&e.domains.windowLevel?a("div",[a("v-card",{class:e.$style.block,attrs:{flat:""}},[a("v-card-title",{class:e.$style.blockTitle},[a("span",{staticClass:"body-2"},[e._v("Window/Level")])]),e._v(" "),a("v-card-text",{class:e.$style.blockContent},[a("v-container",{staticClass:"pa-0",attrs:{fluid:"","grid-list-sm":""}},[a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[a("v-flex",{attrs:{xs3:""}},[a("label",{class:e.$style.smallLabel},[e._v("Window")])]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"","always-dirty":"",min:e.domains.windowWidth.min,max:e.domains.windowWidth.max,step:e.domains.windowWidth.step},model:{value:e.windowWidth,callback:function(t){e.windowWidth=e._n(t)},expression:"windowWidth"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:e.domains.windowWidth.min,max:e.domains.windowWidth.max,step:e.domains.windowWidth.step},model:{value:e.windowWidth,callback:function(t){e.windowWidth=e._n(t)},expression:"windowWidth"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("label",{class:e.$style.smallLabel},[e._v("Level")])]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"","always-dirty":"",min:e.domains.windowLevel.min,max:e.domains.windowLevel.max,step:e.domains.windowLevel.step},model:{value:e.windowLevel,callback:function(t){e.windowLevel=e._n(t)},expression:"windowLevel"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:e.domains.windowLevel.min,max:e.domains.windowLevel.max,step:e.domains.windowLevel.step},model:{value:e.windowLevel,callback:function(t){e.windowLevel=e._n(t)},expression:"windowLevel"}})],1)],1)],1)],1)],1),e._v(" "),a("v-card",{class:e.$style.block,attrs:{flat:""}},[a("v-card-title",{class:e.$style.blockTitle,attrs:{flat:""}},[a("span",{staticClass:"body-2"},[e._v("Slices")])]),e._v(" "),a("v-card-text",{class:e.$style.blockContent},[a("v-container",{staticClass:"pa-0",attrs:{fluid:"","grid-list-sm":""}},[a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[a("v-flex",{class:e.isSliceAvailable("x")||e.isSliceAvailable("default")&&e.xSliceVisibility?"":e.$style.disable,attrs:{xs2:""}},[a("v-btn",{staticClass:"flex-shrink-0",class:e.$style.button,attrs:{fab:"",small:"",outlined:!e.getToggleSliceX(),dark:e.getToggleSliceX(),color:"blue-grey"},on:{click:function(t){return t.stopPropagation(),e.setToggleSliceX()}}},[a("label",{class:e.$style.smallLabel},[e._v("X")])])],1),e._v(" "),a("v-flex",{class:e.isSliceAvailable("x")||e.isSliceAvailable("default")&&e.xSliceVisibility?"":e.$style.disable,attrs:{xs7:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"","always-dirty":"",min:e.xSliceDomain.min,max:e.xSliceDomain.max,step:e.xSliceDomain.step},model:{value:e.xSlice,callback:function(t){e.xSlice=e._n(t)},expression:"xSlice"}})],1),e._v(" "),a("v-flex",{class:e.isSliceAvailable("x")||e.isSliceAvailable("default")&&e.xSliceVisibility?"":e.$style.disable,attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:e.xSliceDomain.min,max:e.xSliceDomain.max,step:e.xSliceDomain.step},model:{value:e.xSlice,callback:function(t){e.xSlice=e._n(t)},expression:"xSlice"}})],1),e._v(" "),a("v-flex",{class:e.isSliceAvailable("y")||e.isSliceAvailable("default")&&e.ySliceVisibility?"":e.$style.disable,attrs:{xs2:""}},[a("div",{staticStyle:{position:"relative"}},[a("v-btn",{class:e.$style.button,attrs:{fab:"",small:"",outlined:!e.getToggleSliceY(),dark:e.getToggleSliceY(),color:"blue-grey"},on:{click:function(t){return t.stopPropagation(),e.setToggleSliceY()}}},[a("label",{class:e.$style.smallLabel},[e._v("Y")])])],1)]),e._v(" "),a("v-flex",{class:e.isSliceAvailable("y")||e.isSliceAvailable("default")&&e.ySliceVisibility?"":e.$style.disable,attrs:{xs7:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"","always-dirty":"",min:e.ySliceDomain.min,max:e.ySliceDomain.max,step:e.ySliceDomain.step},model:{value:e.ySlice,callback:function(t){e.ySlice=e._n(t)},expression:"ySlice"}})],1),e._v(" "),a("v-flex",{class:e.isSliceAvailable("y")||e.isSliceAvailable("default")&&e.ySliceVisibility?"":e.$style.disable,attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:e.ySliceDomain.min,max:e.ySliceDomain.max,step:e.ySliceDomain.step},model:{value:e.ySlice,callback:function(t){e.ySlice=e._n(t)},expression:"ySlice"}})],1),e._v(" "),a("v-flex",{class:e.isSliceAvailable("z")||e.isSliceAvailable("default")&&e.zSliceVisibility?"":e.$style.disable,attrs:{xs2:""}},[a("div",{staticStyle:{position:"relative"}},[a("v-btn",{class:e.$style.button,attrs:{fab:"",small:"",outlined:!e.getToggleSliceZ(),dark:e.getToggleSliceZ(),color:"blue-grey"},on:{click:function(t){return t.stopPropagation(),e.setToggleSliceZ()}}},[a("label",{class:e.$style.smallLabel},[e._v("Z")])])],1)]),e._v(" "),a("v-flex",{class:e.isSliceAvailable("z")||e.isSliceAvailable("default")&&e.zSliceVisibility?"":e.$style.disable,attrs:{xs7:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"","always-dirty":"",min:e.zSliceDomain.min,max:e.zSliceDomain.max,step:e.zSliceDomain.step},model:{value:e.zSlice,callback:function(t){e.zSlice=e._n(t)},expression:"zSlice"}})],1),e._v(" "),a("v-flex",{class:e.isSliceAvailable("z")||e.isSliceAvailable("default")&&e.zSliceVisibility?"":e.$style.disable,attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:e.zSliceDomain.min,max:e.zSliceDomain.max,step:e.zSliceDomain.step},model:{value:e.zSlice,callback:function(t){e.zSlice=e._n(t)},expression:"zSlice"}})],1)],1)],1)],1)],1),e._v(" "),a("v-card",{class:e.$style.block,attrs:{flat:""}},[a("v-card-title",{class:e.$style.blockTitle},[a("span",{staticClass:"body-2"},[e._v("Opacity")])]),e._v(" "),a("v-card-text",{class:e.$style.blockContent},[a("v-container",{staticClass:"pa-0",attrs:{fluid:"","grid-list-sm":""}},[a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[a("v-flex",{attrs:{xs9:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"","always-dirty":"",min:"0",max:"1",step:"0.01"},model:{value:e.opacity,callback:function(t){e.opacity=e._n(t)},expression:"opacity"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:"0",max:"1",step:"0.01"},model:{value:e.opacity,callback:function(t){e.opacity=e._n(t)},expression:"opacity"}})],1)],1)],1)],1)],1)],1):e._e()};i._withStripped=!0;var s=a(127);function n(e){const t=`set${e}`,a=`get${e}`;function i(){let e=null;return s.Z.findProxiesWithMethod(this,a).forEach((t=>{e=t[a]()})),e}return{get:i,set:function(){const e=!i.apply(this);s.Z.findProxiesWithMethod(this,t).forEach((a=>{a[t](e)})),this.$forceUpdate()}}}function o(e){return{set(){},get(){const t={...this.domains[e]};return t&&"min"in t&&"max"in t&&(t.min=Math.floor(t.min),t.max=Math.floor(t.max)),t}}}const r=[{name:"visibility",initialValue:!1},{name:"windowLevel",initialValue:1024},{name:"windowWidth",initialValue:2048},{name:"xSlice",initialValue:-1},{name:"ySlice",initialValue:-1},{name:"zSlice",initialValue:-1},{name:"xSliceVisibility",initialValue:!1},{name:"ySliceVisibility",initialValue:!1},{name:"zSliceVisibility",initialValue:!1},{name:"opacity",initialValue:1},{name:"xSliceDomain",computed:o("xSlice")},{name:"ySliceDomain",computed:o("ySlice")},{name:"zSliceDomain",computed:o("zSlice")},{name:"toggleSliceX",computed:n("XSliceVisibility")},{name:"toggleSliceY",computed:n("YSliceVisibility")},{name:"toggleSliceZ",computed:n("ZSliceVisibility")}];const l=s.Z.generateComponent("SliceControl",r,!0,{});Object.assign(l.methods,{isSliceAvailable:function(e){return!!this.$proxyManager.getViews().filter((e=>e.getContainer())).filter((t=>t.getName()===e)).length}});var c=l,d=a(39),u=a(581),p=a(3),v=a.n(p),m=a(582),g=a(601),h=a(607),y=a(637),f=a(608),b=a(611),x=a(652),w=a(634);e=a.hmd(e);var _={};e.hot,e.hot;var S=(0,u.Z)(c,i,[],!1,(function(e){_.$style=d.Z.locals||d.Z,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return _.$style}})}),null,null);v()(S,{VBtn:m.Z,VCard:g.Z,VCardText:h.ZB,VCardTitle:h.EB,VContainer:y.Z,VFlex:f.Z,VLayout:b.Z,VSlider:x.Z,VTextField:w.Z}),S.options.__file="src/components/controls/SliceControl/index.vue";var P=S.exports},123:function(e,t,a){"use strict";a.d(t,{Z:function(){return y}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("div",{class:e.$style.close},[a("v-btn",{attrs:{text:"",icon:""},on:{click:function(t){return e.$emit("close")}}},[a("v-icon",[e._v("mdi-close")])],1)],1),e._v(" "),a("v-card-title",{staticClass:"text-center"},[a("svg-icon",{class:e.$style.glanceIcon,attrs:{icon:"glance-logo"}})],1),e._v(" "),a("v-card-text",[a("p",{staticClass:"body-1"},[a("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:"https://kitware.github.io/glance/"}},[e._v("Glance")]),e._v("\n      is an open-source web application developed at\n      "),a("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:"https://www.kitware.com/"}},[e._v("Kitware")]),e._v("\n      for visualizing volumetric images, molecular structures, geometric\n      objects, and point clouds.  Also, it can serve as a foundation for building custom web-based\n      visualization applications involving\n      "),a("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:"http://insightsoftwareconsortium.github.io/itk-js/"}},[e._v("ITK.js")]),e._v("\n      and\n      "),a("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:"https://kitware.github.io/vtk-js/"}},[e._v("VTK.js")]),e._v(".\n    ")]),e._v(" "),a("ul",{staticClass:"ml-5"},[a("li",{staticClass:"body-1"},[a("span",[e._v("Here is our")]),e._v(" "),a("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:"https://kitware.github.io/glance/doc/"}},[e._v("documentation")]),e._v(".\n      ")]),e._v(" "),a("li",{staticClass:"body-1"},[a("span",[e._v("Ask questions in our")]),e._v(" "),a("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:"https://discourse.vtk.org/c/web/volview/13"}},[e._v("community support channel")]),e._v(".\n      ")]),e._v(" "),a("li",{staticClass:"body-1"},[a("span",[e._v("Request features and report bugs in our")]),e._v(" "),a("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:"https://github.com/Kitware/glance/issues"}},[e._v("issue tracker")]),e._v(".\n      ")]),e._v(" "),a("li",{staticClass:"body-1"},[a("span",[e._v("We are open source!")]),e._v(" "),a("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:"https://github.com/Kitware/glance"}},[e._v("Code is on Github")]),e._v(".\n      ")]),e._v(" "),a("li",{staticClass:"body-1"},[a("span",[e._v("Current version: "+e._s(e.version))])])]),e._v(" "),a("v-layout",{staticClass:"text-center",attrs:{row:"",wrap:"","align-end":""}},[a("v-flex",{attrs:{xs4:""}},[a("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:"https://www.kitware.com"}},[a("svg-icon",{class:e.$style.aboutIcon,attrs:{icon:"kitware"}})],1)]),e._v(" "),a("v-flex",{attrs:{xs4:""}},[a("div",[e._v("")]),e._v(" "),a("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:"https://kitware.github.io/vtk-js/"}},[a("svg-icon",{class:e.$style.aboutIcon,attrs:{icon:"vtkjs"}})],1)]),e._v(" "),a("v-flex",{attrs:{xs4:""}},[a("div",[e._v("")]),e._v(" "),a("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:"http://insightsoftwareconsortium.github.io/itk-wasm/"}},[a("svg-icon",{class:e.$style.aboutIcon,attrs:{icon:"itkjs"}})],1)])],1),e._v(" "),a("div",{staticClass:"pt-4 d-block text-center grey--text text--darken-2"},[e._v("\n       "+e._s((new Date).getFullYear())+"  Kitware, Inc.\n    ")])],1)],1)};i._withStripped=!0;var s={name:"AboutBox",components:{SvgIcon:a(70).Z},data:()=>({version:"not available"}),created(){window.GLANCE_VERSION&&("master"===window.GLANCE_VERSION?this.version="nightly (master)":this.version=window.GLANCE_VERSION)}},n={close:"AboutBox-close-_khm3",aboutIcon:"AboutBox-aboutIcon-npj_s",glanceIcon:"AboutBox-glanceIcon-x8OkE"},o=a(581),r=a(3),l=a.n(r),c=a(582),d=a(601),u=a(607),p=a(608),v=a(610),m=a(611);e=a.hmd(e);var g={};e.hot,e.hot;var h=(0,o.Z)(s,i,[],!1,(function(e){g.$style=n.locals||n,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return g.$style}})}),null,null);l()(h,{VBtn:c.Z,VCard:d.Z,VCardText:u.ZB,VCardTitle:u.EB,VFlex:p.Z,VIcon:v.Z,VLayout:m.Z}),h.options.__file="src/components/core/AboutBox/index.vue";var y=h.exports},150:function(e,t,a){"use strict";a.d(t,{Z:function(){return te}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("drag-and-drop",{attrs:{enabled:!e.landingVisible&&!e.fileUploadDialog},on:{drop:e.openFileList},scopedSlots:e._u([{key:"default",fn:function(t){var i,s=t.dragHover;return[a("v-app",[a("v-navigation-drawer",{attrs:{clipped:e.$vuetify.breakpoint.mdAndUp,"mobile-breakpoint":e.$vuetify.breakpoint.thresholds.sm,app:"",fixed:"","disable-resize-watcher":"",touchless:"",width:"300"},model:{value:e.controlsDrawer,callback:function(t){e.controlsDrawer=t},expression:"controlsDrawer"}},[a("controls-drawer")],1),e._v(" "),a("v-app-bar",{attrs:{app:"","clipped-left":""}},[a("v-app-bar-nav-icon",{attrs:{disabled:e.landingVisible},nativeOn:{click:function(t){t.stopPropagation(),e.controlsDrawer=!e.controlsDrawer}}}),e._v(" "),a("v-tooltip",{attrs:{bottom:"",disabled:e.smallScreen},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("a",e._g({attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.toggleLanding.apply(null,arguments)}}},i),[a("svg-icon",{staticStyle:{"margin-top":"6px"},attrs:{icon:"glance-logo"+(e.smallScreen?"-mark":""),height:"36px"}})],1)]}}],null,!0)},[e._v(" "),e.landingVisible?a("span",{key:"if-landingVisible"},[e._v("Go to app")]):a("span",{key:"if-landingVisible"},[e._v("Back to landing page")])]),e._v(" "),a("v-spacer"),e._v(" "),a("v-toolbar-items",[e.errors.length?a("v-btn",{key:"if-has-errors",attrs:{text:"",color:"error"},on:{click:function(t){e.errorDialog=!0}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-alert-circle")]),e._v(" "),a("span",[e._v(e._s(e.errors.length))]),e._v("\n            \n            "),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.smallScreen,expression:"!smallScreen"}]},[e._v("error(s)")])],1):e._e()],1),e._v(" "),a("collapsible-toolbar",{attrs:{collapse:e.$vuetify.breakpoint.xsOnly,dense:e.smallScreen},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.state;return[a("collapsible-toolbar-item",{attrs:{state:i},on:{click:e.showFileUpload}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-folder")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"dense"!==i,expression:"state !== 'dense'"}]},[e._v("Open")])],1),e._v(" "),a("collapsible-toolbar-item",{directives:[{name:"show",rawName:"v-show",value:!e.landingVisible,expression:"!landingVisible"}],attrs:{state:i},on:{click:function(t){return e.saveState()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-cloud-download")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"dense"!==i,expression:"state !== 'dense'"}]},[e._v("Save state")])],1),e._v(" "),a("collapsible-toolbar-item",{directives:[{name:"show",rawName:"v-show",value:!e.landingVisible,expression:"!landingVisible"}],attrs:{state:i},on:{click:function(t){e.screenshotsDrawer=!0}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-image-multiple")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"dense"!==i,expression:"state !== 'dense'"}]},[e._v("\n                Screenshots ("+e._s(e.screenshotCount)+")\n              ")])],1),e._v(" "),a("collapsible-toolbar-item",{attrs:{state:i},on:{click:function(t){e.aboutDialog=!0}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-information")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"dense"!==i,expression:"state !== 'dense'"}]},[e._v("About")])],1)]}}],null,!0)})],1),e._v(" "),a("v-content",{style:{position:e.landingVisible?"initial":"fixed"},attrs:{id:e.$style.appContent}},[e.landingVisible?a("landing",{key:"if-landing",on:{open:e.showFileUpload,"open-urls":e.autoLoadRemotes,"open-files":e.openFileList}}):a("layout-view",{key:"if-landing"})],1),e._v(" "),a("v-navigation-drawer",{attrs:{stateless:e.screenshotsDrawerStateless,app:"",right:"",temporary:"",touchless:"",width:"300"},model:{value:e.screenshotsDrawer,callback:function(t){e.screenshotsDrawer=t},expression:"screenshotsDrawer"}},[a("screenshots",{on:{"screenshot-count":function(t){e.screenshotCount=t},close:function(t){e.screenshotsDrawer=!1}}})],1),e._v(" "),a("file-loader",{on:{load:e.doneLoadingFiles},model:{value:e.fileUploadDialog,callback:function(t){e.fileUploadDialog=t},expression:"fileUploadDialog"}}),e._v(" "),a("v-dialog",{attrs:{persistent:"",width:"60%"},model:{value:e.autoloadDialog,callback:function(t){e.autoloadDialog=t},expression:"autoloadDialog"}},[a("v-card",{staticClass:"pa-4"},[a("v-card-title",{staticClass:"justify-center text-center title black--text pv-break-word"},[e._v("\n            Loading "+e._s(e.autoloadLabel)+"\n            "),1===e.fileLoadingProgress?a("span",[e._v("\n              (reading...)\n            ")]):e.fileLoadingProgress!==1/0?a("span",[e._v("\n              ("+e._s(Math.round(100*e.fileLoadingProgress))+"%)\n            ")]):e._e()]),e._v(" "),a("v-card-text",[a("v-progress-linear",{attrs:{indeterminate:e.fileLoadingProgress===1/0,value:100*e.fileLoadingProgress}})],1)],1)],1),e._v(" "),a("state-file-generator"),e._v(" "),a("div",{class:(i={},i[e.$style.overlay]=!0,i[e.$style.overlayVisible]=s,i)},[a("div",{class:e.$style.overlayText},[a("div",{staticClass:"display-3"},[e._v("Drop files here")]),e._v(" "),a("v-icon",{attrs:{size:"4.75rem"}},[e._v("mdi-publish")])],1)]),e._v(" "),a("browser-issues"),e._v(" "),a(e.dialogType,{tag:"component",attrs:{"max-width":"50%"},model:{value:e.aboutDialog,callback:function(t){e.aboutDialog=t},expression:"aboutDialog"}},[a("about-box",{on:{close:function(t){e.aboutDialog=!1}}})],1),e._v(" "),a(e.dialogType,{tag:"component",attrs:{"max-width":"50%"},model:{value:e.errorDialog,callback:function(t){e.errorDialog=t},expression:"errorDialog"}},[a("error-box",{attrs:{errors:e.errors},on:{close:function(t){e.errorDialog=!1},clear:function(t){e.errors=[]}}})],1),e._v(" "),a("v-snackbar",{attrs:{value:!!e.globalSingleNotification,bottom:"",left:"",timeout:e.notifyPermanent?0:6e3},on:{input:function(t){e.globalSingleNotification=""},click:function(t){e.globalSingleNotification=""}}},[e._v("\n        "+e._s(e.globalSingleNotification)+"\n        "),a("v-btn",{attrs:{text:""}},[e._v("close")])],1),e._v(" "),a("div",{attrs:{id:"app-portal-mount"}})],1)]}}])})};i._withStripped=!0;var s=a(612),n=a(122),o=a.n(n),r=a(690),l=a(622),c=a(9),d=a(123),u=a(124),p=a(125),v=a(175),m=a(176),g=a(177),h=a(315),y=a(316),f=a(319),b=a(321),x=a(70),w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.collapse?a("v-menu",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({attrs:{icon:""}},i),[a("v-icon",[e._v("mdi-dots-vertical")])],1)]}}],null,!1,2097855828)},[e._v(" "),a("v-list",[e._t("default",null,{state:e.state})],2)],1):a("v-toolbar-items",[e._t("default",null,{state:e.state})],2)};w._withStripped=!0;var _={name:"CollapsibleToolbar",props:{collapse:{type:Boolean,default:!1},dense:{type:Boolean,default(){return this.$vuetify.breakpoint.smAndDown}}},computed:{state(){return this.collapse?"collapse":this.dense?"dense":"expand"}}},S=a(581),P=a(3),k=a.n(P),C=a(582),V=a(610),I=a(647),T=a(638),$=a(687),D=(0,S.Z)(_,w,[],!1,null,null,null);k()(D,{VBtn:C.Z,VIcon:V.Z,VList:I.Z,VMenu:T.Z,VToolbarItems:$.lj}),D.options.__file="src/components/widgets/CollapsibleToolbar/index.vue";var M=D.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return"collapse"===e.state?a("v-list-item",e._g({attrs:{link:""}},e.$listeners),[e._t("default")],2):a("v-btn",e._g({attrs:{text:""}},e.$listeners),[e._t("default")],2)};L._withStripped=!0;var Z={name:"CollapsibleToolbarItem",props:{state:{type:String,default:"expand"}}},O=a(641),R=(0,S.Z)(Z,L,[],!1,null,null,null);k()(R,{VBtn:C.Z,VListItem:O.Z}),R.options.__file="src/components/widgets/CollapsibleToolbar/Item/index.vue";var B=R.exports,A=[{key:"ctrl+o",action:"files/promptForFiles"},{key:"ctrl+g",action:"takeScreenshot"},{key:"r",action:"resetActiveCamera"},{key:".",action:"increaseSlice"},{key:",",action:"decreaseSlice"},{key:"b",action:"previousViewPoint"},{key:"n",action:"nextViewPoint"}],F={name:"App",components:{AboutBox:d.Z,BrowserIssues:u.Z,CollapsibleToolbar:M,CollapsibleToolbarItem:B,ControlsDrawer:p.Z,DragAndDrop:v.Z,ErrorBox:m.Z,FileLoader:g.Z,Landing:h.Z,LayoutView:y.Z,Screenshots:f.Z,StateFileGenerator:b.Z,SvgIcon:x.Z,VBottomSheet:r.Z,VDialog:l.Z},provide(){return{$notify:this.notify}},data:()=>({aboutDialog:!1,errorDialog:!1,fileUploadDialog:!1,autoloadDialog:!1,autoloadLabel:"",internalControlsDrawer:!0,screenshotsDrawer:!1,screenshotCount:0,errors:[],globalSingleNotification:"",notifyPermanent:!1}),computed:{controlsDrawer:{get(){return!this.landingVisible&&this.internalControlsDrawer},set(e){this.landingVisible||(this.internalControlsDrawer=e)}},...(0,s.rn)({loadingState:"loadingState",landingVisible:e=>"landing"===e.route,screenshotsDrawerStateless(e){return this.screenshotsDrawer&&!!e.screenshotDialog},smallScreen(){return this.$vuetify.breakpoint.smAndDown},dialogType(){return this.smallScreen?"v-bottom-sheet":"v-dialog"}}),...(0,s.Se)("files",{anyFileLoadingErrors:"anyErrors",fileLoadingProgress:"totalProgress"})},proxyManagerHooks:{onProxyModified(){this.loadingState||this.$proxyManager.autoAnimateViews()}},created(){this.internalControlsDrawer=!this.smallScreen},mounted(){var e=this;this.$root.$on("open_girder_panel",(()=>{this.fileUploadDialog=!0})),this.initViews(),this.initializeAnimations(),A.forEach((e=>{let{key:t,action:a}=e;return o().bind(t,(e=>{e.preventDefault(),this.$store.dispatch(a)}))})),window.addEventListener("error",this.recordError),c.ZP.setLoggerFunction("error",(function(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];e.recordError(a.join(" ")),window.console.error(...a)}))},beforeDestroy(){window.removeEventListener("error",this.recordError),A.forEach((e=>{let{key:t}=e;return o().unbind(t)}))},methods:{...(0,s.OI)({showApp:"showApp",showLanding:"showLanding",toggleLanding(){this.landingVisible?this.showApp():this.showLanding()}}),...(0,s.nv)({saveState:"saveState",initViews:"views/initViews"}),...(0,s.nv)("files",["openFiles","openRemoteFiles","load","resetQueue"]),...(0,s.nv)("animations",["initializeAnimations"]),showFileUpload(){this.fileUploadDialog=!0},openFileList(e){this.fileUploadDialog=!0,this.$nextTick((()=>this.openFiles(Array.from(e))))},autoLoadRemotes(e,t,a){const i=t.map(((e,t)=>({name:a[t],url:e})));this.autoloadDialog=!0,this.autoloadLabel=e,setTimeout((()=>this.openRemoteFiles(i).then((()=>this.load())).then((()=>{this.anyFileLoadingErrors?this.$nextTick((()=>{this.fileUploadDialog=!0})):this.doneLoadingFiles()})).finally((()=>{this.resetQueue(),this.autoloadDialog=!1}))),10)},doneLoadingFiles(){this.showApp()},recordError(e){this.errors.push(e)},notify(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.globalSingleNotification&&(this.globalSingleNotification="",this.permanent=!1),this.$nextTick((()=>{this.globalSingleNotification=e,this.notifyPermanent=t}))}}},N=F,E={appContent:"App-appContent-GhXJH",overlay:"App-overlay-B_drw",overlayVisible:"App-overlayVisible-XKImt",overlayText:"App-overlayText-WTZRN",noTransition:"App-noTransition-IOu4K"},j=a(691),z=a(692),G=a(693),U=a(601),W=a(607),H=a(694),K=a(695),q=a(603),Y=a(666),X=a(653),J=a(654);e=a.hmd(e);var Q={};e.hot,e.hot;var ee=(0,S.Z)(N,i,[],!1,(function(e){Q.$style=E.locals||E,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return Q.$style}})}),null,null);k()(ee,{VApp:j.Z,VAppBar:z.Z,VAppBarNavIcon:G.Z,VBtn:C.Z,VCard:U.Z,VCardText:W.ZB,VCardTitle:W.EB,VContent:H.Z,VDialog:l.Z,VIcon:V.Z,VNavigationDrawer:K.Z,VProgressLinear:q.Z,VSnackbar:Y.Z,VSpacer:X.Z,VToolbarItems:$.lj,VTooltip:J.Z}),ee.options.__file="src/components/core/App/index.vue";var te=ee.exports},124:function(e,t,a){"use strict";a.d(t,{Z:function(){return y}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"90%","max-width":"900px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"title"},[e._v("Welcome to ParaView Glance!")]),e._v(" "),a("v-card-text",{staticClass:"body-2"},[a("p",[e._v("\n        You may experience slower rendering speeds because of the following\n        reason(s):\n      ")]),e._v(" "),a("ul",{staticClass:"pl-10"},[e.issues.webglVersion?a("li",[e._v("\n          Detected WebGL version "+e._s(e.issues.webglVersion)+". For best performance,\n          please use a computer and/or browser with at least WebGL 2.\n        ")]):e._e(),e._v(" "),e.issues.integratedGPU?a("li",[e._v('\n          Using GPU "'+e._s(e.issues.integratedGPU)+'". A dedicated GPU would\n          offer better performance.\n          '),a("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:"https://wevideo.zendesk.com/hc/en-us/articles/225259448-How-to-enable-WebGL"}},[e._v("\n            More info on enabling dedicated GPUs in browsers.\n          ")])]):e._e()])]),e._v(" "),a("v-card-actions",{staticClass:"d-flex justify-space-between align-center pa-5"},[a("v-checkbox",{staticClass:"mt-0 pt-0",attrs:{label:"Don't show again","hide-details":"",value:e.suppressBrowserWarning},on:{input:e.setSuppressBrowserWarning}}),e._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.dialog=!1}}},[e._v("\n        Okay\n      ")])],1)],1)],1)};i._withStripped=!0;var s=a(612);var n={name:"BrowserIssues",data:()=>({issues:{},dialog:!1}),computed:(0,s.rn)(["suppressBrowserWarning"]),mounted(){this.getBrowserIssues()},methods:{getBrowserIssues:function(){const e=this.$proxyManager.getViews()[0];if(e){const t=e.getOpenGLRenderWindow().getGLInformations(),{UNMASKED_RENDERER:a,UNMASKED_VENDOR:i,WEBGL_VERSION:s}=t;s.value<2&&this.$set(this.issues,"webglVersion",s.value);-1!==`${i.value} / ${a.value}`.toLowerCase().indexOf("intel")&&this.$set(this.issues,"integratedGPU",a.value)}Object.keys(this.issues).length&&!this.suppressBrowserWarning&&(this.dialog=!0)},...(0,s.nv)({setSuppressBrowserWarning:"suppressBrowserWarning"})}},o={},r=a(581),l=a(3),c=a.n(l),d=a(582),u=a(601),p=a(607),v=a(613),m=a(622);e=a.hmd(e);var g={};e.hot,e.hot;var h=(0,r.Z)(n,i,[],!1,(function(e){g.$style=o.locals||o,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return g.$style}})}),null,null);c()(h,{VBtn:d.Z,VCard:u.Z,VCardActions:p.h7,VCardText:p.ZB,VCardTitle:p.EB,VCheckbox:v.Z,VDialog:m.Z}),h.options.__file="src/components/core/BrowserIssues/index.vue";var y=h.exports},125:function(e,t,a){"use strict";a.d(t,{Z:function(){return f}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-tabs",{class:e.$style.tabsContainer,attrs:{centered:"",grow:""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("v-tab",[e._v("Datasets")]),e._v(" "),a("v-tab",[e._v("Tools")]),e._v(" "),a("v-tab",[e._v("Global")]),e._v(" "),a("v-tabs-items",{class:e.$style.tabItems,attrs:{touchless:""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("v-tab-item",{class:e.$style.tabItem},[a("datasets")],1),e._v(" "),a("v-tab-item",{class:e.$style.tabItem,attrs:{eager:""}},[a("edit-tools")],1),e._v(" "),a("v-tab-item",{class:e.$style.tabItem},[a("global-settings")],1)],1)],1)};i._withStripped=!0;var s=a(74),n=a(165),o=a(171),r={name:"ControlsDrawer",components:{Datasets:s.Z,EditTools:n.Z,GlobalSettings:o.Z},data:()=>({activeTab:0})},l={tabsContainer:"ControlsDrawer-tabsContainer-D9UMb",tabItems:"ControlsDrawer-tabItems-O9Lf9",tabItem:"ControlsDrawer-tabItem-voKeM",tabComponent:"ControlsDrawer-tabComponent-K9eUY"},c=a(581),d=a(3),u=a.n(d),p=a(670),v=a(671),m=a(672),g=a(675);e=a.hmd(e);var h={};e.hot,e.hot;var y=(0,c.Z)(r,i,[],!1,(function(e){h.$style=l.locals||l,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return h.$style}})}),null,null);u()(y,{VTab:p.Z,VTabItem:v.Z,VTabs:m.Z,VTabsItems:g.Z}),y.options.__file="src/components/core/ControlsDrawer/index.vue";var f=y.exports},74:function(e,t,a){"use strict";a.d(t,{Z:function(){return D}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-expansion-panels",{attrs:{multiple:"",accordion:""},model:{value:e.panelState,callback:function(t){e.panelState=t},expression:"panelState"}},e._l(e.datasets,(function(t,i){return a("v-expansion-panel",{key:t,class:e.$style.datasetPanel},[a("v-expansion-panel-header",{staticClass:"pv-no-select pl-3 pr-3 pt-1 pb-1",class:e.$style.panelHeader},[a("v-btn",{staticClass:"flex-shrink-0",attrs:{icon:"",small:""},on:{click:function(a){return a.stopPropagation(),e.toggleDatasetVisibility(t)}}},[a("v-icon",[e._v("\n          "+e._s(e.getDatasetVisibility(t)?"mdi-eye":"mdi-eye-off")+"\n        ")])],1),e._v(" "),a("div",{staticClass:"subtitle-2 text-truncate pl-2 pr-2",attrs:{title:e.getSourceName(t)}},[e._v("\n        "+e._s(e.getSourceName(t))+"\n      ")]),e._v(" "),a("v-spacer"),e._v(" "),e.datasets.length>1?a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(i){var s=i.on;return[a("v-btn",e._g({class:e.$style.headerMenuButton,attrs:{icon:"",small:""},on:{click:function(a){return a.stopPropagation(),e.activateSource(t)}}},s),[a("v-icon",[e._v("\n              "+e._s(e.activeSourceId===t?"mdi-bookmark-check":"mdi-bookmark-outline")+"\n            ")])],1)]}}],null,!0)},[a("span",{staticClass:"pv-no-select"},[e._v("Activate source")])]):e._e(),e._v(" "),a("div",{on:{click:function(e){e.stopPropagation()}}},[a("v-menu",{attrs:{"offset-x":""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({class:e.$style.headerMenuButton,attrs:{icon:"",small:""}},i),[a("v-icon",[e._v("mdi-dots-vertical")])],1)]}}],null,!0)},[e._v(" "),a("v-list",{attrs:{dense:""}},[a("v-list-item",{on:{click:function(a){return e.deleteDataset(t)}}},[a("v-list-item-title",[e._v("Delete")])],1),e._v(" "),a("v-list-item",{on:{click:function(a){return e.uploadDataset(t)}}},[a("v-list-item-title",[e._v("Upload To Girder")])],1)],1)],1)],1)],1),e._v(" "),a("v-expansion-panel-content",{class:e.$style.panelContent,attrs:{eager:""}},[a("color-group",{attrs:{index:i,visible:e.datasets.length>1}}),e._v(" "),a("v-expansion-panels",{attrs:{multiple:"",accordion:""},model:{value:e.subpanels[t],callback:function(a){e.$set(e.subpanels,t,a)},expression:"subpanels[sourceId]"}},e._l(e.panels,(function(i,s){return i.visible(e.$proxyManager.getProxyById(t))?a("v-expansion-panel",{key:s,class:e.$style.subpanel},[a("v-expansion-panel-header",{staticClass:"pv-no-select",class:e.$style.subpanelHeader},[a("v-icon",{staticClass:"flex-grow-0",attrs:{left:""}},[e._v(e._s(i.icon))]),e._v(" "),a("span",{staticClass:"body-2 font-weight-medium flex-grow-0"},[e._v("\n              "+e._s(i.name)+"\n            ")])],1),e._v(" "),a("v-expansion-panel-content",{class:e.$style.panelContent,attrs:{eager:""}},[a(i.component,{tag:"component",attrs:{sourceId:t}})],1)],1):e._e()})),1)],1)],1)})),1)};i._withStripped=!0;var s=a(612),n=a(151),o=a(155),r=a(161),l=a(162),c=a(163),d=[{component:l.Z,defaultExpand:!0,icon:"mdi-brightness-6",name:"Representation",visible:e=>e.getDataset().isA("vtkPolyData")||e.getDataset().isA("vtkImageData")},{component:n.Z,defaultExpand:!0,icon:"mdi-invert-colors",name:"Colors",visible:e=>e.getDataset().isA("vtkPolyData")||e.getDataset().isA("vtkImageData")},{component:c.Z,defaultExpand:!0,icon:"mdi-tune",name:"Slice",visible:e=>e.getDataset().isA("vtkImageData")},{component:r.Z,defaultExpand:!0,icon:"mdi-molecule",name:"Molecule",visible:e=>e.getDataset().isA("vtkMolecule")},{component:o.Z,defaultExpand:!1,icon:"mdi-help-circle-outline",name:"Information",visible:e=>e.getDataset().isA("vtkPolyData")||e.getDataset().isA("vtkImageData")}],u={name:"Datasets",components:{ColorGroup:a(164).Z},data:()=>({datasets:[],internalPanelState:{},subpanels:{},activeSourceId:-1}),computed:{...(0,s.rn)({collapseDatasetPanels:"collapseDatasetPanels",panels:e=>{const t=Object.keys(e.panels).map((e=>Number(e)));return t.sort(((e,t)=>e-t)),[].concat(...t.map((t=>e.panels[t])))}}),...(0,s.rn)("widgets",["imageToLabelmaps"]),panelState:{get(){const e=[];for(let t=0;t<this.datasets.length;t++){const a=this.datasets[t];this.internalPanelState[a]&&e.push(t)}return e},set(e){for(let t=0;t<this.datasets.length;t++){const a=this.datasets[t];this.internalPanelState[a]=e.indexOf(t)>-1}}},smallScreen(){return this.$vuetify.breakpoint.smAndDown}},created(){d.forEach(((e,t)=>this.addPanel(e,t+10)))},mounted(){this.updateDatasetList()},proxyManagerHooks:{onProxyModified(){this.updateDatasetList()},onProxyCreated(e){let{proxyGroup:t,proxyName:a}=e;"Sources"===t&&"TrivialProducer"===a&&this.updateDatasetList()},onProxyDeleted(e){let{proxyId:t,proxyGroup:a,proxyName:i}=e;if("Sources"===a&&"TrivialProducer"===i){this.datasets.indexOf(t)>-1&&(this.$delete(this.internalPanelState,t),this.$delete(this.subpanels,t),this.updateDatasetList())}},onActiveSourceChange(e){this.activeSourceId=e?e.getProxyId():-1}},methods:{updateDatasetList(){const e=this.$proxyManager.getSources().filter((e=>"Sources"===e.getProxyGroup()&&"TrivialProducer"===e.getProxyName())).filter((e=>Boolean(e.getDataset())));for(let t=0;t<e.length;t++){const a=e[t],i=a.getProxyId();i in this.internalPanelState||(this.internalPanelState[i]=!this.collapseDatasetPanels),i in this.subpanels||(this.collapseDatasetPanels?this.subpanels[i]=[]:this.subpanels[i]=d.filter((e=>e.visible(a))).map(((e,t)=>e.defaultExpand?t:-1)).filter((e=>e>-1)))}this.datasets=e.map((e=>e.getProxyId())),this.$store.dispatch("views/updateMasterSourceId",this.datasets)},getSourceName(e){const t=this.$proxyManager.getProxyById(e);return t?t.getName():null},activateSource(e){const t=this.$proxyManager.getProxyById(e);return t&&t.activate(),null},deleteDataset(e){const t=this.$proxyManager.getProxyById(e);t&&this.$proxyManager.deleteProxy(t)},uploadDataset(e){this.$proxyManager.getProxyById(e)&&(this.$root.$emit("open_girder_panel"),setTimeout((()=>{this.$root.$emit("girder_upload_proxy",e)}),10))},getDatasetVisibility(e){const t=this.$proxyManager.getRepresentations().find((t=>t.getInput().getProxyId()===e));return!!t&&t.isVisible()},toggleDatasetVisibility(e){const t=!this.getDatasetVisibility(e),a=this.imageToLabelmaps[e]||[];this.$proxyManager.getRepresentations().filter((t=>{const i=t.getInput().getProxyId();return i===e||a.indexOf(i)>-1})).forEach((e=>e.setVisibility(t))),this.$forceUpdate()},addPanel(e,t){this.$store.commit("addPanel",{component:e,priority:t})}}},p=u,v=a(75),m=a(581),g=a(3),h=a.n(g),y=a(582),f=a(655),b=a(656),x=a(657),w=a(658),_=a(610),S=a(647),P=a(641),k=a(646),C=a(638),V=a(653),I=a(654);e=a.hmd(e);var T={};e.hot,e.hot;var $=(0,m.Z)(p,i,[],!1,(function(e){T.$style=v.Z.locals||v.Z,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return T.$style}})}),null,null);h()($,{VBtn:y.Z,VExpansionPanel:f.Z,VExpansionPanelContent:b.Z,VExpansionPanelHeader:x.Z,VExpansionPanels:w.Z,VIcon:_.Z,VList:S.Z,VListItem:P.Z,VListItemTitle:k.V9,VMenu:C.Z,VSpacer:V.Z,VTooltip:I.Z}),$.options.__file="src/components/core/Datasets/index.vue";var D=$.exports},165:function(e,t,a){"use strict";a.d(t,{Z:function(){return b}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-expansion-panels",{attrs:{accordion:""}},[a("v-expansion-panel",[a("v-expansion-panel-header",{staticClass:"subtitle-2"},[e._v("\n      Measurements\n    ")]),e._v(" "),a("v-expansion-panel-content",{class:e.$style.panelContent,attrs:{eager:""}},[a("measurement-tools",{attrs:{enabled:"measurement"===e.enabledTool},on:{enable:function(t){return e.setEnabledTool("measurement",t)}}})],1)],1),e._v(" "),a("v-expansion-panel",[a("v-expansion-panel-header",{staticClass:"subtitle-2"},[e._v("\n      Painting\n    ")]),e._v(" "),a("v-expansion-panel-content",{class:e.$style.panelContent},[a("paint-tool",{attrs:{enabled:"paint"===e.enabledTool},on:{enable:function(t){return e.setEnabledTool("paint",t)}}})],1)],1),e._v(" "),a("v-expansion-panel",[a("v-expansion-panel-header",{staticClass:"subtitle-2"},[e._v("\n      Cropping\n    ")]),e._v(" "),a("v-expansion-panel-content",{class:e.$style.panelContent},[a("crop-tool",{attrs:{enabled:"crop"===e.enabledTool},on:{enable:function(t){return e.setEnabledTool("crop",t)}}})],1)],1),e._v(" "),a("v-expansion-panel",[a("v-expansion-panel-header",{staticClass:"subtitle-2"},[e._v("\n      Median Filter\n    ")]),e._v(" "),a("v-expansion-panel-content",{class:e.$style.panelContent},[a("median-filter")],1)],1)],1)};i._withStripped=!0;var s=a(166),n=a(128),o=a(167),r=a(168),l={name:"EditTools",components:{PaintTool:s.Z,MeasurementTools:n.Z,CropTool:o.Z,MedianFilter:r.Z},data:()=>({enabledTool:""}),methods:{setEnabledTool(e,t){this.enabledTool=t?e:""}}},c={panelContent:"EditTools-panelContent-wgcJ9"},d=a(581),u=a(3),p=a.n(u),v=a(655),m=a(656),g=a(657),h=a(658);e=a.hmd(e);var y={};e.hot,e.hot;var f=(0,d.Z)(l,i,[],!1,(function(e){y.$style=c.locals||c,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return y.$style}})}),null,null);p()(f,{VExpansionPanel:v.Z,VExpansionPanelContent:m.Z,VExpansionPanelHeader:g.Z,VExpansionPanels:h.Z}),f.options.__file="src/components/core/EditTools/index.vue";var b=f.exports},176:function(e,t,a){"use strict";a.d(t,{Z:function(){return g}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{staticClass:"title"},[e._v("Application errors")]),e._v(" "),a("v-card-text",[a("p",[e._v("\n      The following is debug output for errors that have occurred. Please\n      copy and paste the below text and post it to our\n      "),a("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:"https://github.com/Kitware/Glance/issues"}},[e._v("issue tracker")]),e._v(".\n    ")]),e._v(" "),a("textarea",{ref:"errorTextarea",class:e.$style.errorTextarea,attrs:{readonly:""}},[e._v(e._s(e.readableErrors))])]),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"secondary"},on:{click:function(t){return e.$emit("clear")}}},[e._v("\n      Clear Errors\n    ")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{on:{click:function(t){return e.$emit("close")}}},[e._v("Cancel")]),e._v(" "),e.isClipboardEnabled()?a("v-btn",{key:"if-clipboard-enabled",attrs:{color:"info",loading:e.copiedToClipboard},on:{click:e.copyErrorToClipboard}},[a("span",[e._v("Copy to clipboard")]),e._v(" "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Copied!")])]):e._e()],1)],1)};i._withStripped=!0;var s={name:"ErrorBox",props:{errors:{type:Array,default:[]}},data:()=>({copiedToClipboard:!1}),computed:{readableErrors(){const e=window.GLANCE_VERSION||"not available",t=this.errors.map((e=>e instanceof ErrorEvent?e.message:e)).join("\n");return`ParaViewGlance: ${e}\n${navigator.userAgent}\n\n\`\`\`\n${t}\n\`\`\``}},methods:{isClipboardEnabled:function(){try{return document.queryCommandSupported("copy")}catch(e){return!1}},copyErrorToClipboard:function(){this.$refs.errorTextarea.select(),document.execCommand("copy")&&(this.copiedToClipboard=!0,window.setTimeout((()=>{this.copiedToClipboard=!1}),2e3))}}},n={errorTextarea:"ErrorBox-errorTextarea-_ViHl"},o=a(581),r=a(3),l=a.n(r),c=a(582),d=a(601),u=a(607),p=a(653);e=a.hmd(e);var v={};e.hot,e.hot;var m=(0,o.Z)(s,i,[],!1,(function(e){v.$style=n.locals||n,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return v.$style}})}),null,null);l()(m,{VBtn:c.Z,VCard:d.Z,VCardActions:u.h7,VCardText:u.ZB,VCardTitle:u.EB,VSpacer:p.Z}),m.options.__file="src/components/core/ErrorBox/index.vue";var g=m.exports},177:function(e,t,a){"use strict";a.d(t,{Z:function(){return M}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"70%",value:e.value,persistent:e.loading,fullscreen:e.$vuetify.breakpoint.smAndDown},on:{input:e.onDialogChange,"click:outside":function(t){!e.loading&&e.close()}}},[a("v-card",[a("v-card-text",{staticClass:"pa-0"},[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("v-container",[a("v-tabs",{model:{value:e.active_tab,callback:function(t){e.active_tab=t},expression:"active_tab"}},[a("v-tab",[e._v("Local")]),e._v(" "),e.girderRest?a("v-tab",[e._v("Girder")]):e._e(),e._v(" "),a("v-tab-item",{attrs:{transition:"fade-transition"}},[a("drag-and-drop",{attrs:{enabled:""},on:{drop:function(t){return e.openFiles(t)}},scopedSlots:e._u([{key:"default",fn:function(t){var i,s=t.dragHover;return[a("v-row",{staticClass:"pa-3",class:(i={},i[e.$style.dragBox]=!0,i[e.$style.dropTarget]=s,i),attrs:{align:"center"},on:{click:e.promptLocal}},[a("v-btn",[e._v("browse")]),e._v(" "),a("span",{staticClass:"ml-2"},[e._v("\n                        or drop your files here\n                      ")])],1)]}}])})],1),e._v(" "),e.girderRest?a("v-tab-item",{attrs:{transition:"fade-transition"}},[a("girder-box")],1):e._e()],1),e._v(" "),a("v-row",{staticClass:"mt-2"},[a("v-expansion-panels",{attrs:{accordion:""}},e._l(e.fileList,(function(t,i){return a("v-expansion-panel",{key:i},[a("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:e._u([{key:"actions",fn:function(){return[a("div",{staticClass:"d-flex flex-row align-center"},["ready"===t.state?[a("v-icon",{attrs:{color:"teal"}},[e._v("mdi-check")])]:"error"===t.state?[a("v-icon",{attrs:{color:"error"}},[e._v("mdi-alert")])]:"needsInfo"===t.state?[a("v-icon",{attrs:{color:"blue"}},[e._v("mdi-information")])]:"loading"===t.state||"needsDownload"===t.state?[a("v-progress-circular",{attrs:{indeterminate:"",color:"secondary",size:"16",width:"2"}})]:e._e(),e._v(" "),a("v-btn",{staticClass:"ml-3",attrs:{icon:""}},[a("v-icon",{on:{click:function(t){return t.stopPropagation(),e.deleteFileAtRevIndex(i)}}},[e._v("mdi-delete")])],1)],2)]},proxy:!0},{key:"default",fn:function(i){i.open;return[a("v-row",{staticStyle:{width:"80%"},attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"8"}},[e._v(e._s(t.name))]),e._v(" "),a("v-col",{staticClass:"text--secondary pr-3 text-right",attrs:{cols:"4"}},["error"===t.state?a("span",[e._v("\n                            Click to see error\n                          ")]):"raw"===t.ext?a("span",[e._v("\n                            Click to edit raw file info\n                          ")]):"glance"===t.ext?a("span",[e._v("\n                            State file will be loaded first\n                          ")]):e._e()])],1)]}}],null,!0)}),e._v(" "),a("v-expansion-panel-content",["error"===t.state?[e._v("\n                      "+e._s(t.error)+"\n                    ")]:"raw"===t.ext?[a("raw-file-reader",{attrs:{file:t.files[0]},on:{change:function(t){return e.setRawFileInfoAtRevIndex(i,t)}}})]:e._e()],2)],1)})),1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),e.anyErrors?a("span",{staticClass:"red--text mr-3"},[e._v("Only checked files will be loaded.")]):e._e(),e._v(" "),a("v-btn",{attrs:{text:"",disabled:e.loading},on:{click:e.close}},[e._v("\n            Cancel\n          ")]),e._v(" "),a("v-btn",{attrs:{color:"primary",disabled:e.loading||e.pendingFiles||!e.hasReadyFiles},on:{click:e.loadFiles}},[e._v("\n            "+e._s(e.loading?"Loading...":"Load")+"\n          ")])],1)],1)],1)],1)],1)};i._withStripped=!0;var s=a(612),n=a(178),o=a(175),r=a(179),l={name:"FileLoader",components:{RawFileReader:n.Z,DragAndDrop:o.Z,GirderBox:r.Z},inject:["girderRest"],props:{value:{type:Boolean,default:!1}},data:()=>({loading:!1,active_tab:0}),mounted(){this.$root.$on("open_girder_panel",(()=>{this.active_tab=1}))},computed:{...(0,s.rn)("files",{fileList:e=>Array.from(e.fileList).reverse(),pendingFiles:e=>e.fileList.reduce(((e,t)=>e||"ready"!==t.state&&"error"!==t.state),!1),hasReadyFiles:e=>e.fileList.reduce(((e,t)=>e||"ready"===t.state),!1)}),...(0,s.Se)("files",["anyErrors"])},methods:{...(0,s.nv)("files",["openFiles","promptLocal","deleteFile","setRawFileInfo","load","resetQueue"]),loadFiles(){this.loading=!0,this.load().finally((()=>{this.close(),this.$emit("load"),setTimeout((()=>{this.loading=!1}),10)}))},deleteFileAtRevIndex(e){return this.deleteFile(this.fileList.length-1-e)},setRawFileInfoAtRevIndex(e,t){return this.setRawFileInfo({index:this.fileList.length-1-e,info:t})},onDialogChange(e){e?this.$emit("input",!0):this.close()},close(){this.$emit("input",!1),setTimeout((()=>this.resetQueue()),10)}}},c={dragBox:"FileLoader-dragBox-wtic9",dropTarget:"FileLoader-dropTarget-KZYE7"},d=a(581),u=a(3),p=a.n(u),v=a(582),m=a(601),g=a(607),h=a(683),y=a(637),f=a(622),b=a(655),x=a(656),w=a(657),_=a(658),S=a(610),P=a(599),k=a(680),C=a(653),V=a(670),I=a(671),T=a(672);e=a.hmd(e);var $={};e.hot,e.hot;var D=(0,d.Z)(l,i,[],!1,(function(e){$.$style=c.locals||c,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return $.$style}})}),null,null);p()(D,{VBtn:v.Z,VCard:m.Z,VCardActions:g.h7,VCardText:g.ZB,VCol:h.Z,VContainer:y.Z,VDialog:f.Z,VExpansionPanel:b.Z,VExpansionPanelContent:x.Z,VExpansionPanelHeader:w.Z,VExpansionPanels:_.Z,VIcon:S.Z,VProgressCircular:P.Z,VRow:k.Z,VSpacer:C.Z,VTab:V.Z,VTabItem:I.Z,VTabs:T.Z}),D.options.__file="src/components/core/FileLoader/index.vue";var M=D.exports},179:function(e,t,a){"use strict";a.d(t,{Z:function(){return Z}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",{attrs:{"no-gutters":"",align:"center"}},[a("v-col",[a("v-text-field",{attrs:{label:"Girder URL","single-line":"",outlined:"","hide-details":""},model:{value:e.newGirderURL,callback:function(t){e.newGirderURL=t},expression:"newGirderURL"}})],1),e._v(" "),a("v-btn",{staticClass:"ml-2",attrs:{disabled:e.noURLChange,text:""},on:{click:function(t){e.changeURLPrompt=!0}}},[e._v("\n        Update\n      ")]),e._v(" "),e.loggedOut?e._e():a("v-btn",{staticClass:"ml-2",attrs:{tile:"",color:"secondary"},on:{click:e.logout}},[e._v("\n        Log out\n      ")])],1),e._v(" "),a("v-row",[e.loggedOut?a("v-col",[a("GirderAuthentication",{key:e.girderRest.token,attrs:{register:"",oauth:!0}}),e._v(" "),a("div",{staticClass:"mt-2"},[a("v-icon",[e._v("mdi-information")]),e._v(" "),a("span",[e._v("Logging in will refresh and lose any unsaved data.")])],1)],1):e._e(),e._v(" "),a("v-col",[a("GirderFileManager",{ref:"girderFileManager",attrs:{"root-location-disabled":!1,selectable:!0,location:e.location},on:{"update:location":function(t){e.location=t}},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),e._v(" "),a("v-toolbar",[a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"mt-4",attrs:{disabled:!e.selected.length},on:{click:function(t){return e.load()}}},[e._v("\n             Select\n          ")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{width:"30%"},model:{value:e.changeURLPrompt,callback:function(t){e.changeURLPrompt=t},expression:"changeURLPrompt"}},[a("v-card",[a("v-card-title",[e._v("Change Girder URL")]),e._v(" "),a("v-card-text",[e._v("\n          Changing the girder URL to "),a("pre",[e._v(e._s(e.newGirderURL))]),e._v(" will require a refresh.\n          Do you want to continue?\n        ")]),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{text:""},on:{click:function(t){e.changeURLPrompt=!1}}},[e._v("Cancel")]),e._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:e.refreshPage}},[e._v("Refresh")])],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[a("girder-upload",{ref:"girderUploader",attrs:{dest:e.location}})],1)],1)};i._withStripped=!0;var s=a(70),n=a(612),o=a(74),r=a(677),l=a(679),c=a(523),d=a(520),u=a(79),p=a(521),v=a(406),m=a(522);function g(e,t){const a=new Blob([e]);return new File([a],t)}var h={name:"GirderBox",components:{SvgIcon:s.Z,GirderAuthentication:r.Z,GirderFileManager:l.Z,Datasets:o.Z,GirderUpload:c.Z},inject:["girderRest","$notify"],data(){return{selected:[],internalLocation:null,changeServer:!1,newGirderURL:this.girderRest.apiRoot,changeURLPrompt:!1}},computed:{currentUserLogin(){return this.girderRest.user?this.girderRest.user.login:"anonymous"},loggedOut(){return null===this.girderRest.user},location:{get(){return this.internalLocation||(this.loggedOut?{_id:"5e84eb3e2660cbefba7d71d9",_modelType:"folder"}:this.girderRest.user)},set(e){this.internalLocation=e}},noURLChange(){return this.newGirderURL===this.girderRest.apiRoot},...(0,n.rn)("widgets",{dataMeasurements:"measurements"})},mounted(){this.$root.$on("girder_upload_proxy",(e=>{this.upload(e)})),this.$root.$on("girder_upload_measurements",(e=>{this.uploadMeasurements(e)}))},methods:{load(){const e=this.selected.map((e=>({url:`${this.girderRest.apiRoot}/item/${e._id}/download`,name:e.name,withGirderToken:!0,proxyKeys:{girderProvenance:{...this.location,apiRoot:this.girderRest.apiRoot},girderItem:{itemId:e._id,itemName:e.name},meta:e.meta}})));this.$store.dispatch("files/openRemoteFiles",e)},export2pc(e){const t=this.$proxyManager.getProxyById(e).get().dataset,a=u.Z.convertVtkToItkImage(t);a.data=a.data.slice(0),(0,d.Z)(null,!1,a,"out.mha").then((e=>{let{arrayBuffer:t}=e;const a=new Blob([t]),i=URL.createObjectURL(a),s=document.createElement("a");s.setAttribute("href",i),s.setAttribute("download","out.mha"),document.body.appendChild(s),s.click(),document.body.removeChild(s)}))},checkUploadPossible(){return this.loggedOut?(this.$notify("Cannot upload to Girder unless logged in. Please log in then try again"),!1):this.location?"user"!==this.location._modelType||(this.$notify("Cannot upload here. Please select public or private and then try again"),!1):(this.$notify("Cannot upload to Girder root location. Please navigate to a folder you own then try again"),!1)},upload(e){if(!this.checkUploadPossible())return;const t=this.$proxyManager.getProxyById(e),a=t.getDataset(),i=t.getName(),s={glanceDataType:a.getClassName()};"vtkLabelMap"===a.getClassName()&&Object.assign(s,{colorMap:a.getColorMap()}),this.$notify("Uploading...",!0),function(e,t){return new Promise(((a,i)=>{if(e.isA("vtkImageData")){const i=u.Z.convertVtkToItkImage(e);i.data=i.data.slice(0),(0,d.Z)(null,!1,i,t).then((e=>a(g(e,t))))}else if(e.isA("vtkPolyData")){let s=null;t.endsWith(".vtp")?(s=p.ZP.newInstance(),s.setFormat(v.Z.FormatTypes.BINARY)):t.endsWith(".stl")&&(s=m.ZP.newInstance()),s?a(g(s.write(e),t)):i(new Error(`Cannot save polydata dataset ${t}`))}else i(new Error(`Cannot save dataset ${t}`))}))}(a,i).then((t=>{const a=this.$proxyManager.getProxyById(e).getKey("girderProvenance")||this.location;this.$refs.girderUploader.setFiles([t]),this.$refs.girderUploader.inputFilesChanged([t]),this.$refs.girderUploader.start({dest:a,postUpload:e=>{let{results:t}=e;const{itemId:a}=t[0];this.girderRest.put(`${this.girderRest.apiRoot}/item/${a}`,`metadata=${JSON.stringify(s)}`),this.$notify("Dataset uploaded"),this.$refs.girderFileManager.refresh()}}).catch((e=>{this.$notify(`Upload error: ${e}`),console.error("Upload error",e)}))}))},uploadMeasurements(e){if(!this.checkUploadPossible())return;const t=this.dataMeasurements[e];if(t){const a=`${this.$proxyManager.getProxyById(e).getName()}.measurements.json`,i=new File([JSON.stringify(t)],a),s=this.$proxyManager.getProxyById(e).getKey("girderProvenance")||this.location;this.$notify("Uploading...",!0),this.$refs.girderUploader.setFiles([i]),this.$refs.girderUploader.inputFilesChanged([i]),this.$refs.girderUploader.start({dest:s,postUpload:()=>{this.$notify("Measurements uploaded"),this.$refs.girderFileManager.refresh()}}).catch((e=>{this.$notify(`Upload error: ${e}`),console.error("Upload error",e)}))}},refreshPage(){const e=new URL(window.location.href),t=new URLSearchParams(e.search);t.set("girderRoute",this.newGirderURL),e.search=t.toString(),window.location.href=e.toString()},logout(){this.girderRest.logout()}}},y={close:"GirderBox-close-eeT8j"},f=a(581),b=a(3),x=a.n(b),w=a(582),_=a(601),S=a(607),P=a(683),k=a(637),C=a(622),V=a(610),I=a(680),T=a(653),$=a(634),D=a(684);e=a.hmd(e);var M={};e.hot,e.hot;var L=(0,f.Z)(h,i,[],!1,(function(e){M.$style=y.locals||y,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return M.$style}})}),null,null);x()(L,{VBtn:w.Z,VCard:_.Z,VCardActions:S.h7,VCardText:S.ZB,VCardTitle:S.EB,VCol:P.Z,VContainer:k.Z,VDialog:C.Z,VIcon:V.Z,VRow:I.Z,VSpacer:T.Z,VTextField:$.Z,VToolbar:D.Z}),L.options.__file="src/components/core/GirderBox/index.vue";var Z=L.exports},171:function(e,t,a){"use strict";a.d(t,{Z:function(){return I}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{class:e.$style.container},[e.isAnimated?a("v-card",{class:e.$style.card,attrs:{flat:""}},[a("div",{class:e.$style.heading},[a("span",{staticClass:"subtitle-2"},[e._v("Animation controls")])]),e._v(" "),a("v-divider",{staticClass:"mb-4"}),e._v(" "),a("animationControls")],1):e._e(),e._v(" "),a("v-card",{class:e.$style.card,attrs:{flat:""}},[a("div",{class:e.$style.heading},[a("span",{staticClass:"subtitle-2"},[e._v("General Settings")])]),e._v(" "),a("v-divider",{staticClass:"mb-4"}),e._v(" "),a("v-container",{staticClass:"pa-0",attrs:{"grid-list-xs":""}},[a("v-layout",{staticClass:"pt-1",attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs10:""}},[a("span",{staticClass:"body-2"},[e._v("Default collapse datasets")])]),e._v(" "),a("v-flex",{attrs:{xs2:""}},[a("v-switch",{class:e.$style.slimInput,attrs:{"hide-details":""},model:{value:e.collapseDatasetPanelsModel,callback:function(t){e.collapseDatasetPanelsModel=t},expression:"collapseDatasetPanelsModel"}})],1)],1)],1)],1),e._v(" "),a("v-card",{class:e.$style.card,attrs:{flat:""}},[a("div",{class:e.$style.heading},[a("span",{staticClass:"subtitle-2"},[e._v("Measurements")])]),e._v(" "),a("v-divider",{staticClass:"mb-4"}),e._v(" "),a("v-container",{staticClass:"pa-0",attrs:{"grid-list-xs":""}},[a("v-layout",{staticClass:"pt-1",attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs9:""}},[a("span",{staticClass:"body-2"},[e._v("Distance unit symbol")])]),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{hint:"Symbol","hide-details":"",required:""},model:{value:e.distanceUnitSymbolModel,callback:function(t){e.distanceUnitSymbolModel=t},expression:"distanceUnitSymbolModel"}})],1),e._v(" "),a("v-flex",{attrs:{xs9:""}},[a("span",{staticClass:"body-2"},[e._v("Distance unit factor")])]),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{type:"number",hint:"Factor","hide-details":"",min:0,step:.1,required:""},model:{value:e.distanceUnitFactorModel,callback:function(t){e.distanceUnitFactorModel=t},expression:"distanceUnitFactorModel"}})],1)],1)],1)],1),e._v(" "),a("v-card",{class:e.$style.card,attrs:{flat:""}},[a("div",{class:e.$style.heading},[a("span",{staticClass:"subtitle-2"},[e._v("Background")])]),e._v(" "),a("v-divider",{staticClass:"mb-4"}),e._v(" "),a("palette-picker",{attrs:{palette:e.palette,size:24},model:{value:e.backgroundColorModel,callback:function(t){e.backgroundColorModel=t},expression:"backgroundColorModel"}})],1),e._v(" "),a("v-card",{class:e.$style.card,attrs:{flat:""}},[a("div",{class:e.$style.heading},[a("span",{staticClass:"subtitle-2"},[e._v("Interaction Style")])]),e._v(" "),a("v-divider",{class:e.$style.divider}),e._v(" "),a("v-container",{staticClass:"pa-0",attrs:{"grid-list-xs":""}},[a("v-layout",{staticClass:"pt-1",attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs6:""}},[a("span",{staticClass:"body-2"},[e._v("3D")])]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-select",{staticClass:"pv-no-select",class:e.$style.slimInput,attrs:{dense:"",flat:"","hide-details":"",items:e.interactionStyles3D},model:{value:e.interactionStyle3DModel,callback:function(t){e.interactionStyle3DModel=t},expression:"interactionStyle3DModel"}})],1),e._v(" "),a("v-flex",{attrs:{xs6:""}},[e.firstPersonInteraction?a("span",{staticClass:"body-2"},[e._v("\n            Movement Speed\n          ")]):e._e()]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[e.firstPersonInteraction?a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:0,step:.1},model:{value:e.firstPersonMovementSpeedModel,callback:function(t){e.firstPersonMovementSpeedModel=t},expression:"firstPersonMovementSpeedModel"}}):e._e()],1)],1)],1)],1),e._v(" "),a("v-card",{class:e.$style.card,attrs:{flat:""}},[a("div",{class:e.$style.heading},[a("span",{staticClass:"subtitle-2"},[e._v("Overlay")])]),e._v(" "),a("v-divider",{class:e.$style.divider}),e._v(" "),a("v-container",{staticClass:"pa-0",attrs:{"grid-list-xs":""}},[a("v-layout",{staticClass:"pt-1",attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs6:""}},[a("span",{staticClass:"body-2"},[e._v("Text opacity")])]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"",min:0,max:1,step:.01},model:{value:e.annotationOpacityModel,callback:function(t){e.annotationOpacityModel=t},expression:"annotationOpacityModel"}})],1)],1)],1)],1),e._v(" "),a("v-card",{class:e.$style.card,attrs:{flat:""}},[a("div",{class:e.$style.heading},[a("v-container",{staticClass:"pa-0",attrs:{"grid-list-xs":""}},[a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs10:""}},[a("span",{staticClass:"subtitle-2"},[e._v("Orientation Axis")])]),e._v(" "),a("v-flex",{attrs:{xs2:""}},[a("v-switch",{class:e.$style.slimInput,attrs:{"hide-details":""},model:{value:e.orientationAxisModel,callback:function(t){e.orientationAxisModel=t},expression:"orientationAxisModel"}})],1)],1)],1)],1),e._v(" "),a("v-divider",{class:e.$style.divider}),e._v(" "),a("v-container",{staticClass:"pa-0",attrs:{"grid-list-xs":""}},[a("v-layout",{staticClass:"pt-1",attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs3:""}},[a("span",{staticClass:"body-2"},[e._v("Type")])]),e._v(" "),a("v-flex",{attrs:{xs9:""}},[a("v-select",{staticClass:"pv-no-select",class:e.$style.slimInput,attrs:{dense:"",flat:"","hide-details":"",disabled:!e.orientationAxis,items:e.axisTypes},model:{value:e.axisTypeModel,callback:function(t){e.axisTypeModel=t},expression:"axisTypeModel"}})],1)],1),e._v(" "),a("v-layout",{staticClass:"pt-1",attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs3:""}},[a("span",{staticClass:"body-2"},[e._v("Preset")])]),e._v(" "),a("v-flex",{attrs:{xs9:""}},[a("v-select",{staticClass:"pv-no-select",class:e.$style.slimInput,attrs:{dense:"",flat:"","hide-details":"",items:e.orientationPresets},model:{value:e.orientationPresetModel,callback:function(t){e.orientationPresetModel=t},expression:"orientationPresetModel"}})],1)],1)],1)],1),e._v(" "),a("gpu-information",{attrs:{width:250,proxyManager:e.$proxyManager}}),e._v(" "),e.hasVR()?a("v-card",{class:e.$style.card,attrs:{flat:""}},[a("div",{class:e.$style.heading},[a("v-container",{staticClass:"pa-0",attrs:{"grid-list-xs":""}},[a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs10:""}},[a("span",{staticClass:"subtitle-2"},[e._v("Virtual Reality")])]),e._v(" "),a("v-flex",{attrs:{xs2:""}},[a("v-switch",{class:e.$style.slimInput,attrs:{"hide-details":""},on:{change:e.toggleVR},model:{value:e.vrEnabled,callback:function(t){e.vrEnabled=t},expression:"vrEnabled"}})],1)],1)],1)],1),e._v(" "),a("v-divider",{class:e.$style.divider}),e._v(" "),a("v-container",{staticClass:"pa-0",attrs:{"grid-list-xs":""}},[a("v-layout",{staticClass:"pt-1",attrs:{row:"","align-center":"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("span",{staticClass:"body-2"},[e._v("Physical scale")])]),e._v(" "),a("v-flex",{attrs:{xs7:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"",min:"0.1",max:"10",step:"any"},model:{value:e.physicalScale,callback:function(t){e.physicalScale=t},expression:"physicalScale"}})],1)],1)],1)],1):e._e(),e._v(" "),a("v-card",{class:e.$style.card,attrs:{flat:""}},[a("div",{class:e.$style.heading},[a("span",{staticClass:"subtitle-2"},[e._v("LOD Settings")])]),e._v(" "),a("v-divider",{class:e.$style.divider}),e._v(" "),a("v-container",{staticClass:"pa-0",attrs:{"grid-list-xs":""}},[a("v-layout",{staticClass:"pt-1",attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs7:""}},[a("span",{staticClass:"body-2"},[e._v("Max Texture LOD Size")])]),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:100,suffix:"KiB"},model:{value:e.maxTextureLODSizeModel,callback:function(t){e.maxTextureLODSizeModel=t},expression:"maxTextureLODSizeModel"}})],1)],1)],1)],1)],1)};i._withStripped=!0;var s=a(612),n=a(172),o=a(173),r=a(38),l=a(174);const c=[{text:"Default",value:"3D"},{text:"First Person",value:"FirstPerson"}],d=[{text:"XYZ",value:"default"},{text:"LPS",value:"lps"}],u=[{text:"Arrows",value:"arrow"},{text:"Cube",value:"cube"}];var p={name:"GlobalSettings",components:{AnimationControls:n.Z,PalettePicker:r.Z,GpuInformation:o.Z},data:()=>({palette:l.qg,orientationPresets:d,interactionStyles3D:c,axisTypes:u,vrEnabled:!1,physicalScale:1,basePhysicalScale:1}),computed:{distanceUnitSymbolModel:{get(){return this.distanceUnitSymbol},set(e){this.setDistanceUnitSymbol(e)}},distanceUnitFactorModel:{get(){return this.distanceUnitFactor},set(e){this.setDistanceUnitFactor(e)}},collapseDatasetPanelsModel:{get(){return this.collapseDatasetPanels},set(e){this.setCollapseDatasetPanels(e)}},backgroundColorModel:{get(){return this.backgroundColor},set(e){this.setBackgroundColor(e)}},orientationAxisModel:{get(){return this.orientationAxis},set(e){this.setOrientationAxis(e)}},orientationPresetModel:{get(){return this.orientationPreset},set(e){this.setOrientationPreset(e)}},axisTypeModel:{get(){return this.axisType},set(e){this.setAxisType(e)}},annotationOpacityModel:{get(){return this.annotationOpacity},set(e){this.setAnnotationOpacity(e)}},firstPersonMovementSpeedModel:{get(){let e=this.firstPersonMovementSpeed;return null===e&&(this.resetFirstPersonMovementSpeed(),e=this.firstPersonMovementSpeed),e},set(e){this.setFirstPersonMovementSpeed(e)}},interactionStyle3DModel:{get(){return this.interactionStyle3D},set(e){this.setInteractionStyle3D(e)}},firstPersonInteraction(){return"FirstPerson"===this.interactionStyle3D},maxTextureLODSizeModel:{get(){return this.maxTextureLODSize},set(e){this.setMaxTextureLODSize(e)}},...(0,s.rn)(["collapseDatasetPanels"]),...(0,s.rn)("animations",{isAnimated:e=>e.frames.length>0}),...(0,s.rn)("views",{backgroundColor:e=>e.globalBackgroundColor,orientationAxis:e=>e.axisVisible,orientationPreset:e=>e.axisPreset,axisType:e=>e.axisType,annotationOpacity:e=>e.annotationOpacity,interactionStyle3D:e=>e.interactionStyle3D,firstPersonMovementSpeed:e=>e.firstPersonMovementSpeed,maxTextureLODSize:e=>e.maxTextureLODSize}),...(0,s.rn)("widgets",{distanceUnitSymbol:e=>e.distanceUnitSymbol,distanceUnitFactor:e=>e.distanceUnitFactor})},watch:{physicalScale(){const e=this.getViewForVR();e&&e.getCamera().setPhysicalScale(this.basePhysicalScale/Number(this.physicalScale))}},methods:{hasVR(){const e=this.getViewForVR();return e&&!!e.getOpenGLRenderWindow().getVrDisplay()},getViewForVR:function(){const e=this.$proxyManager.getViews();for(let t=0;t<e.length;t++)if("View3D"===e[t].getProxyName())return e[t];return null},toggleVR(e){const t=this.getViewForVR();if(t){const a=t.getCamera(),i=t.getRenderer(),s=t.getOpenGLRenderWindow();if(e){t.setOrientationAxesVisibility(!1),i.resetCamera(),this.basePhysicalScale=a.getPhysicalScale(),this.physicalScale=1;const e=e=>e>0?1:-1,n=a.getDirectionOfProjection(),o=Math.max(...n.map(Math.abs));a.setPhysicalViewNorth(n.map((t=>Math.abs(t)===o?e(t):0)));const r=a.getViewUp(),l=Math.max(...r.map(Math.abs));a.setPhysicalViewUp(r.map((t=>Math.abs(t)===l?e(t):0))),s.startVR()}else s.stopVR(),t.setOrientationAxesVisibility(this.orientationAxis)}},...(0,s.nv)({setCollapseDatasetPanels:"collapseDatasetPanels"}),...(0,s.nv)("views",{setBackgroundColor:(e,t)=>e("setGlobalBackground",t),setOrientationAxis:(e,t)=>e("setAxisVisible",t),setOrientationPreset:(e,t)=>e("setAxisPreset",t),setAxisType:(e,t)=>e("setAxisType",t),setAnnotationOpacity:(e,t)=>e("setAnnotationOpacity",t),setInteractionStyle3D:(e,t)=>e("setInteractionStyle3D",t),setFirstPersonMovementSpeed:(e,t)=>e("setFirstPersonMovementSpeed",t),resetFirstPersonMovementSpeed:e=>e("resetFirstPersonMovementSpeed"),setMaxTextureLODSize:(e,t)=>e("setMaxTextureLODSize",t)}),...(0,s.nv)("widgets",{setDistanceUnitSymbol:(e,t)=>e("setDistanceUnitSymbol",t),setDistanceUnitFactor:(e,t)=>e("setDistanceUnitFactor",t)})}},v={container:"GlobalSettings-container-_zf5o",card:"GlobalSettings-card-zqI_u",heading:"GlobalSettings-heading-ftN6X",divider:"GlobalSettings-divider-_12Zl",slimInput:"GlobalSettings-slimInput-tiNot"},m=a(581),g=a(3),h=a.n(g),y=a(601),f=a(637),b=a(644),x=a(608),w=a(611),_=a(640),S=a(652),P=a(661),k=a(634);e=a.hmd(e);var C={};e.hot,e.hot;var V=(0,m.Z)(p,i,[],!1,(function(e){C.$style=v.locals||v,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return C.$style}})}),null,null);h()(V,{VCard:y.Z,VContainer:f.Z,VDivider:b.Z,VFlex:x.Z,VLayout:w.Z,VSelect:_.Z,VSlider:S.Z,VSwitch:P.Z,VTextField:k.Z}),V.options.__file="src/components/core/GlobalSettings/index.vue";var I=V.exports},315:function(e,t,a){"use strict";a.d(t,{Z:function(){return P}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"grey lighten-3",attrs:{id:e.$style.root}},[a("v-responsive",{staticClass:"grey darken-3"},[a("v-container",{attrs:{"grid-list-lg":"","fill-height":"",id:e.$style.banner}},[a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs6:!e.$vuetify.breakpoint.smAndDown,xs12:e.$vuetify.breakpoint.smAndDown}},[a("v-card",{attrs:{flat:"",dark:"",color:"transparent"}},[a("v-card-title",{staticClass:"display-1 text-center pv-break-word"},[e._v("\n              Visualize your data with Kitware Glance\n            ")]),e._v(" "),a("v-card-text",[e._v("\n              A general purpose standalone web application by\n              "),a("a",{staticClass:"indigo--text text--lighten-3",attrs:{target:"_blank",href:"https://www.kitware.com/",rel:"noopener noreferrer"}},[e._v("Kitware, Inc.")]),e._v("\n              that can be used to visualize many data types.\n              It is also a great framework for building custom\n              viewers on the web which can involve remote services.\n            ")])],1)],1),e._v(" "),e.$vuetify.breakpoint.smAndDown?e._e():a("v-flex",{key:"if-large-enough-screen",attrs:{xs6:"","fill-height":""}},[a("drag-and-drop",{class:e.$style.dnd,attrs:{enabled:""},on:{drop:function(t){return e.$emit("open-files",t)}},scopedSlots:e._u([{key:"default",fn:function(t){var i,s=t.dragHover;return[a("div",{class:(i={},i[e.$style.fileUpload]=!0,i[e.$style.fileUploadHover]=s,i),on:{click:function(t){return t.stopPropagation(),e.$emit("open")}}},[a("div",{staticClass:"white--text body-2",class:e.$style.fileUploadContents},[a("v-btn",{attrs:{color:"primary",raised:"false"},on:{click:function(t){return t.stopPropagation(),e.$emit("open")}}},[a("span",{staticClass:"text-uppercase mr-2"},s?[e._v("drop your file")]:[e._v("open a file")]),e._v(" "),a("v-icon",[e._v("mdi-folder-outline")])],1),e._v(" "),a("div",{staticClass:"pv-no-select mt-2"},[e._v("\n                    or drop one anywhere in this box to begin.\n                  ")])],1)])]}}],null,!1,1487670387)})],1)],1)],1)],1),e._v(" "),a("v-container",{staticClass:"mt-4 pv-no-select",attrs:{"grid-list-lg":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("span",{staticClass:"title"},[e._v("Sample Data")])]),e._v(" "),e._l(e.samples,(function(t,i){return a("v-flex",{key:i,attrs:{xs4:e.$vuetify.breakpoint.mdAndUp,xs6:e.$vuetify.breakpoint.sm,xs12:e.$vuetify.breakpoint.xs}},[a("v-card",{class:e.$style.sampleData,attrs:{flat:"",tile:""}},[a("v-img",{attrs:{src:t.image,height:"300px"}}),e._v(" "),a("div",{class:e.$style.linkOverlay,on:{click:function(a){return a.stopPropagation(),e.openSample(t)}}},[a("div",{staticClass:"body-2",class:e.$style.linkOverlayText},[e._v("\n              "+e._s(t.label)+" ("+e._s(t.size)+")\n              "),t.description?a("div",{class:e.$style.description},[e._v("\n                "+e._s(t.description)+"\n              ")]):e._e(),e._v(" "),t.acknowledgement?a("div",{class:e.$style.acknowledgement},[e._v("\n                "+e._s(t.acknowledgement)+"\n              ")]):e._e()])])],1)],1)}))],2)],1),e._v(" "),a("v-footer",{staticClass:"d-flex flex-column",attrs:{height:"48px",color:"transparent"}},[a("div",{staticClass:"mb-2 text-center grey--text text--darken-2"},[a("div",[e._v(" "+e._s((new Date).getFullYear())+"  Kitware, Inc.")]),e._v(" "),a("div",[e._v("Glance ("+e._s(e.version)+")")])])])],1)};i._withStripped=!0;var s={Aneurism:a(530),CAD:a(531),Engine:a(532),F1:a(533),Lidar:a(534),Lysozyme:a(535),SinglePin:a(536),Tooth:a(537),Covid19:a(538)};const n=window.GLANCE_VERSION&&"master"!==window.GLANCE_VERSION?window.GLANCE_VERSION:"master";var o=[{label:"COVID-19",image:s.Covid19,size:"8.4 MB",description:"Lung CT Scan of a COVID-19 patient exhibiting ground-glass opacities (GGO)",acknowledgement:'Joseph Paul Cohen and Paul Morrison and Lan Dao, "COVID-19 image data collection", arXiv:2003.11597, 2020',datasets:[{name:"covid19.glance",url:`https://raw.githubusercontent.com/Kitware/paraview-glance/${n}/data/covid19.glance`}]},{label:"202-t + Edges",image:s.CAD,size:"112 KB",description:"T-Handle, Flanged Base, Solid Bar",acknowledgement:"https://www.traceparts.com/",datasets:[{name:"202-t.glance",url:`https://raw.githubusercontent.com/Kitware/paraview-glance/${n}/data/202-t.glance`}]},{label:"Lysozyme.pdb",image:s.Lysozyme,size:"135 KB",description:"an enzyme that catalyzes the destruction of the cell walls of certain bacteria, occurring notably in tears and egg white.",datasets:[{name:"Lysozyme.glance",url:`https://raw.githubusercontent.com/Kitware/paraview-glance/${n}/data/lysozyme.glance`}]},{label:"Tooth.nrrd",image:s.Tooth,size:"1.6 MB",datasets:[{name:"Tooth.glance",url:`https://raw.githubusercontent.com/Kitware/paraview-glance/${n}/data/Tooth.glance`}]},{label:"Engine",image:s.Engine,size:"3.1 MB",datasets:[{name:"Engine.glance",url:`https://raw.githubusercontent.com/Kitware/paraview-glance/${n}/data/Engine.glance`}],acknowledgement:"General Electric",description:"CT scan of two cylinders of an engine block."},{label:"lidar.vtp",image:s.Lidar,size:"5.3 MB",description:"Aerial LIDAR data",datasets:[{name:"lidar.glance",url:`https://raw.githubusercontent.com/Kitware/paraview-glance/${n}/data/lidar.glance`}]},{label:"SinglePin.vtp",image:s.SinglePin,size:"8.2 MB",description:"Mixing Vane inside reactor pin for cooling",acknowledgement:"Simulation data from Hydra-TH",datasets:[{name:"SinglePin.glance",url:`https://raw.githubusercontent.com/Kitware/paraview-glance/${n}/data/SinglePin.glance`}]},{label:"Formula 1",image:s.F1,size:"6.7 MB",datasets:[{name:"F1.glance",url:`https://raw.githubusercontent.com/Kitware/paraview-glance/${n}/data/F1.glance`}]},{label:"Aneurysm.vti",image:s.Aneurism,size:"348 KB",datasets:[{name:"Aneurism.glance",url:`https://raw.githubusercontent.com/Kitware/paraview-glance/${n}/data/Aneurism.glance`}],acknowledgement:"Philips Research, Hamburg, Germany",description:"Rotational C-arm x-ray scan of the arteries of the right half of a human head. A contrast agent was injected into the blood and an aneurism is present."}],r={name:"Landing",components:{DragAndDrop:a(175).Z},data:()=>({samples:o,version:window.GLANCE_VERSION||"no version available"}),methods:{openSample(e){const t=[],a=[];for(let i=0;i<e.datasets.length;++i)t.push(e.datasets[i].url),a.push(e.datasets[i].name);this.$emit("open-urls",e.label,t,a)}}},l={root:"Landing-root-MDMR5",dnd:"Landing-dnd-wOnpL",banner:"Landing-banner-glRow",fileUpload:"Landing-fileUpload-yjnik",fileUploadHover:"Landing-fileUploadHover-gEEmi",fileUploadContents:"Landing-fileUploadContents-G0R9l",sampleData:"Landing-sampleData-LDmnt",linkOverlay:"Landing-linkOverlay-HstJ9",acknowledgement:"Landing-acknowledgement-jf6A6",description:"Landing-description-_xRo0",linkOverlayText:"Landing-linkOverlayText-o_OYL"},c=a(581),d=a(3),u=a.n(d),p=a(582),v=a(601),m=a(607),g=a(637),h=a(608),y=a(688),f=a(610),b=a(685),x=a(611),w=a(686);e=a.hmd(e);var _={};e.hot,e.hot;var S=(0,c.Z)(r,i,[],!1,(function(e){_.$style=l.locals||l,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return _.$style}})}),null,null);u()(S,{VBtn:p.Z,VCard:v.Z,VCardText:m.ZB,VCardTitle:m.EB,VContainer:g.Z,VFlex:h.Z,VFooter:y.Z,VIcon:f.Z,VImg:b.Z,VLayout:x.Z,VResponsive:w.Z}),S.options.__file="src/components/core/Landing/index.vue";var P=S.exports},316:function(e,t,a){"use strict";a.d(t,{Z:function(){return g}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{class:e.$style.container,attrs:{fluid:""}},[a("div",{class:e.$style.grid,style:{gridTemplateRows:e.gridTemplateRows,gridTemplateColumns:e.gridTemplateColumns}},e._l(e.views,(function(t,i){return a("div",{directives:[{name:"show",rawName:"v-show",value:i<e.visibleCount,expression:"index < visibleCount"}],key:i+"::"+t,class:e.$style.viewContainer},[a("vtk-view",{attrs:{"view-type":t,"layout-index":i,"layout-count":e.visibleCount,"background-color":e.backgroundColors[t]},on:{"bg-change":function(t){return e.setViewBackground(e.view,arguments[0])}}})],1)})),0)])};i._withStripped=!0;var s=a(612),n=a(317),o=a(462),r={name:"LayoutView",components:{VtkView:n.Z},computed:{smallScreen(){return this.$vuetify.breakpoint.width<o.u3.md},gridTemplateRows(){return this.visibleCount<4?"1fr":"1fr 1fr"},gridTemplateColumns(){return this.visibleCount<2?"1fr":"1fr 1fr"},...(0,s.rn)("views",{views:e=>e.viewOrder,backgroundColors:e=>e.backgroundColors,visibleCount(e){return this.smallScreen?1:e.visibleCount}})},methods:{getView(e){const[t,a]=e.split(":");return this.$proxyManager.getViews().find((e=>e.getProxyName()===t&&(!a||e.getName()===a)))},...(0,s.nv)("views",["updateLayout"])},updated(){this.$proxyManager.resizeAllViews()}},l={container:"LayoutView-container-_kxKm",grid:"LayoutView-grid-T7vhg",viewContainer:"LayoutView-viewContainer-kpqmi"},c=a(581),d=a(3),u=a.n(d),p=a(637);e=a.hmd(e);var v={};e.hot,e.hot;var m=(0,c.Z)(r,i,[],!1,(function(e){v.$style=l.locals||l,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return v.$style}})}),null,null);u()(m,{VContainer:p.Z}),m.options.__file="src/components/core/LayoutView/index.vue";var g=m.exports},178:function(e,t,a){"use strict";a.d(t,{Z:function(){return x}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{attrs:{flat:""}},[a("v-card-title",[a("span",{staticClass:"body-2"},[e._v("Enter your raw data specs below:")])]),e._v(" "),a("v-card-text",[a("v-container",{staticClass:"pa-0",attrs:{"grid-list-xs":""}},[a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs3:""}},[e._v("Filename:")]),e._v(" "),a("v-flex",{staticClass:"body-1",attrs:{xs9:""}},[e._v(e._s(e.file.name))])],1),e._v(" "),a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs3:""}},[e._v("File size:")]),e._v(" "),a("v-flex",{staticClass:"body-1",attrs:{xs9:""}},[e._v(e._s(e.file.size)+" bytes")])],1),e._v(" "),a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs3:""}},[e._v("Data type:")]),e._v(" "),a("v-flex",{staticClass:"body-1",attrs:{xs9:""}},[a("v-select",{attrs:{items:e.allDataTypes,"item-text":"label","item-value":"label","single-line":"","return-object":""},model:{value:e.dataType,callback:function(t){e.dataType=t},expression:"dataType"}})],1)],1),e._v(" "),a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs3:""}},[e._v("Dimensions:")]),e._v(" "),e._l(3,(function(t){return a("v-flex",{key:t,staticClass:"body-1",attrs:{xs3:""}},[a("v-text-field",{attrs:{type:"number",min:"1",max:e.file.size},model:{value:e.dimensions[t-1],callback:function(a){e.$set(e.dimensions,t-1,a)},expression:"dimensions[i-1]"}})],1)}))],2),e._v(" "),a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs3:""}},[e._v("Spacing:")]),e._v(" "),e._l(3,(function(t){return a("v-flex",{key:t,staticClass:"body-1",attrs:{xs3:""}},[a("v-text-field",{attrs:{type:"number",min:"1",max:e.file.size},model:{value:e.spacing[t-1],callback:function(a){e.$set(e.spacing,t-1,a)},expression:"spacing[i-1]"}})],1)}))],2),e._v(" "),a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs3:""}},[e._v("Effective size:")]),e._v(" "),a("v-flex",{attrs:{xs3:""}},[e._v(e._s(e.effectiveSize))]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[e.effectiveSize!==e.file.size?a("span",{staticClass:"red--text"},[e._v("\n            Effective size does not match total size!\n          ")]):a("span",{staticClass:"teal--text"},[e._v("Effective size matches file size")])])],1)],1)],1)],1)};i._withStripped=!0;const s=[{label:"Integer 8",constructor:Int8Array,size:1},{label:"Unsigned Integer 8",constructor:Uint8Array,size:1},{label:"Integer 16",constructor:Int16Array,size:2},{label:"Unsigned Integer 16",constructor:Uint16Array,size:2},{label:"Integer 32",constructor:Int32Array,size:4},{label:"Unsigned Integer 32",constructor:Uint32Array,size:4},{label:"Float",constructor:Float32Array,size:4},{label:"Double",constructor:Float64Array,size:8}];function n(){this.effectiveSize===this.file.size?this.$emit("change",{dimensions:this.dimensions,spacing:this.spacing,dataType:this.dataType,effectiveSize:this.effectiveSize}):this.$emit("change",null)}var o={name:"RawFileReader",props:{file:{type:File,required:!0}},data:()=>({allDataTypes:s,dataType:s[0],dimensions:[1,1,1],spacing:[1,1,1]}),watch:{dimensions:n,spacing:n,dataType:n},computed:{effectiveSize(){return this.dimensions.reduce(((e,t)=>e*t),1)*this.dataType.size}}},r={toolbarButton:"RawFileReader-toolbarButton-Qwep7",overlay:"RawFileReader-overlay-EEhkR",overlayHidden:"RawFileReader-overlayHidden-A2Yvq",overlayText:"RawFileReader-overlayText-iq_lG"},l=a(581),c=a(3),d=a.n(c),u=a(601),p=a(607),v=a(637),m=a(608),g=a(611),h=a(640),y=a(634);e=a.hmd(e);var f={};e.hot,e.hot;var b=(0,l.Z)(o,i,[],!1,(function(e){f.$style=r.locals||r,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return f.$style}})}),null,null);d()(b,{VCard:u.Z,VCardText:p.ZB,VCardTitle:p.EB,VContainer:v.Z,VFlex:m.Z,VLayout:g.Z,VSelect:h.Z,VTextField:y.Z}),b.options.__file="src/components/core/RawFileReader/index.vue";var x=b.exports},320:function(e,t,a){"use strict";a.d(t,{Z:function(){return V}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(e.dialogType,{tag:"component",attrs:{value:e.showDialog,"max-width":"60%"},on:{input:e.close}},[e.screenshot?a("v-card",{attrs:{flat:""}},[a("v-card-title",[e._v("Save Screenshot")]),e._v(" "),a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",e._b({},"v-flex",e.flexLayout,!1),[a("v-img",{class:e.$style.imagePreview,attrs:{src:e.imageUrl,contain:"",height:e.smallScreen?"125px":"250px"}})],1),e._v(" "),a("v-flex",e._b({},"v-flex",e.flexLayout,!1),[a("v-container",{class:{"pa-1":e.smallScreen}},[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs9:""}},[a("v-text-field",{attrs:{label:"Filename"},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.save(),e.close()}},model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-select",{attrs:{label:"File type","hide-details":"","single-line":"",items:e.fileTypes},model:{value:e.fileType,callback:function(t){e.fileType=t},expression:"fileType"}})],1)],1),e._v(" "),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-checkbox",{attrs:{label:"Transparent background"},model:{value:e.transparentBackground,callback:function(t){e.transparentBackground=t},expression:"transparentBackground"}})],1)],1)],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{text:"",color:"red"},nativeOn:{click:function(t){return e.close.apply(null,arguments)}}},[a("span",[e._v("Cancel")])]),e._v(" "),a("v-btn",{attrs:{color:"secondary"},nativeOn:{click:function(t){e.save(),e.close()}}},[a("span",[e._v("Save")])]),e._v(" "),a("v-btn",{attrs:{color:"primary",href:e.imageUrl,download:e.filename+e.fileType},nativeOn:{click:function(t){return e.close.apply(null,arguments)}}},[a("span",[e._v("Download")])])],1)],1):e._e()],1)};i._withStripped=!0;var s=a(612),n=a(690),o=a(622);const r=[".png",".jpeg"];function l(){const e=new Image;e.addEventListener("load",(()=>{const t=this.canvas.getContext("2d");t.clearRect(0,0,this.canvas.width,this.canvas.height),this.canvas.width=e.width,this.canvas.height=e.height,this.transparentBackground||(t.fillStyle=this.backgroundToFillStyle(this.screenshot.viewData.background),t.fillRect(0,0,this.canvas.width,this.canvas.height)),t.drawImage(e,0,0);const a=`image/${this.fileType.substr(1)}`;this.imageUrl=this.canvas.toDataURL(a)})),e.src=this.screenshot.imgSrc}var c={name:"ScreenshotDialog",components:{VBottomSheet:n.Z,VDialog:o.Z},data:()=>({filename:"",imageUrl:"",transparentBackground:!1,fileType:"",fileTypes:r}),computed:{smallScreen(){return this.$vuetify.breakpoint.smAndDown},landscapeScreen(){const{width:e,height:t}=this.$vuetify.breakpoint;return e>t},dialogType(){return this.smallScreen?"v-bottom-sheet":"v-dialog"},flexLayout(){return{[!this.smallScreen||this.landscapeScreen?"xs6":"xs12"]:!0}},...(0,s.rn)({screenshot:e=>e.pendingScreenshot,showDialog:e=>e.screenshotDialog})},watch:{transparentBackground:l,fileType:l,showDialog(e){e&&(this.filename="Untitled",this.fileType=".png",this.generateImage())}},methods:{generateImage:l,backgroundToFillStyle:function(e){if(e.startsWith("linear-gradient(")){const t=e.substring(e.indexOf("(")+1,e.indexOf(")")).split(","),a=this.canvas.getContext("2d").createLinearGradient(0,0,0,this.canvas.height);return a.addColorStop(0,t[0]),a.addColorStop(1,t[1]),a}return e},save:function(){this.$emit("save",this.screenshot.viewName,{image:this.imageUrl,filename:this.filename+this.fileType})},...(0,s.nv)({close:"closeScreenshotDialog"})},created(){this.canvas=document.createElement("canvas")}},d={imagePreview:"ScreenshotDialog-imagePreview-UShNL"},u=a(581),p=a(3),v=a.n(p),m=a(582),g=a(601),h=a(607),y=a(613),f=a(637),b=a(608),x=a(685),w=a(611),_=a(640),S=a(653),P=a(634);e=a.hmd(e);var k={};e.hot,e.hot;var C=(0,u.Z)(c,i,[],!1,(function(e){k.$style=d.locals||d,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return k.$style}})}),null,null);v()(C,{VBtn:m.Z,VCard:g.Z,VCardActions:h.h7,VCardTitle:h.EB,VCheckbox:y.Z,VContainer:f.Z,VFlex:b.Z,VImg:x.Z,VLayout:w.Z,VSelect:_.Z,VSpacer:S.Z,VTextField:P.Z}),C.options.__file="src/components/core/Screenshots/ScreenshotDialog/index.vue";var V=C.exports},319:function(e,t,a){"use strict";a.d(t,{Z:function(){return S}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.$style.container},[a("v-toolbar",{staticClass:"flex-grow-0",attrs:{color:"transparent",flat:""}},[a("v-toolbar-title",[e._v("Screenshots")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:""},on:{click:function(t){return e.$emit("close")}}},[a("v-icon",[e._v("mdi-arrow-right")])],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.atLeastOneScreenshot,expression:"!atLeastOneScreenshot"}],class:e.$style.emptyState},[a("v-icon",{attrs:{large:""}},[e._v("mdi-image-multiple")]),e._v(" "),a("span",{staticClass:"subtitle-1 grey--text text--darken-1"},[e._v("No screenshots yet!")]),e._v(" "),a("v-btn",{staticClass:"mt-4",attrs:{disabled:!e.activeView},on:{click:e.takeScreenshot}},[e._v("\n      Capture Active View\n    ")])],1),e._v(" "),a("v-list",{directives:[{name:"show",rawName:"v-show",value:e.atLeastOneScreenshot,expression:"atLeastOneScreenshot"}]},e._l(Object.keys(e.screenshots),(function(t){return a("v-list-group",{key:t,attrs:{"prepend-icon":"mdi-folder","no-action":""},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-item-content",[a("v-list-item-title",[e._v("\n            "+e._s(t)+" ("+e._s(e.screenshots[t].length)+")\n          ")])],1)]},proxy:!0}],null,!0)},[e._v(" "),e._l(e.screenshots[t],(function(i,s){return a("v-tooltip",{key:s,attrs:{left:"",disabled:e.smallScreen,"content-class":e.$style.hoverTooltip},scopedSlots:e._u([{key:"activator",fn:function(n){var o=n.on;return[a("v-list-item",e._g({attrs:{link:""},on:{click:function(a){return e.viewScreenshot(t,s)}}},o),[a("v-list-item-title",{class:e.$style.filename,attrs:{title:i.filename}},[e._v("\n              "+e._s(i.filename)+"\n            ")]),e._v(" "),a("v-list-item-action",{class:e.$style.action},[a("v-btn",{attrs:{icon:"",href:i.image,download:i.filename},on:{click:function(e){e.stopPropagation()}}},[a("v-icon",[e._v("mdi-download")])],1)],1),e._v(" "),a("v-list-item-action",{class:e.$style.action},[a("v-btn",{attrs:{icon:""},on:{click:[function(a){return e.deleteScreenshot(t,s)},function(e){e.stopPropagation()}]}},[a("v-icon",[e._v("mdi-delete")])],1)],1)],1)]}}],null,!0)},[e._v(" "),a("img",{class:e.$style.hoverImage,attrs:{src:i.image}})])}))],2)})),1),e._v(" "),a("screenshot-dialog",{on:{save:e.addScreenshot}})],1)};i._withStripped=!0;var s=a(612);var n={name:"Screenshots",components:{ScreenshotDialog:a(320).Z},data:()=>({screenshots:{},activeViewId:-1}),computed:{atLeastOneScreenshot(){const e=Object.keys(this.screenshots);for(let t=0;t<e.length;++t){const a=this.screenshots[e[t]];if(a&&a.length)return!0}return!1},smallScreen(){return this.$vuetify.breakpoint.smAndDown},activeView(){return this.$proxyManager.getProxyById(this.activeViewId)}},proxyManagerHooks:{onActiveViewChange(e){this.activeViewId=e.getProxyId()}},mounted(){const e=this.$proxyManager.getActiveView();e&&(this.activeViewId=e.getProxyId())},methods:{addScreenshot:function(e,t){e in this.screenshots||this.$set(this.screenshots,e,[]),this.screenshots[e].push(t);const a=this.getTotalCount();this.$emit("screenshot-count",a)},deleteScreenshot:function(e,t){this.screenshots[e]&&this.screenshots[e].splice(t,1);const a=this.getTotalCount();this.$emit("screenshot-count",a)},viewScreenshot:function(e,t){if(this.screenshots[e]){const a=this.screenshots[e][t],i=new Image;i.src=a.image;const s=window.open("","_blank");s.document.write(i.outerHTML),s.document.title=a.filename,window.focus()}},getTotalCount:function(){return Object.values(this.screenshots).map((e=>e.length)).reduce(((e,t)=>e+t))},...(0,s.nv)({takeScreenshot(e){return e("takeScreenshot",this.activeView)}})}},o={container:"Screenshots-container-QUtU6",emptyState:"Screenshots-emptyState-A_kb2",filename:"Screenshots-filename-_4xgf",action:"Screenshots-action-BSST7",hoverTooltip:"Screenshots-hoverTooltip-WDQlH",hoverImage:"Screenshots-hoverImage-_Qhil"},r=a(581),l=a(3),c=a.n(l),d=a(582),u=a(610),p=a(647),v=a(648),m=a(641),g=a(642),h=a(646),y=a(653),f=a(684),b=a(687),x=a(654);e=a.hmd(e);var w={};e.hot,e.hot;var _=(0,r.Z)(n,i,[],!1,(function(e){w.$style=o.locals||o,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return w.$style}})}),null,null);c()(_,{VBtn:d.Z,VIcon:u.Z,VList:p.Z,VListGroup:v.Z,VListItem:m.Z,VListItemAction:g.Z,VListItemContent:h.km,VListItemTitle:h.V9,VSpacer:y.Z,VToolbar:f.Z,VToolbarTitle:b.qW,VTooltip:x.Z}),_.options.__file="src/components/core/Screenshots/index.vue";var S=_.exports},321:function(e,t,a){"use strict";a.d(t,{Z:function(){return p}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.fileGenerationInProgress?e.$style.visible:e.$style.hidden},[a("v-progress-circular",{attrs:{indeterminate:"",color:"green",size:70,width:7}}),e._v(" "),a("label",{class:e.$style.label},[e._v("\n    Compressing..."),a("br"),e._v(e._s(e.fileName)+"\n  ")])],1)};i._withStripped=!0;var s={name:"StateFileGenerator",computed:(0,a(612).rn)({proxyManager:"proxyManager",fileGenerationInProgress:e=>!!e.savingStateName,fileName:"savingStateName"})},n={hidden:"StateFileGenerator-hidden-W1iZI",visible:"StateFileGenerator-visible-mpB0c",label:"StateFileGenerator-label-kWzey"},o=a(581),r=a(3),l=a.n(r),c=a(599);e=a.hmd(e);var d={};e.hot,e.hot;var u=(0,o.Z)(s,i,[],!1,(function(e){d.$style=n.locals||n,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return d.$style}})}),null,null);l()(u,{VProgressCircular:c.Z}),u.options.__file="src/components/core/StateFileGenerator/index.vue";var p=u.exports},318:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var i=function(){var e,t=this,a=t.$createElement,i=t._self._c||a;return i("div",{class:(e={},e[t.$style.sheet]=!0,e[t.$style.visible]=t.value,e),style:{top:t.sheetTop+"px"}},[i("div",{ref:"slotWrapper",staticClass:"grey darken-3 white--text",class:t.$style.slotWrapper,style:{transform:"translateY("+(t.visible?0:"100%")+")"}},[t._t("default")],2)])};i._withStripped=!0;var s={props:{value:{type:Boolean,default:!1}},data:()=>({sheetTop:0,visible:!1}),methods:{onMouseDown:function(e){this.$el.contains(e.target)||this.$emit("input",!1)},updateHeight:function(){this.sheetTop=-this.$refs.slotWrapper.offsetHeight}},watch:{value:function(e,t){e&&!t?(document.addEventListener("mousedown",this.onMouseDown,!0),this.$nextTick((()=>{this.updateHeight(),this.visible=!0}))):(document.removeEventListener("mousedown",this.onMouseDown,!0),this.visible=!1)}},mounted(){window.addEventListener("resize",this.updateHeight)},beforeDestroy(){window.removeEventListener("resize",this.updateHeight)}},n={sheet:"ToolbarSheet-sheet-xndXH",slotWrapper:"ToolbarSheet-slotWrapper-NSeT7",visible:"ToolbarSheet-visible-dRAdL"},o=a(581);e=a.hmd(e);var r={};e.hot,e.hot;var l=(0,o.Z)(s,i,[],!1,(function(e){r.$style=n.locals||n,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return r.$style}})}),null,null);l.options.__file="src/components/core/ToolbarSheet/index.vue";var c=l.exports},317:function(e,t,a){"use strict";a.d(t,{Z:function(){return O}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{class:e.$style.container,attrs:{fluid:""}},[a("v-layout",{class:e.$style.floatToolbar,attrs:{column:""}},[a("v-tooltip",{attrs:{left:"",disabled:e.smallScreen},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({attrs:{icon:"",dark:""},on:{click:function(t){return e.resetCamera()}}},i),[a("v-icon",[e._v("mdi-image-filter-center-focus")])],1)]}}])},[a("span",{staticClass:"pv-no-select"},[e._v("Reset camera")])]),e._v(" "),a("v-tooltip",{attrs:{left:"",disabled:e.smallScreen},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({attrs:{icon:"",dark:""},on:{click:function(t){return e.rollLeft()}}},i),[a("v-icon",[e._v("mdi-rotate-left")])],1)]}}])},[a("span",{staticClass:"pv-no-select"},[e._v("Rotate camera left 90")])]),e._v(" "),a("v-tooltip",{attrs:{left:"",disabled:e.smallScreen},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({attrs:{icon:"",dark:""},on:{click:function(t){return e.rollRight()}}},i),[a("v-icon",[e._v("mdi-rotate-right")])],1)]}}])},[a("span",{staticClass:"pv-no-select"},[e._v("Rotate camera right 90")])]),e._v(" "),"View3D"===e.type?a("v-tooltip",{attrs:{left:"",disabled:e.smallScreen},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({attrs:{icon:"",dark:""},on:{click:function(t){return e.updateOrientation("x")}}},i),[e._v("\n          "+e._s(e.orientationLabels[0])+"\n        ")])]}}],null,!1,2132146526)},[a("span",{staticClass:"pv-no-select"},[e._v("Reset Camera to Orientation "+e._s(e.orientationLabels[0]))])]):e._e(),e._v(" "),"View3D"===e.type?a("v-tooltip",{attrs:{left:"",disabled:e.smallScreen},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({attrs:{icon:"",dark:""},on:{click:function(t){return e.updateOrientation("y")}}},i),[e._v("\n          "+e._s(e.orientationLabels[1])+"\n        ")])]}}],null,!1,1991408638)},[a("span",{staticClass:"pv-no-select"},[e._v("Reset Camera to Orientation "+e._s(e.orientationLabels[1]))])]):e._e(),e._v(" "),"View3D"===e.type?a("v-tooltip",{attrs:{left:"",disabled:e.smallScreen},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({attrs:{icon:"",dark:""},on:{click:function(t){return e.updateOrientation("z")}}},i),[e._v("\n          "+e._s(e.orientationLabels[2])+"\n        ")])]}}],null,!1,617031326)},[a("span",{staticClass:"pv-no-select"},[e._v("Reset Camera to Orientation "+e._s(e.orientationLabels[2]))])]):e._e()],1),e._v(" "),a("v-layout",{attrs:{column:"","fill-height":""}},[a("v-flex",{staticClass:"js-view",class:e.$style.vtkView,style:{background:e.backgroundColor},attrs:{"fill-height":""},on:{mousedown:function(t){return e.view.activate()}}}),e._v(" "),e.isActive?a("div",{class:e.$style.activeView}):e._e(),e._v(" "),a("tool-svg-target",{class:e.$style.svgLayer,attrs:{"view-proxy-id":e.viewProxyId,viewBox:e.svgViewBox}}),e._v(" "),a("div",{class:e.$style.toolbarWrapper},[a("toolbar-sheet",{model:{value:e.backgroundSheet,callback:function(t){e.backgroundSheet=t},expression:"backgroundSheet"}},[a("v-container",{staticClass:"mr-0",attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:""}},[a("v-spacer"),e._v(" "),a("palette-picker",{attrs:{size:24,palette:e.palette,value:e.backgroundColor},on:{input:e.changeBackgroundColor}})],1)],1)],1),e._v(" "),a("v-toolbar",{class:e.$style.smallToolbar,attrs:{dark:"",height:"45px"}},[a("v-select",{class:e.$style.viewTypeSelector,attrs:{dense:"",flat:"","hide-details":"",items:e.viewTypeItems,value:e.viewType},on:{change:e.changeViewType}}),e._v(" "),a("v-spacer"),e._v(" "),"View3D"===e.type?a("v-tooltip",{attrs:{top:"",disabled:e.smallScreen||e.viewPointMenuVisible},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-menu",{attrs:{"offset-y":"",top:"",left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({directives:[{name:"show",rawName:"v-show",value:e.cameraViewPoints.length,expression:"cameraViewPoints.length"}],class:e.$style.button,attrs:{icon:"",disabled:e.viewPointMenuVisible}},Object.assign({},i,s)),[a("v-icon",[e._v("mdi-camera-switch")])],1)]}}],null,!0),model:{value:e.viewPointMenuVisible,callback:function(t){e.viewPointMenuVisible=t},expression:"viewPointMenuVisible"}},[e._v(" "),a("v-list",e._l(e.cameraViewPoints,(function(t,i){return a("v-list-item",{key:i,on:{click:function(a){return e.changeCameraViewPoint(t)}}},[a("v-list-item-title",[e._v(e._s(t))])],1)})),1)],1)]}}],null,!1,205776964)},[e._v(" "),a("span",{staticClass:"pv-no-select"},[e._v("Change View Point")])]):e._e(),e._v(" "),a("v-tooltip",{attrs:{top:"",disabled:e.smallScreen},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({class:e.$style.button,attrs:{icon:"",disabled:e.backgroundSheet||!e.view},on:{click:function(t){e.backgroundSheet=!e.backgroundSheet}}},i),[a("v-icon",[e._v("mdi-palette")])],1)]}}])},[a("span",{staticClass:"pv-no-select"},[e._v("Background color")])]),e._v(" "),a("v-tooltip",{attrs:{top:"",disabled:e.smallScreen},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({class:e.$style.button,attrs:{icon:""},on:{click:function(t){return e.screenCapture()}}},i),[a("v-icon",[e._v("mdi-camera-plus")])],1)]}}])},[a("span",{staticClass:"pv-no-select"},[e._v("Screenshot")])]),e._v(" "),!e.smallScreen&&e.singleViewButton?a("v-tooltip",{key:"singleView",attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({class:e.$style.button,attrs:{icon:""},on:{click:function(t){return e.singleView(e.layoutIndex)}}},i),[a("v-icon",[e._v("mdi-fullscreen")])],1)]}}],null,!1,3656610843)},[a("span",{staticClass:"pv-no-select"},[e._v("Single view")])]):e._e(),e._v(" "),!e.smallScreen&&e.flipViewButton?a("v-tooltip",{key:"flipView",attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({class:e.$style.button,attrs:{icon:""},on:{click:function(t){return e.splitView(e.layoutIndex)}}},i),[a("v-icon",[e._v("mdi-flip-horizontal")])],1)]}}],null,!1,1302128140)},[a("span",{staticClass:"pv-no-select"},[e._v("Split view")])]):e._e(),e._v(" "),!e.smallScreen&&e.quadViewButton?a("v-tooltip",{key:"quadView",attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({class:e.$style.button,attrs:{icon:""},on:{click:function(t){return e.quadView(e.layoutIndex)}}},i),[a("v-icon",[e._v("mdi-widgets")])],1)]}}],null,!1,1168904256)},[a("span",{staticClass:"pv-no-select"},[e._v("Quad view")])]):e._e()],1)],1)],1)],1)};i._withStripped=!0;var s=a(612),n=a(462),o=a(463),r=a(38),l=a(318),c=a(174),d=function(){var e=this,t=e.$createElement;return(e._self._c||t)("portal-target",{attrs:{name:e.portalName,multiple:"",tag:"svg","slot-props":{viewProxyId:e.viewProxyId}}})};d._withStripped=!0;var u={name:"ToolsSvg",components:{PortalTarget:a(83).YC},props:{viewProxyId:{type:String,required:!0}},computed:{portalName(){return`PortalTarget__${this.viewProxyId}`}},mounted(){this.$toolSvgPortal.addTarget(this.portalName)},beforeDestroy(){this.$toolSvgPortal.removeTarget(this.portalName)}},p=a(581),v=(0,p.Z)(u,d,[],!1,null,null,null);v.options.__file="src/components/tools/ToolSvgTarget.vue";var m=v.exports,g=a(30);var h={name:"VtkView",components:{PalettePicker:r.Z,ToolbarSheet:l.Z,ToolSvgTarget:m},props:{layoutIndex:{default:0,type:Number},layoutCount:{default:1,type:Number},viewType:{default:"",type:String},backgroundColor:{default:"#000",type:String}},data:()=>({internalViewId:-1,internalIsActive:!1,palette:c.qg,backgroundSheet:!1,inAnimation:!1,viewPointMenuVisible:!1,svgViewBox:"0 0 10 10"}),computed:{...(0,s.rn)("views",{viewProxyId(e){return e.viewTypeToId[this.viewType]},view(e){return this.$proxyManager.getProxyById(e.viewTypeToId[this.viewType])},axisVisible:e=>e.axisVisible,axisType:e=>e.axisType,axisPreset:e=>e.axisPreset,viewOrientation:e=>e.viewOrientation,viewTypeItems:e=>Object.entries(e.viewTypes).map((e=>{let[t,a]=e;return{text:a,value:t}}))}),...(0,s.Se)(["cameraViewPoints"]),type(){return this.viewType.split(":")[0]},name(){return this.viewType.split(":")[1]},orientationLabels(){return"lps"===this.axisPreset?["L","P","S"]:["X","Y","Z"]},smallScreen(){return this.$vuetify.breakpoint.width<n.u3.md},singleViewButton(){return this.layoutCount>1},flipViewButton(){return 1===this.layoutCount||4===this.layoutCount&&this.layoutIndex%2==1},quadViewButton(){return 2===this.layoutCount&&1===this.layoutIndex},isActive(){return this.internalIsActive||this.view===this.$proxyManager.getActiveView()}},watch:{view(e){this.tryMountView(e)}},proxyManagerHooks:{onActiveViewChange(e){this.internalIsActive=e===this.view},onActiveSourceChange(e){if(e&&"TrivialProducer"===e.getProxyName()&&this.view.bindRepresentationToManipulator){const t=this.$proxyManager.getRepresentation(e,this.view);this.view.bindRepresentationToManipulator(t),this.view.updateWidthHeightAnnotation()}},onProxyRegistrationChange(){const e=this.$proxyManager.getSources().find((e=>e.getDataset().isA&&e.getDataset().isA("vtkImageData"))),t=this.$proxyManager.getViews();for(let a=0;a<t.length;a++){const i=t[a];i.setCornerAnnotation("se",""),-1!==i.getProxyName().indexOf("2D")&&e?i.setCornerAnnotations(o.jB,!0):i.setCornerAnnotation("nw","")}}},mounted(){this.view&&this.tryMountView(this.view),this.resizeObserver=new ResizeObserver((()=>{this.resizeCurrentView()})),this.resizeObserver.observe(this.$el),this.resizeCurrentView()},beforeDestroy(){this.resizeObserver.disconnect(),this.view&&this.unmountView(this.view)},beforeUpdate(){this.view||this.changeViewType(o.H_)},methods:{tryMountView(e){if(this.internalViewId>-1){const e=this.$proxyManager.getProxyById(this.internalViewId);this.unmountView(e),this.internalViewId=-1}if(e){this.internalViewId=e.getProxyId(),e.setContainer(this.$el.querySelector(".js-view")),e.setOrientationAxesVisibility(this.axisVisible);const t=e.getReferenceByName("widgetManager");t&&(t.getPickingEnabled()||t.disablePicking())}},unmountView(e){e.setContainer(null)},changeViewType(e){this.swapViews({index:this.layoutIndex,viewType:e})},getAvailableActions(){return{single:this.layoutCount>1,split:this.layoutCount<4}},resetCamera(){this.view&&this.view.resetCamera()},rollLeft(){if(this.view){this.view.setAnimation(!0,this);let e=0,t=null;t=setInterval((()=>{e<90?(e+=2,this.view.rotate(2)):(clearInterval(t),this.view.setAnimation(!1,this))}),1)}},rollRight(){if(this.view){this.view.setAnimation(!0,this);let e=0,t=null;t=setInterval((()=>{e<90?(e+=2,this.view.rotate(-2)):(clearInterval(t),this.view.setAnimation(!1,this))}),1)}},updateOrientation(e){this.view&&!this.inAnimation&&(this.inAnimation=!0,(0,g.XC)(this.view,this.viewOrientation,e,"View3D"===this.type?100:0).then((()=>{this.inAnimation=!1})))},resizeCurrentView(){if(this.view){this.view.resize();const[e,t]=this.view.getOpenGLRenderWindow().getSize();this.svgViewBox=`0 0 ${e} ${t}`}},screenCapture(){this.takeScreenshot(this.view)},changeBackgroundColor(e){this.changeBackground({viewType:this.viewType,color:e})},...(0,s.nv)("views",["changeBackground","swapViews","singleView","splitView","quadView"]),...(0,s.nv)(["takeScreenshot","changeCameraViewPoint"])}},y={container:"VtkView-container-xoSjw",vtkView:"VtkView-vtkView-_T34c",viewTypeSelector:"VtkView-viewTypeSelector-Y_5cJ",floatToolbar:"VtkView-floatToolbar-_eQCk",toolbarWrapper:"VtkView-toolbarWrapper-_mikW",button:"VtkView-button-B4bSE",smallToolbar:"VtkView-smallToolbar-ZdwuJ",activeView:"VtkView-activeView-ES8oq",svgLayer:"VtkView-svgLayer-BTr2n"},f=a(3),b=a.n(f),x=a(582),w=a(637),_=a(608),S=a(610),P=a(611),k=a(647),C=a(641),V=a(646),I=a(638),T=a(640),$=a(653),D=a(684),M=a(654);e=a.hmd(e);var L={};e.hot,e.hot;var Z=(0,p.Z)(h,i,[],!1,(function(e){L.$style=y.locals||y,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return L.$style}})}),null,null);b()(Z,{VBtn:x.Z,VContainer:w.Z,VFlex:_.Z,VIcon:S.Z,VLayout:P.Z,VList:k.Z,VListItem:C.Z,VListItemTitle:V.V9,VMenu:I.Z,VSelect:T.Z,VSpacer:$.Z,VToolbar:D.Z,VTooltip:M.Z}),Z.options.__file="src/components/core/VtkView/index.vue";var O=Z.exports},167:function(e,t,a){"use strict";a.d(t,{Z:function(){return x}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{class:e.$style.container},[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("source-select",{attrs:{label:"Target volume",filterFunc:e.filterImages,bindToActiveSource:"",hideIfOneDataset:""},on:{input:e.setTargetVolume}})],1)],1)],1),e._v(" "),a("v-container",{class:e.$style.container},[a("v-layout",{attrs:{wrap:"","align-center":""}},[e.enabled?[a("v-btn",{attrs:{text:""},on:{click:e.disable}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-crop-free")]),e._v("\n          Hide\n        ")],1)]:[a("v-btn",{attrs:{text:"",disabled:!e.canCrop},on:{click:e.enable}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-crop")]),e._v("\n          Crop\n        ")],1)],e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{disabled:!e.canReset,text:""},on:{click:e.reset}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-replay")]),e._v("\n        Reset\n      ")],1)],2)],1)],1)};i._withStripped=!0;var s=a(612),n=a(77),o=a(30),r={name:"CropTool",components:{SourceSelect:n.Z},props:["enabled"],data:()=>({targetVolumeId:-1,widgetId:-1,canReset:!1}),computed:{targetVolume(){return this.$proxyManager.getProxyById(this.targetVolumeId)},cropProxy(){return this.$proxyManager.getProxyById(this.widgetId)},canCrop(){return this.targetVolumeId>-1},...(0,s.rn)("widgets",{allCropStates:"croppingStates"})},watch:{enabled(e){if(e){const e=this.getCropFilter(this.targetVolume);let t=this.cropProxy;t||(t=this.$proxyManager.getProxyInGroup("Widgets").find((e=>"Crop"===e.getProxyName())),t||(t=this.$proxyManager.createProxy("Widgets","Crop")),this.widgetId=t.getProxyId());const a=t.getWidget(),i=t.getWidgetState();a.setFaceHandlesEnabled(!1),a.setEdgeHandlesEnabled(!1);const s=this.targetVolume.getDataset();if(a.copyImageDataDescription(s),a.placeWidget(s.getBounds()),e.isResetAvailable()){i.getCroppingPlanes().setPlanes(e.getCroppingPlanes())}const n=i.getCroppingPlanes();this.stateSub.sub(n.onModified((()=>{const t=n.getPlanes();e.setCroppingPlanes(t),this.canReset=e.isResetAvailable(),this.storeCropState(this.targetVolumeId,t)}))),t.addToViews()}else this.cropProxy.removeFromViews(),this.$proxyManager.deleteProxy(this.cropProxy),this.widgetId=-1,this.stateSub.unsub()},targetVolumeId(e){if(this.enabled&&this.disable(),this.canReset=!1,-1!==e){const e=this.getCropFilter(this.targetVolume);this.canReset=e.isResetAvailable()}}},mounted(){this.stateSub=(0,o.y5)()},beforeDestroy(){this.stateSub.unsub()},methods:{filterImages:e=>"TrivialProducer"===e.getProxyName()&&"vtkImageData"===e.getType(),getCropFilter(e){return(0,o.aX)(this.$proxyManager,e)},setTargetVolume(e){this.targetVolumeId=e},enable(){this.$emit("enable",!0)},disable(){this.$emit("enable",!1)},reset(){if(this.targetVolume){const e=this.getCropFilter(this.targetVolume);if(e.reset(),this.canReset=!1,this.cropProxy){this.cropProxy.getWidgetState().getCroppingPlanes().setPlanes(e.getCroppingPlanes())}}},storeCropState(e,t){this.setCroppingState({datasetId:e,planes:t})},...(0,s.nv)("widgets",["setCroppingState"])}},l={container:"CropTool-container-O3Hvl"},c=a(581),d=a(3),u=a.n(d),p=a(582),v=a(637),m=a(608),g=a(610),h=a(611),y=a(653);e=a.hmd(e);var f={};e.hot,e.hot;var b=(0,c.Z)(r,i,[],!1,(function(e){f.$style=l.locals||l,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return f.$style}})}),null,null);u()(b,{VBtn:p.Z,VContainer:v.Z,VFlex:m.Z,VIcon:g.Z,VLayout:h.Z,VSpacer:y.Z}),b.options.__file="src/components/tools/CropTool/index.vue";var x=b.exports},128:function(e,t,a){"use strict";a.d(t,{Z:function(){return ve}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{class:e.$style.container},[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("source-select",{attrs:{label:"Target Dataset",filterFunc:e.filterImageData,bindToActiveSource:""},on:{input:e.setTargetDataset}})],1)],1),e._v(" "),a("v-card",{attrs:{flat:""}},[a("div",{class:e.$style.heading},[a("v-layout",{attrs:{"align-center":""}},[a("v-flex",{attrs:{xs10:""}},[a("span",{staticClass:"body-2"},[e._v("Tool List")])]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-btn-toggle",{class:e.$style.toolList,attrs:{value:e.activeToolIndex},on:{change:e.toggleActiveTool}},e._l(e.uiToolList,(function(t){return a("v-tooltip",{key:t.name,attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(i){var s=i.on;return[a("v-btn",e._g({class:e.$style.toolButton,attrs:{small:"",text:"",disabled:-1===e.targetPid}},s),[a("svg-icon",{class:e.$style.toolIcon,attrs:{icon:t.icon}})],1)]}}],null,!0)},[e._v("\n                "+e._s(t.name)+"\n              ")])})),1)],1)],1)],1),e._v(" "),a("v-divider",{class:e.$style.divider}),e._v(" "),a("div",{class:e.$style.fullWidth},[e.tools.length>0?e._l(e.tools,(function(t,i){return a(t.component,{key:i,tag:"component",attrs:{targetPid:e.targetPid,"tool-data":t.data},on:{remove:function(t){return e.removeTool(i)},saveData:function(t){return e.saveToolData(i,t)}},scopedSlots:e._u([{key:"default",fn:function(i){return[a("div",{class:e.$style.row},[a("span",{class:e.$style.rowAvatar},[a("svg-icon",{class:e.$style.toolIcon,attrs:{icon:t.icon}})],1),e._v(" "),a("div",{class:e.$style.rowContent},[a("span",{class:e.$style.rowContentName,attrs:{title:i.toolName}},[e._v("\n                  "+e._s(i.toolName||t.name)+"\n                ")]),e._v(" "),e._l(i.labels,(function(t){return a("span",{key:t,class:e.$style.rowContentDetails},[e._v("\n                  "+e._s(t)+": "+e._s(i.measurements[t])+"\n                ")])}))],2),e._v(" "),a("div",{class:e.$style.action},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(i){var s=i.on;return[a("v-btn",e._g({attrs:{small:"",icon:""},on:{click:function(a){return e.jumpTo(t.data.axis,t.data.lockToSlice)}}},s),[a("v-icon",[e._v("mdi-crosshairs-gps")])],1)]}}],null,!0)},[e._v("\n                  Jump to slice\n                ")])],1),e._v(" "),a("div",{class:e.$style.action},[a("pop-up",{scopedSlots:e._u([{key:"trigger",fn:function(){return[a("v-btn",{attrs:{small:"",icon:""}},[a("v-icon",[e._v("mdi-dots-vertical")])],1)]},proxy:!0},{key:"popup",fn:function(s){var n=s.close;return[a("v-container",{class:[e.$style.container,e.$style.popup],attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Name",placeholder:t.name,value:i.toolName},on:{input:i.setName}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("div",{staticClass:"body-1"},[e._v("Tool color")]),e._v(" "),a("v-divider",{class:e.$style.divider}),e._v(" "),a("palette-picker",{staticClass:"pt-2",attrs:{palette:e.palette,size:28,value:i.color},on:{input:i.setColor}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("div",{staticClass:"body-1"},[e._v("Text Size")]),e._v(" "),a("v-divider",{class:e.$style.divider})],1),e._v(" "),a("v-flex",{attrs:{xs9:""}},[a("v-slider",{attrs:{min:"8",max:"32",step:"1",dirty:"","hide-details":"",value:i.textSize},on:{input:i.setTextSize}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{type:"number",min:"8",max:"32",step:"1",value:i.textSize},on:{input:i.setTextSize}})],1)],1),e._v(" "),a("v-divider",{class:e.$style.divider}),e._v(" "),a("v-layout",{attrs:{"align-center":""}},[a("v-flex",{staticClass:"text-center",attrs:{xs3:""}},[a("v-btn",{attrs:{icon:""},on:{click:n}},[a("v-icon",[e._v("mdi-content-save")])],1)],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{staticClass:"text-center",attrs:{xs3:""}},[a("v-btn",{attrs:{icon:""},on:{click:function(e){i.remove(),n()}}},[a("v-icon",{attrs:{color:"red"}},[e._v("mdi-delete")])],1)],1)],1)],1)]}}],null,!0)})],1)])]}}],null,!0)})})):[a("div",{staticClass:"pt-2 body-1 teal--text text-center"},[e._v("No measurements yet")])],e._v(" "),a("v-btn",{attrs:{disabled:!e.targetProxy||!e.girderRest||!e.girderRest.user},on:{click:e.upload}},[e._v("\n          Upload\n        ")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.girderRest||!e.girderRest.user,expression:"!girderRest || !girderRest.user"}],staticClass:"body-2"},[e._v("Log in to upload")])],2)],1)],1)],1)};i._withStripped=!0;var s=a(612),n=a(76),o=a(38),r=a(77),l=a(70),c=a(57),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",e._l(e.portalDestinations,(function(t){return a("portal",{key:t,attrs:{to:t},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.viewProxyId;return[e._t("default",null,{viewProxyId:a})]}}],null,!0)})})),1)};d._withStripped=!0;var u={name:"ToolSvgPortal",components:{Portal:a(83).h_},data:()=>({portalDestinations:[]}),mounted(){this.$toolSvgPortal.addEventListener("updateTargets",this.updateTargets),this.updateTargets()},beforeDestroy(){this.$toolSvgPortal.removeEventListener("updateTargets",this.updateTargets)},methods:{updateTargets(){this.portalDestinations=[...this.$toolSvgPortal.targets]}}},p=a(581),v=(0,p.Z)(u,d,[],!1,null,null,null);v.options.__file="src/components/tools/ToolSvgPortal.vue";var m=v.exports,g=a(490);var h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{name:`${e}Tool`,components:{ToolSvgPortal:m},props:{targetPid:{required:!0},toolData:{required:!0}},data(){return{name:`2D ${e}`,finalized:!1,lockToSlice:null,axis:null,widgetPid:-1,targetViewId:-1,color:c.wY[0],textSize:16,measurements:this.initialMeasurements(),measurementLabels:this.getMeasurementLabels(),initialSlicePlacement:null,mouseFocusedViewId:-1,svgComponent:t.svgComponent,viewWidgetProperties:{}}},computed:{targetProxy(){return this.$proxyManager.getProxyById(this.targetPid)},targetView(){return this.$proxyManager.getProxyById(this.targetViewId)},widgetProxy(){return this.$proxyManager.getProxyById(this.widgetPid)},targetRepresentation(){return this.$proxyManager.getRepresentation(this.targetProxy,this.targetView)},displayedMeasurements(){return this.getDisplayedMeasurements()},...(0,s.rn)("widgets",{distanceUnitSymbol:e=>e.distanceUnitSymbol,distanceUnitFactor:e=>e.distanceUnitFactor})},watch:t.watch||{},proxyManagerHooks:{onProxyModified(e){if(e&&e===this.targetRepresentation&&this.widgetProxy&&(this.finalized?this.updateWidgetVisibility():null!==this.initialSlicePlacement&&Math.round(e.getSlice())!==this.initialSlicePlacement?this.emitRemove():this.updateOrientation()),e===this.widgetProxy){1===this.widgetProxy.getWidgetState().getHandleList().length&&-1===this.targetViewId&&null===this.initialSlicePlacement&&(this.targetViewId=this.mouseFocusedViewId,this.initialSlicePlacement=Math.round(this.targetRepresentation.getSlice()),this.constrainPickableViews(this.targetViewId)),!this.finalized&&this.donePlacing()&&(this.lockToSlice=this.initialSlicePlacement,this.axis=this.targetView.getAxis(),this.finalized=!0),this.updateMeasurements(),this.finalized&&this.saveData()}}},mounted(){const t=this.$proxyManager.createProxy("Widgets",e);if(this.widgetPid=t.getProxyId(),this.toolData){const{name:e,lockToSlice:a,points:i,color:s,textSize:n,axis:o}=this.toolData;this.name=e,this.lockToSlice=a,this.color=s,this.textSize=n;const r=this.$proxyManager.getViews().filter((e=>e.isA("vtkView2DProxy"))).find((e=>e.getAxis()===o));if(!r)throw new Error("Cannot restore saved data: invalid axis");this.targetViewId=r.getProxyId();const l=t.getWidgetState();for(let e=0;e<i.length;e++){l.addHandle().setOrigin(...i[e])}this.finalized=!0}this.addWidgetToViews(t),this.finalized&&(this.updateMeasurements(),this.updateWidgetVisibility())},beforeDestroy(){this.remove()},methods:{addWidgetToViews(e){this.targetProxy&&e.getWidget().placeWidget(this.targetProxy.getDataset().getBounds());const t=(t,a,i)=>{this.setupViewWidget(i),this.setVisibility(i,t,this.axis===t.getAxis());const s=t.getInteractor().onMouseMove((()=>{-1===this.targetViewId&&t.getProxyId()!==this.mouseFocusedViewId&&(this.mouseFocusedViewId=t.getProxyId(),this.updateOrientation(),i.getVisibility()||(this.setVisibility(i,t,!0),e.getAllViewWidgets().filter((e=>{let[t]=e;return t!==i})).forEach((e=>{let[t,a]=e;return this.setVisibility(t,a,!1)})),a.renderWidgets(),this.$proxyManager.renderAllViews()))}),i.getPriority()+1);return a.grabFocus(i),a.enablePicking(),[s.unsubscribe]};e.addToViews(),e.executeViewFuncs({View3D:(e,t,a)=>{t.removeWidget(a)},View2D_X:t,View2D_Y:t,View2D_Z:t})},updateOrientation(){const e=this.targetView||this.$proxyManager.getProxyById(this.mouseFocusedViewId),t=this.$proxyManager.getRepresentation(this.targetProxy,e),a=Math.round(t.getSlice()),i=e.getAxis(),s=this.widgetProxy.getWidget().getManipulator(),n=[0,0,0];n[i]=1;const o=n.map((e=>e*a));s.setUserNormal(n),s.setUserOrigin(o)},toggleLock(){null===this.lockToSlice?this.lockToSlice=Math.round(this.targetRepresentation.getSlice()):this.lockToSlice=null,this.updateWidgetVisibility()},updateWidgetVisibility(){const e=this.widgetProxy.getViewWidget(this.targetView);if(!e)return;const t=Math.round(this.targetRepresentation.getSlice());this.setVisibility(e,this.targetView,null===this.lockToSlice||this.lockToSlice===t),this.renderViewWidgets()},remove(){this.widgetProxy&&(this.widgetProxy.releaseFocus(),this.widgetProxy.removeFromViews(),this.$proxyManager.deleteProxy(this.widgetProxy),this.widgetPid=-1)},setVisibility(e,t,a){const i=t.getProxyId();g.default.set(this.viewWidgetProperties,t.getProxyId(),{...this.viewWidgetProperties[i],visible:a}),e.setVisibility(a)},setName(e){this.name=e,this.saveData()},setColor(e){this.color=e,this.saveData()},setTextSize(e){this.textSize=e,this.saveData()},renderViewWidgets(){this.$proxyManager.getViews().forEach((e=>{const t=e.getReferenceByName("widgetManager");t&&(t.renderWidgets(),e.renderLater())}))},saveData(){const e=this.widgetProxy.getWidgetState(),t={name:this.name,lockToSlice:this.lockToSlice,points:e.getHandleList().map((e=>e.getOrigin())),color:this.color,textSize:this.textSize,axis:this.targetView.getAxis()};this.$emit("saveData",t)},emitRemove(){this.$emit("remove")},constrainPickableViews(e){this.$proxyManager.getViews().forEach((t=>{const a=this.widgetProxy.getViewWidget(t);a&&a.setPickable(t.getProxyId()===e)}))},initialMeasurements(){throw new Error("initialMeasurements not implemented")},getMeasurementLabels(){throw new Error("getMeasurementLabels not implemented")},getDisplayedMeasurements(){throw new Error("getDisplayedMeasurements not implemented")},updateMeasurements(){throw new Error("updateMeasurements not implemented")},donePlacing(){throw new Error("donePlacing not implemented")},setupViewWidget(){throw new Error("setupViewWidget not implemented")},...t.methods||{}},template:'\n    <div>\n      <slot\n        :finalized="finalized"\n        :tool-name="name"\n        :color="color"\n        :text-size="textSize"\n        :measurements="displayedMeasurements"\n        :labels="measurementLabels"\n        :toggle-lock="toggleLock"\n        :remove="emitRemove"\n        :set-name="setName"\n        :set-color="setColor"\n        :set-text-size="setTextSize"\n      />\n      <tool-svg-portal v-if="svgComponent">\n        <template #default="{ viewProxyId }">\n          <component\n            v-if="viewProxyId in viewWidgetProperties""\n            :is="svgComponent"\n            :widget-state="widgetProxy.getWidgetState()"\n            :view-proxy-id="viewProxyId"\n            :visible="viewWidgetProperties[viewProxyId].visible"\n            :finalized="finalized"\n            :tool-name="name"\n            :color="color"\n            :text-size="textSize"\n            :measurements="displayedMeasurements"\n            :labels="measurementLabels"\n          />\n        </template>\n      </tool-svg-portal>\n    </div>\n  '}},y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.visible?a("g",[a("svg-circle-handles",{attrs:{"state-labels":["handles","moveHandle"],"widget-state":e.widgetState,"view-proxy-id":e.viewProxyId,stroke:e.color,"stroke-width":"3",fill:"transparent",r:"8"}}),e._v(" "),a("svg-poly-line",{attrs:{"state-labels":["handles","moveHandle"],"widget-state":e.widgetState,"view-proxy-id":e.viewProxyId,stroke:e.color,"stroke-width":"2"}}),e._v(" "),a("svg-label",{attrs:{labels:e.svgLabels,"view-proxy-id":e.viewProxyId,fill:e.color,dx:"12",dy:"-12",styles:{fontSize:e.fontSize+"px"}}})],1):e._e()};y._withStripped=!0;var f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.visible?a("g",e._l(e.points,(function(t,i){return a("circle",e._b({key:i,attrs:{cx:t[0],cy:t[1]}},"circle",e.$attrs,!1))})),0):e._e()};f._withStripped=!0;var b=a(13),x=a(383),w=a(5);const _="$$PixelSpaceMixinData";var S={props:{viewProxyId:{type:String,required:!0}},computed:{view(){return this.$proxyManager.getProxyById(this.viewProxyId)}},created(){this[_]={},this[_].deferred=[],this[_].actor=b.ZP.newInstance(),this[_].mapper=x.ZP.newInstance(),this[_].pointsPd=w.ZP.newInstance(),this[_].mapper.setInputData(this[_].pointsPd),this[_].mapper.setCallback(((e,t,a,i,s)=>{const n=e.map((e=>[e[0],s[1]-e[1],e[2],e[3]])),{deferred:o}=this[_];o.map((e=>{let{resolve:t}=e;return t(n)})),this[_].deferred.length=0})),this[_].actor.setMapper(this[_].mapper)},mounted(){this.view.getRenderer().addActor(this[_].actor)},beforeDestroy(){this.view.getRenderer().removeActor(this[_].actor),this[_].mapper.delete(),this[_].actor.delete()},methods:{mapToPixelSpace(e){const t=this[_].pointsPd.getPoints().getData(),a=[...t,...e.flat()];this[_].pointsPd.getPoints().setData(a,3),this[_].pointsPd.modified();const i=t.length/3,s=a.length/3,n=function(){let e,t;return{promise:new Promise(((a,i)=>{e=a,t=i})),resolve:e,reject:t}}();return this[_].deferred.push(n),n.promise.then((e=>e.slice(i,s)))}}};const P=Symbol("VtkSubscriptionsKey");var k={mounted(){this[P]=[]},beforeDestroy(){for(;this[P].length;)this[P].pop().unsubscribe()},methods:{trackVtkSubscription(e){this[P].push(e)}}},C={name:"SvgCircleHandles",mixins:[S,k],props:{visible:{type:Boolean,default:!0},stateLabels:{type:Array,required:!0},widgetState:{type:Object,required:!0},viewProxyId:{type:String,required:!0}},data:()=>({points:[]}),mounted(){this.trackVtkSubscription(this.widgetState.onModified(this.updatePoints)),this.resizeObserver=new ResizeObserver((()=>{this.updatePoints()})),this.resizeObserver.observe(this.view.getContainer())},beforeUnmount(){this.resizeObserver.disconnect()},methods:{async updatePoints(){const e=this.stateLabels.flatMap((e=>this.widgetState.getStatesWithLabel(e))).filter(Boolean).filter((e=>e.isVisible())).flatMap((e=>e.getOrigin())),t=this.mapToPixelSpace(e);this.view.render(),this.points=await t}}},V=(0,p.Z)(C,f,[],!1,null,null,null);V.options.__file="src/components/tools/MeasurementTools/svg/SvgCircleHandles.vue";var I=V.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.visible?a("g",e._l(e.lines,(function(t,i){return a("line",e._b({key:i,attrs:{x1:t[0][0],y1:t[0][1],x2:t[1][0],y2:t[1][1]}},"line",e.$attrs,!1))})),0):e._e()};T._withStripped=!0;var $={name:"SvgPolyLine",mixins:[S,k],props:{visible:{type:Boolean,default:!0},stateLabels:{type:Array,required:!0},widgetState:{type:Object,required:!0},viewProxyId:{type:String,required:!0}},data:()=>({points:[]}),computed:{lines(){const e=[];for(let t=0;t<this.points.length-1;t++){const a=this.points[t],i=this.points[t+1];e.push([a,i])}return e}},mounted(){this.trackVtkSubscription(this.widgetState.onModified(this.updatePoints)),this.updatePoints(),this.resizeObserver=new ResizeObserver((()=>{this.updatePoints()})),this.resizeObserver.observe(this.view.getContainer())},beforeUnmount(){this.resizeObserver.disconnect()},methods:{async updatePoints(){const e=this.stateLabels.flatMap((e=>this.widgetState.getStatesWithLabel(e))).filter(Boolean).filter((e=>e.isVisible())).flatMap((e=>e.getOrigin()));this.points=await this.mapToPixelSpace(e)}}},D=(0,p.Z)($,T,[],!1,null,null,null);D.options.__file="src/components/tools/MeasurementTools/svg/SvgPolyLine.vue";var M=D.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.visible?a("g",e._l(e.svgSpaceLabels,(function(t,i){return a("text",e._b({key:i,style:e.styles,attrs:{abc:JSON.stringify(e.styles),x:t.x,y:t.y}},"text",e.$attrs,!1),[e._v("\n    "+e._s(t.text)+"\n  ")])})),0):e._e()};L._withStripped=!0;var Z={name:"SvgLabel",mixins:[S],props:{visible:{type:Boolean,default:!0},labels:{type:Array,default:()=>[]},viewProxyId:{type:String,required:!0},styles:{type:Object,default:()=>({})}},data:()=>({svgSpaceLabels:[]}),watch:{labels(){this.updatePoints(),this.view.renderLater()}},mounted(){this.updatePoints(),this.resizeObserver=new ResizeObserver((()=>{this.updatePoints()})),this.resizeObserver.observe(this.view.getContainer())},beforeUnmount(){this.resizeObserver.disconnect()},methods:{async updatePoints(){const e=this.labels.flatMap((e=>e.xyz)),t=await this.mapToPixelSpace(e);this.svgSpaceLabels=t.map(((e,t)=>({x:e[0],y:e[1],text:this.labels[t].text})))}}},O=(0,p.Z)(Z,L,[],!1,null,null,null);O.options.__file="src/components/tools/MeasurementTools/svg/SvgLabel.vue";var R=O.exports,B={name:"AngleSvg",components:{SvgCircleHandles:I,SvgPolyLine:M,SvgLabel:R},mixins:[k],props:{finalized:Boolean,widgetState:{type:Object,required:!0},visible:{type:Boolean,default:!0},viewProxyId:{type:String,required:!0},toolName:{type:String,required:!0},color:{type:String,required:!0},textSize:{type:Number,required:!0},measurements:{type:Object,required:!0},labels:{type:Array,required:!0}},data:()=>({svgLabels:[]}),computed:{angleValue(){return this.measurements[this.labels[0]]},fontSize(){return this.textSize*(window.devicePixelRatio||1)}},watch:{angleValue(){this.updateLabels()}},mounted(){this.trackVtkSubscription(this.widgetState.onModified(this.updateLabels)),this.updateLabels(),this.resizeObserver=new ResizeObserver((()=>{this.updatePoints()})),this.resizeObserver.observe(this.view.getContainer())},beforeUnmount(){this.resizeObserver.disconnect()},methods:{updateLabels(){const e=this.widgetState.getHandleList().map((e=>e.getOrigin()));3===e.length&&(this.svgLabels=[{xyz:e[1],text:this.angleValue}])}}},A=(0,p.Z)(B,y,[],!1,null,null,null);A.options.__file="src/components/tools/MeasurementTools/svg/AngleSvg.vue";var F=h("Angle",{svgComponent:A.exports,methods:{initialMeasurements:()=>({angle:0}),getMeasurementLabels:()=>["Angle"],getDisplayedMeasurements(){return{Angle:`${this.measurements.angle.toFixed(2)}`}},updateMeasurements(){const e=this.widgetProxy.getWidget();this.measurements.angle=180*e.getAngle()/Math.PI},donePlacing(){return 3===this.widgetProxy.getWidgetState().getHandleList().length},setupViewWidget(e){e.setHandleVisibility(!1)}}}),N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.visible?a("g",[a("svg-circle-handles",{attrs:{"state-labels":["handles","moveHandle"],"widget-state":e.widgetState,"view-proxy-id":e.viewProxyId,stroke:e.color,"stroke-width":"3",fill:"transparent",r:"8"}}),e._v(" "),a("svg-poly-line",{attrs:{"state-labels":["handles","moveHandle"],"widget-state":e.widgetState,"view-proxy-id":e.viewProxyId,stroke:e.color,"stroke-width":"2"}}),e._v(" "),a("svg-label",{attrs:{labels:e.svgLabels,"view-proxy-id":e.viewProxyId,fill:e.color,dx:"12",dy:"-12",styles:{fontSize:e.fontSize+"px"}}})],1):e._e()};N._withStripped=!0;var E={name:"RulerSvg",components:{SvgCircleHandles:I,SvgPolyLine:M,SvgLabel:R},mixins:[k],props:{finalized:Boolean,widgetState:{type:Object,required:!0},visible:{type:Boolean,default:!0},viewProxyId:{type:String,required:!0},toolName:{type:String,required:!0},color:{type:String,required:!0},textSize:{type:Number,required:!0},measurements:{type:Object,required:!0},labels:{type:Array,required:!0}},data:()=>({svgLabels:[]}),computed:{rulerValue(){return this.measurements[this.labels[0]]},fontSize(){return this.textSize*(window.devicePixelRatio||1)}},watch:{angleValue(){this.updateLabels()}},mounted(){this.trackVtkSubscription(this.widgetState.onModified(this.updateLabels)),this.updateLabels(),this.resizeObserver=new ResizeObserver((()=>{this.updatePoints()})),this.resizeObserver.observe(this.view.getContainer())},beforeUnmount(){this.resizeObserver.disconnect()},methods:{updateLabels(){const e=this.widgetState.getHandleList().map((e=>e.getOrigin()));2===e.length&&(this.svgLabels=[{xyz:e[0],text:this.rulerValue}])}}},j=(0,p.Z)(E,N,[],!1,null,null,null);j.options.__file="src/components/tools/MeasurementTools/svg/RulerSvg.vue";var z=h("Ruler",{svgComponent:j.exports,methods:{initialMeasurements:()=>({length:0}),getMeasurementLabels:()=>["Length"],getDisplayedMeasurements(){return{Length:`${(this.measurements.length*(this.distanceUnitFactor||1)).toFixed(2)} ${this.distanceUnitSymbol||""}`}},updateMeasurements(){const e=this.widgetProxy.getWidget();this.measurements.length=e.getDistance()},donePlacing(){return 2===this.widgetProxy.getWidgetState().getHandleList().length},setupViewWidget(e){e.setHandleVisibility(!1)}},watch:{distanceUnitSymbol(){this.widgetProxy.modified()},distanceUnitFactor(){this.widgetProxy.modified()}}}),G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.visible?a("g",[a("svg-circle-handles",{attrs:{"state-labels":["handles","moveHandle"],"widget-state":e.widgetState,"view-proxy-id":e.viewProxyId,stroke:e.color,"stroke-width":"3",fill:"transparent",r:"8"}}),e._v(" "),a("svg-label",{attrs:{labels:e.svgLabels,"view-proxy-id":e.viewProxyId,fill:e.color,dx:"12",dy:"-12",styles:{fontSize:e.fontSize+"px"}}})],1):e._e()};G._withStripped=!0;var U={name:"TextSvg",components:{SvgCircleHandles:I,SvgLabel:R},mixins:[k],props:{finalized:Boolean,widgetState:{type:Object,required:!0},visible:{type:Boolean,default:!0},viewProxyId:{type:String,required:!0},toolName:{type:String,required:!0},color:{type:String,required:!0},textSize:{type:Number,required:!0},measurements:{type:Object,required:!0},labels:{type:Array,required:!0}},data:()=>({svgLabels:[]}),computed:{fontSize(){return this.textSize*(window.devicePixelRatio||1)}},watch:{toolName(){this.updateLabels()}},mounted(){this.trackVtkSubscription(this.widgetState.onModified(this.updateLabels)),this.updateLabels(),this.resizeObserver=new ResizeObserver((()=>{this.updatePoints()})),this.resizeObserver.observe(this.view.getContainer())},beforeUnmount(){this.resizeObserver.disconnect()},methods:{updateLabels(){const e=this.widgetState.getHandleList().map((e=>e.getOrigin()));1===e.length&&(this.svgLabels=[{xyz:e[0],text:this.toolName}])}}},W=(0,p.Z)(U,G,[],!1,null,null,null);W.options.__file="src/components/tools/MeasurementTools/svg/TextSvg.vue";const H=[{name:"2D Angle",icon:"angle-tool",component:F},{name:"2D Ruler",icon:"length-tool",component:z},{name:"2D Text",icon:"text-tool",component:h("Text",{svgComponent:W.exports,watch:{name(){this.updateMeasurements()}},methods:{initialMeasurements:()=>({}),getMeasurementLabels:()=>[],getDisplayedMeasurements:()=>({}),updateMeasurements(){},donePlacing(){return 1===this.widgetProxy.getWidgetState().getHandleList().length},setupViewWidget(e){e.setHandleVisibility(!1)}}})}],K={};H.forEach((e=>{K[e.component.name]=e}));var q={name:"MeasurementTools",props:["enabled"],components:{PopUp:n.Z,PalettePicker:o.Z,SvgIcon:l.Z,SourceSelect:r.Z},inject:["$notify","girderRest"],data:()=>({uiToolList:H,activeToolIndex:void 0,activeToolId:-1,targetPid:-1,pendingTool:null,palette:c.wY}),computed:{...(0,s.rn)("widgets",["measurements"]),tools(){let e=[];if(this.measurements[this.targetPid]){const t=this.measurements[this.targetPid];e=e.concat(t.map((e=>({...K[e.componentName],data:e.data}))))}return this.pendingTool&&(e=e.concat(this.pendingTool)),e},targetProxy(){return this.$proxyManager.getProxyById(this.targetPid)}},watch:{enabled(e){e?this.enableActiveTool():this.clearActiveTool()},targetPid(){this.enabled&&this.clearActiveTool()}},methods:{...(0,s.nv)("widgets",["addMeasurementTool","removeMeasurementTool","updateMeasurementTool"]),filterImageData:e=>"TrivialProducer"===e.getProxyName()&&"vtkImageData"===e.getType(),setTargetDataset(e){this.targetPid=e},toggleActiveTool(e){this.enabled?void 0===e?this.$emit("enable",!1):(this.removeTool(this.activeToolIndex),this.activeToolIndex=e,this.enableActiveTool()):void 0!==e&&(this.activeToolIndex=e,this.$emit("enable",!0))},enableActiveTool(){-1!==this.targetPid&&void 0!==this.activeToolIndex&&(this.pendingTool=H[this.activeToolIndex])},clearActiveTool(){this.pendingTool=null,this.activeToolIndex=void 0,this.activeToolId=-1},removeTool(e){this.pendingTool&&e===this.tools.length-1?(this.pendingTool=null,this.clearActiveTool()):this.removeMeasurementTool({datasetId:this.targetPid,index:e})},jumpTo(e,t){if(null!==t){const a=this.$proxyManager.getViews().find((t=>t.getAxis&&t.getAxis()===e));if(a){const e=a.getRepresentations().find((e=>e.getInput()===this.targetProxy));e&&e.setSlice(t)}}},saveToolData(e,t){this.pendingTool&&e===this.tools.length-1?(this.addMeasurementTool({datasetId:this.targetPid,componentName:this.pendingTool.component.name,data:t}),this.pendingTool=null,this.$emit("enable",!1)):this.updateMeasurementTool({datasetId:this.targetPid,index:e,data:t})},upload(){this.targetProxy&&setTimeout((()=>{this.$root.$emit("girder_upload_measurements",this.targetPid)}),10)}}},Y={container:"MeasurementTools-container-T9yiM",fullWidth:"MeasurementTools-fullWidth-jg_o5",heading:"MeasurementTools-heading-x9G8M",popup:"MeasurementTools-popup-Rgjca",toolButton:"MeasurementTools-toolButton-AuiAl",tools:"MeasurementTools-tools-Zplkp",toolIcon:"MeasurementTools-toolIcon-_ACfO",row:"MeasurementTools-row-IsEDx",rowAvatar:"MeasurementTools-rowAvatar-AoIB_",rowContent:"MeasurementTools-rowContent-OAflc",rowContentName:"MeasurementTools-rowContentName-qZi21",rowContentDetails:"MeasurementTools-rowContentDetails-IT3d5",action:"MeasurementTools-action-pSwKW",toolIconOverlay:"MeasurementTools-toolIconOverlay-PpV_8"},X=a(3),J=a.n(X),Q=a(582),ee=a(667),te=a(601),ae=a(637),ie=a(644),se=a(608),ne=a(610),oe=a(611),re=a(652),le=a(653),ce=a(634),de=a(654);e=a.hmd(e);var ue={};e.hot,e.hot;var pe=(0,p.Z)(q,i,[],!1,(function(e){ue.$style=Y.locals||Y,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return ue.$style}})}),null,null);J()(pe,{VBtn:Q.Z,VBtnToggle:ee.Z,VCard:te.Z,VContainer:ae.Z,VDivider:ie.Z,VFlex:se.Z,VIcon:ne.Z,VLayout:oe.Z,VSlider:re.Z,VSpacer:le.Z,VTextField:ce.Z,VTooltip:de.Z}),pe.options.__file="src/components/tools/MeasurementTools/index.vue";var ve=pe.exports},168:function(e,t,a){"use strict";a.d(t,{Z:function(){return R}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{class:e.$style.container},[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("source-select",{attrs:{label:"Target volume",filterFunc:e.filterImages,bindToActiveSource:"",disabled:e.running},on:{input:e.setTargetImage}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-menu",{attrs:{"offset-x":""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-select",{staticStyle:{overflow:"hidden","text-overflow":"ellipses"},attrs:{label:"Select/create an output image","append-outer-icon":"mdi-dots-vertical",items:e.imageList,"item-text":"name","item-value":"proxyId",disabled:!e.targetImage||e.running,value:e.outputImageSelection},on:{input:e.setOutputImage,"click:append-outer":i.click}})]}}])},[e._v(" "),a("v-list",[e.outputImageSelection?[a("v-list-item",{on:{click:e.editOutputImageName}},[a("v-list-item-title",[e._v("Edit Name")])],1),e._v(" "),a("v-list-item",{on:{click:e.deleteOutputImage}},[a("v-list-item-title",[e._v("Delete")])],1)]:[a("v-list-item",[a("v-list-item-title",[e._v("(no image selected)")])],1)]],2)],1)],1),e._v(" "),e.editingOutputName?[a("v-flex",{attrs:{xs10:""}},[a("v-text-field",{attrs:{label:"Renaming image"},on:{keydown:function(t){if(!t.type.indexOf("key")&&13!==t.keyCode)return null;e.editingOutputName=!1}},model:{value:e.editableOutputImageName,callback:function(t){e.editableOutputImageName=t},expression:"editableOutputImageName"}})],1),e._v(" "),a("v-flex",{staticClass:"text-center",attrs:{xs2:""}},[a("v-btn",{attrs:{icon:""},on:{click:function(t){e.editingOutputName=!1}}},[a("v-icon",[e._v("mdi-content-save")])],1)],1)]:e._e()],2)],1),e._v(" "),a("v-container",{class:e.$style.container},[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{attrs:{xs10:""}},[a("v-slider",{attrs:{label:"Radius",min:"1",max:"20",step:"1",disabled:e.running,"hide-details":""},model:{value:e.blurRadius,callback:function(t){e.blurRadius=t},expression:"blurRadius"}})],1),e._v(" "),a("v-flex",{attrs:{xs2:""}},[a("v-text-field",{attrs:{type:"number",min:"1",max:"20",disabled:e.running,step:"1"},model:{value:e.blurRadius,callback:function(t){e.blurRadius=t},expression:"blurRadius"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-btn",{attrs:{text:"",loading:e.running,disabled:e.buttonDisabled},on:{click:e.runBlur},scopedSlots:e._u([{key:"loader",fn:function(){return[a("v-progress-circular",{attrs:{indeterminate:"",size:"24",width:"3"}}),e._v(" "),a("span",{staticClass:"ml-2"},[e._v("Running...")])]},proxy:!0}])},[a("v-icon",{attrs:{left:""}},[e._v("mdi-blur")]),e._v(" "),e._v("\n          Blur Image\n        ")],1)],1)],1)],1),e._v(" "),e.error?a("v-container",{class:e.$style.container},[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("v-alert",{attrs:{type:"error",dismissible:""},on:{input:function(t){e.error=null}}},[e._v("\n          Median filter error: "+e._s(e.error.message)+"\n        ")])],1)],1)],1):e._e(),e._v(" "),e.snackbar.show?a("portal",{attrs:{selector:"#app-portal-mount"}},[a("v-snackbar",{attrs:{top:"",color:e.snackbar.type,timeout:6e3},model:{value:e.snackbar.show,callback:function(t){e.$set(e.snackbar,"show",t)},expression:"snackbar.show"}},[e._v("\n      "+e._s(e.snackbar.msg)+"\n      "),a("v-btn",{attrs:{dark:"",text:""},on:{click:function(t){e.snackbar.show=!1}}},[e._v("close")])],1)],1):e._e()],1)};i._withStripped=!0;var s=a(518),n=a(59),o=a.n(n),r=a(9),l=a(79),c=a(382),d=a(77),u=a(30);const{vtkErrorMacro:p}=r.ZP,v=-2;var m={name:"MedianFilter",components:{SourceSelect:d.Z,Portal:c.h_},props:["enabled"],data:()=>({targetImageId:-1,outputImageId:-1,imageList:[],blurRadius:1,running:!1,webWorker:null,error:null,editingOutputName:!1,editableOutputImageName:"",snackbar:{show:!1,type:"",msg:""}}),computed:{targetImage(){return this.$proxyManager.getProxyById(this.targetImageId)},outputImage(){return this.$proxyManager.getProxyById(this.outputImageId)},outputImageSelection(){return this.outputImage?{name:this.outputImage.getName(),proxyId:this.outputImageId}:null},buttonDisabled(){return this.running||!this.outputImage}},watch:{targetImageId(){this.targetImageId===this.outputImageId&&(this.outputImageId=-1),this.refreshImageList()},outputImage(){this.outputImage?this.editableOutputImageName=this.outputImage.getName():this.editableOutputImageName=""},editableOutputImageName(e){this.outputImage&&this.outputImage.setName(e)}},proxyManagerHooks:{onProxyModified(){this.refreshImageList()},onProxyCreated(){this.refreshImageList()},onProxyDeleted(e){let{proxyId:t}=e;t===this.targetImageId&&(this.targetImageId=-1),t===this.outputImageId&&(this.outputImageId=-1)}},mounted(){this.refreshImageList()},methods:{filterImages:e=>"TrivialProducer"===e.getProxyName()&&"vtkImageData"===e.getType(),setTargetImage(e){this.targetImageId=e},setOutputImage(e){if(e===v){const e=this.createOutputImageProxy();this.outputImageId=e.getProxyId()}else this.outputImageId=e;this.editingOutputName=!1},refreshImageList(){const e=this.$proxyManager.getSources().filter((e=>e.getProxyId()!==this.targetImageId)).map((e=>({name:e.getName(),proxyId:e.getProxyId()})));this.imageList=[{name:"Create image",proxyId:v}].concat(e)},createOutputImageProxy(){return this.$proxyManager.createProxy("Sources","TrivialProducer",{name:`Median filter of ${this.targetImage.getName()}`})},runBlur(){const e=l.Z.convertVtkToItkImage(this.targetImage.getDataset());e.data=e.data.slice(0),this.running=!0;const t=String(this.blurRadius);(0,s.Z)(this.webWorker,"itkfiltering",["medianfilter","input.json","output.json",t],[{path:"output.json",type:o().Image}],[{path:"input.json",type:o().Image,data:e}]).then((e=>{if(this.webWorker=e.webWorker,!this.outputImage){const e=this.createOutputImageProxy();this.outputImageId=e.getProxyId()}const t=e.outputs[0].data;t.data=new Float32Array(t.data);const a=l.Z.convertItkToVtkImage(t);this.outputImage.setInputData(a),this.targetImage.getKey("girderProvenance")&&this.outputImage.setKey("girderProvenance",this.targetImage.getKey("girderProvenance")),(0,u._3)(this.$proxyManager,this.outputImage),this.$proxyManager.renderAllViews(),this.running=!1,this.showSnack({type:"success",msg:"Median filter done!"})})).catch((e=>{p(`Median filter error: ${e.message}`),this.error=e,this.showSnack({type:"error",msg:"Median filter error!"})}))},showSnack(e){let{type:t,msg:a}=e;this.snackbar.show=!0,this.snackbar.type=t,this.snackbar.msg=a},editOutputImageName(){this.outputImage&&(this.editingOutputName=!this.editingOutputName)},deleteOutputImage(){this.$proxyManager.deleteProxy(this.outputImage)}}},g={container:"MedianFilter-container-Bl5Bg"},h=a(581),y=a(3),f=a.n(y),b=a(668),x=a(582),w=a(637),_=a(608),S=a(610),P=a(611),k=a(647),C=a(641),V=a(646),I=a(638),T=a(599),$=a(640),D=a(652),M=a(666),L=a(634);e=a.hmd(e);var Z={};e.hot,e.hot;var O=(0,h.Z)(m,i,[],!1,(function(e){Z.$style=g.locals||g,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return Z.$style}})}),null,null);f()(O,{VAlert:b.Z,VBtn:x.Z,VContainer:w.Z,VFlex:_.Z,VIcon:S.Z,VLayout:P.Z,VList:k.Z,VListItem:C.Z,VListItemTitle:V.V9,VMenu:I.Z,VProgressCircular:T.Z,VSelect:$.Z,VSlider:D.Z,VSnackbar:M.Z,VTextField:L.Z}),O.options.__file="src/components/tools/MedianFilter/index.vue";var R=O.exports},166:function(e,t,a){"use strict";a.d(t,{Z:function(){return U}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{class:e.$style.container},[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("source-select",{attrs:{label:"Select a Base Image",filterFunc:e.filterImageData,bindToActiveSource:"",hideIfOneDataset:""},on:{input:e.setTargetVolume}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-menu",{attrs:{"offset-x":""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-select",{staticStyle:{overflow:"hidden","text-overflow":"ellipses"},attrs:{label:"Select a Labelmap","append-outer-icon":"mdi-dots-vertical",items:e.labelmaps,"item-text":"name","item-value":"sourceId",disabled:-1===e.targetImageId,value:e.labelmapSelection},on:{input:e.setLabelMap,"click:append-outer":i.click}})]}}])},[e._v(" "),a("v-list",[e.labelmapSelection?[a("v-list-item",{on:{click:e.editName}},[a("v-list-item-title",[e._v("Edit Name")])],1),e._v(" "),a("v-list-item",{on:{click:e.deleteLabelmap}},[a("v-list-item-title",[e._v("Delete")])],1)]:[a("v-list-item",[a("v-list-item-title",[e._v("(no labelmap selected)")])],1)]],2)],1)],1),e._v(" "),e.editingName?[a("v-flex",{attrs:{xs10:""}},[a("v-text-field",{attrs:{label:"Renaming labelmap"},model:{value:e.editableLabelmapName,callback:function(t){e.editableLabelmapName=t},expression:"editableLabelmapName"}})],1),e._v(" "),a("v-flex",{staticClass:"text-center",attrs:{xs2:""}},[a("v-btn",{attrs:{icon:""},on:{click:function(t){e.editingName=!1}}},[a("v-icon",[e._v("mdi-content-save")])],1)],1)]:e._e()],2)],1),e._v(" "),a("v-card",{attrs:{color:"teal lighten-5"}},[a("v-card-text",{class:e.$style.paintActions},[a("v-switch",{class:e.$style.paintSwitch,attrs:{value:e.enabled,"hide-details":"",label:"Paint Mode",disabled:!e.canPaint},on:{change:function(t){e.$emit("enable",Boolean(t))}}}),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"mr-3",attrs:{icon:"",small:"",disabled:!e.canPaint},on:{click:e.undo}},[a("v-icon",[e._v("mdi-undo")])],1),e._v(" "),a("v-btn",{attrs:{icon:"",small:"",disabled:!e.canPaint},on:{click:e.redo}},[a("v-icon",[e._v("mdi-redo")])],1)],1)],1),e._v(" "),a("v-container",{class:e.$style.container,attrs:{"grid-list-md":""}},[a("v-layout",{directives:[{name:"show",rawName:"v-show",value:e.canPaint,expression:"canPaint"}],attrs:{wrap:"","align-center":""}},[a("v-flex",{staticClass:"mt-1",attrs:{xs10:""}},[a("label",{staticClass:"v-label theme--light",attrs:{for:"paint-2D-brush-toggle"}},[e._v("2D Brush")])]),e._v(" "),a("v-flex",{staticClass:"mt-1",attrs:{xs2:""}},[a("v-switch",{staticClass:"mt-n1 pt-0",attrs:{id:"paint-2D-brush-toggle","hide-details":""},model:{value:e.brush2D,callback:function(t){e.brush2D=t},expression:"brush2D"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-slider",{attrs:{label:"Radius",min:"1",max:e.brushSizeMax,step:"1",dirty:"","hide-details":"",value:e.radius},on:{input:e.setRadius},scopedSlots:e._u([{key:"append",fn:function(){return[a("v-text-field",{staticClass:"mt-n1 pt-0",attrs:{type:"number",min:"1",max:e.brushSizeMax,step:"1","hide-details":"","single-line":"",value:e.radius},on:{input:e.setRadius}})]},proxy:!0}])})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-list",{class:e.$style.fullWidth},[a("v-subheader",{class:e.$style.headerRow},[a("span",{staticClass:"black--text subtitle-1 body-2"},[e._v("Labels")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{class:e.$style.lowercaseText,attrs:{text:""},on:{click:e.addLabel}},[a("v-icon",{attrs:{small:"",color:"blue"}},[e._v("mdi-plus-circle")]),e._v(" "),a("span",{staticClass:"pl-2 grey--text text--darken-2"},[e._v("Add Label")])],1)],1),e._v(" "),a("v-radio-group",{class:e.$style.radioGroup,attrs:{value:e.activeLabel},on:{change:e.setLabel}},[e._l(e.colormapArray,(function(t,i){return[a("v-divider",{key:"divider_"+i}),e._v(" "),a("v-list-item",{key:t.label},[a("v-list-item-action",[a("v-radio",{class:e.$style.activeRadio,attrs:{value:t.label}})],1),e._v(" "),a("v-list-item-content",{class:e.$style.listRow},[0===t.label?[a("div",{class:e.$style.colorBoxBackground},[a("div",{class:e.$style.colorBox,style:e.colorToBackgroundCSS(e.colormapArray,0)})]),e._v(" "),a("span",{staticClass:"pl-1"},[e._v("Eraser")])]:[a("pop-up",{staticClass:"flex-grow-0 flex-shrink-1",scopedSlots:e._u([{key:"trigger",fn:function(){return[a("div",{class:e.$style.colorBoxBackground},[a("div",{class:e.$style.colorBox,style:e.colorToBackgroundCSS(e.colormapArray,i)})])]},proxy:!0},{key:"popup",fn:function(){return[a("div",{class:e.$style.colorPicker},[a("palette-picker",{attrs:{palette:e.palette,size:28,value:e.asHex(t.color)},on:{input:function(a){return e.setLabelColor(t.label,arguments[0])}}}),e._v(" "),a("div",{class:e.$style.opacitySlider},[a("v-slider",{attrs:{label:"Opacity",value:t.opacity,min:0,max:255,step:1},on:{input:function(a){return e.setLabelOpacity(t.label,arguments[0])}}})],1)],1)]},proxy:!0}],null,!0)}),e._v(" "),a("span",{staticClass:"pl-1"},[e._v("Label "+e._s(t.label))])]],2),e._v(" "),a("v-list-item-action",[0!==t.label?a("v-btn",{class:e.$style.deleteButton,attrs:{icon:""},on:{click:function(a){return e.deleteLabel(t.label)}}},[a("v-icon",[e._v("mdi-delete")])],1):e._e()],1)],1)]})),e._v(" "),a("v-divider")],2)],1)],1),e._v(" "),a("v-btn",{attrs:{disabled:!e.girderRest||!e.girderRest.user},on:{click:function(t){return e.upload()}}},[e._v("\n        Upload\n      ")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.girderRest||!e.girderRest.user,expression:"!girderRest || !girderRest.user"}],staticClass:"body-2"},[e._v("Log in to upload")])],1)],1)],1)};i._withStripped=!0;var s=a(612),n=a(4),o=a(517),r=a(67),l=a(381),c=a(38),d=a(76),u=a(77),p=a(30),v=a(57);const m="PaintToolSync",g=-2;function h(e){const t=e.slice(1),a=[];for(let e=0;e<t.length;e+=2)a.push(Number.parseInt(t.slice(e,e+2),16));return a}var y={name:"PaintTool",inject:["girderRest"],components:{PalettePicker:c.Z,PopUp:d.Z,SourceSelect:u.Z},props:["enabled"],data:()=>({targetImageId:-1,activeLabelmapId:-1,internalLabelmaps:[],widgetId:-1,editingName:!1,editableLabelmapName:"",brushSizeMax:100,radius:5,brush2D:!1,colormapArray:[]}),computed:{...(0,s.rn)("widgets",{imageToLabelmaps:e=>e.imageToLabelmaps,labelmapToImage:e=>e.labelmapToImage,labelmapStates:e=>e.labelmapStates}),labelmaps(){return[{name:"Create new labelmap",sourceId:g}].concat(this.internalLabelmaps)},activeLabel(){return this.activeLabelmapState?this.activeLabelmapState.selectedLabel:-1},activeLabelmapProxy(){return this.$proxyManager.getProxyById(this.activeLabelmapId)},activeLabelmapParentImageProxy(){return this.$proxyManager.getProxyById(this.labelmapToImage[this.activeLabelmapId])},activeLabelmapState(){return this.labelmapStates[this.activeLabelmapId]},targetImageProxy(){return this.$proxyManager.getProxyById(this.targetImageId)},labelmapSelection(){return this.activeLabelmapProxy?{name:this.editableLabelmapName||this.activeLabelmapProxy.getName(),sourceId:this.activeLabelmapProxy.getProxyId()}:null},canPaint(){return this.targetImageId>-1&&this.activeLabelmapId>-1},paintProxy(){return this.$proxyManager.getProxyById(this.widgetId)}},watch:{editableLabelmapName(e){this.activeLabelmapProxy&&this.activeLabelmapProxy.setName(e)},activeLabel(e){this.filter&&this.filter.setLabel(e)},radius(e){this.filter&&this.filter.setRadius(e),this.paintProxy&&this.paintProxy.getWidget().setRadius(e)},enabled(e){e?this.enablePainting():this.disablePainting()},activeLabelmapProxy(){if(this.activeLabelmapProxy){this.editableLabelmapName=this.activeLabelmapProxy.getName();const e=this.activeLabelmapProxy.getDataset().getDimensions();this.brushSizeMax=Math.floor(Math.max(...e)/2);const t=this.activeLabelmapProxy.getDataset();this.labelmapSub.sub(t.onModified(this.updateColorMap)),this.updateColorMap()}else this.labelmapSub.unsub();this.editingName=!1}},proxyManagerHooks:{onProxyModified(e){if(this.enabled&&"Representations"===e.getProxyGroup()&&e.getInput()===this.activeLabelmapProxy&&this.mousedViewId>-1){const e=this.$proxyManager.getProxyById(this.mousedViewId);this.updateHandleSlice(e)}if("Sources"===e.getProxyGroup()&&"LabelMap"===e.getProxyName()){const t=this.internalLabelmaps.find((t=>t.sourceId===e.getProxyId()));t&&(t.name=e.getName())}},onProxyCreated(e){let{proxy:t,proxyGroup:a,proxyName:i,proxyId:s}=e;"Sources"===a&&"LabelMap"===i&&this.internalLabelmaps.push({name:t.getName(),sourceId:s})},onProxyDeleted(e){let{proxyGroup:t,proxyName:a,proxyId:i}=e;if("Sources"===t&&"LabelMap"===a){const e=this.internalLabelmaps.findIndex((e=>e.sourceId===i));e>-1&&this.internalLabelmaps.splice(e,1)}i===this.activeLabelmapId?(this.activeLabelmapId=-1,this.$emit("enable",!1)):i===this.targetImageId&&(this.targetImageId=-1,this.$emit("enable",!1))}},created(){this.palette=v.oe,this.mousedViewId=-1,this.filter=null,this.labelmapSub=(0,p.y5)(),this.internalLabelmaps=this.$proxyManager.getSources().filter((e=>"LabelMap"===e.getProxyName())).map((e=>({name:e.getName(),sourceId:e.getProxyId()})))},beforeDestroy(){this.enabled&&this.disablePainting(),this.labelmapSub.unsub()},methods:{...(0,s.nv)({addLabelmapToImage:(e,t,a)=>e("widgets/addLabelmapToImage",{imageId:a,labelmapId:t}),setLabelmapState:(e,t,a)=>e("widgets/setLabelmapState",{labelmapId:t,labelmapState:a}),deleteLabelmapInternal:(e,t)=>e("widgets/deleteLabelmap",t)}),setRadius(e){this.radius=Math.max(1,Math.round(e))},setLabel(e){const t=this.activeLabelmapState;t&&(t.selectedLabel=Number(e))},editName(){this.labelmapSelection&&(this.editingName=!this.editingName)},deleteLabelmap(){this.activeLabelmapProxy&&(this.deleteLabelmapInternal(this.activeLabelmapProxy.getProxyId()),this.$proxyManager.deleteProxy(this.activeLabelmapProxy))},filterImageData:e=>"TrivialProducer"===e.getProxyName()&&"vtkImageData"===e.getType(),asHex:e=>`#${e.map((e=>`00${e.toString(16)}`.slice(-2))).join("")}`,setTargetVolume(e){this.targetImageId=e,this.$emit("enable",!1)},setLabelMap(e){if(this.filter=o.ZP.newInstance(),e===g){const e=this.targetImageProxy.getDataset();this.filter.setBackgroundImage(e);const t=this.$proxyManager.createProxy("Sources","LabelMap"),a=t.getProxyId();this.activeLabelmapId=a,this.addLabelmapToImage(a,this.targetImageId);const i=this.imageToLabelmaps[this.targetImageId].length,s={selectedLabel:1,lastColorIndex:0};this.setLabelmapState(a,s);const o=this.targetImageProxy.getName();t.setName(`Labelmap ${i} ${o}`);const r=function(e){const t=l.ZP.newInstance(e.get("spacing","origin","direction"));t.setDimensions(e.getDimensions());const a=new Uint16Array(e.getNumberOfPoints()),i=n.ZP.newInstance({numberOfComponents:1,values:a});return t.getPointData().setScalars(i),t.computeTransforms(),t}(e);r.setLabelColor(s.selectedLabel,h(this.palette[0])),t.setInputData(r),this.filter.setLabelMap(r),(0,p._3)(this.$proxyManager,t),this.$proxyManager.renderAllViews()}else{const t=this.$proxyManager.getProxyById(e);t&&(this.activeLabelmapId=t.getProxyId(),this.filter.setLabelMap(t.getDataset()))}this.filter.setLabel(this.activeLabelmapState.selectedLabel),this.filter.setRadius(this.radius),this.$proxyManager.getViews().forEach((e=>{const t=this.targetImageProxy,a=this.$proxyManager.getRepresentation(t,e);e.bindRepresentationToManipulator&&a&&e.bindRepresentationToManipulator(a)}))},updateColorMap(){const e=this.activeLabelmapProxy;if(e){const t=e.getDataset().getColorMap(),a=(e,t)=>e-t;this.colormapArray=Object.keys(t).sort(a).map((e=>({label:Number(e),color:t[e].slice(0,3),opacity:t[e][3]})))}},setLabelColor(e,t){const a=this.activeLabelmapProxy.getDataset(),i=a.getColorMap()[e],s=h(t);3===s.length&&(a.setLabelColor(e,[...s,i[3]]),this.$proxyManager.renderAllViews())},setLabelOpacity(e,t){const a=this.activeLabelmapProxy.getDataset(),i=a.getColorMap()[e].slice();t&&(i[3]=Number(t),a.setLabelColor(e,i)),this.$proxyManager.renderAllViews()},addLabel(){const e=this.colormapArray.map((e=>e.label));let t=0;for(;e.length;){const a=e.shift();if(a-t>1){t++;break}if(0===e.length){t=a+1;break}t=a}const a=this.activeLabelmapState,i=(a.lastColorIndex+1)%this.palette.length,s=h(this.palette[i]);this.activeLabelmapProxy.getDataset().setLabelColor(t,s),a.lastColorIndex=i,this.setLabel(t)},deleteLabel(e){const t=this.activeLabelmapProxy.getDataset();t.removeLabel(e);const a=t.getPointData().getScalars().getData();for(let t=0;t<a.length;t++)a[t]===e&&(a[t]=0);this.setLabel(0),this.$proxyManager.renderAllViews()},undo(){this.filter.undo(),this.$proxyManager.renderAllViews()},redo(){this.filter.redo(),this.$proxyManager.renderAllViews()},colorToBackgroundCSS(e,t){const{color:a,opacity:i}=e[t];return{backgroundColor:`rgba(${[...a,i/255].join(",")})`}},updateHandleSlice(e){const t=[0,0,0],a=this.paintProxy.getWidget().getManipulator(),i=this.$proxyManager.getRepresentation(this.targetImageProxy,e);t[e.getAxis()]=i.getSlice(),a.setHandleOrigin(t)},enablePainting(){const e=this.$proxyManager.createProxy("Widgets","Paint");e.getWidget().setRadius(this.radius),e.getWidget().placeWidget(this.activeLabelmapProxy.getDataset().getBounds()),this.widgetId=e.getProxyId(),this.mousedViewId=-1;const t=(e,t,a)=>{e.getInteractor().requestAnimation(m),t.grabFocus(a);const i=a.getPriority()+1,s=e.getInteractor().onMouseMove((()=>{this.mousedViewId!==e.getProxyId()&&(this.mousedViewId=e.getProxyId(),this.updateHandleSlice(e))}),i),n=a.onStartInteractionEvent((()=>{this.brush2D?this.filter.setSlicingMode(r.P["XYZ"[e.getAxis()]]):this.filter.setSlicingMode(r.P.NONE),this.filter.startStroke(),this.filter.addPoint(this.paintProxy.getWidgetState().getTrueOrigin())})),o=a.onInteractionEvent((()=>{a.getPainting()&&this.filter.addPoint(this.paintProxy.getWidgetState().getTrueOrigin())})),l=a.onEndInteractionEvent((()=>{this.filter.addPoint(this.paintProxy.getWidgetState().getTrueOrigin()),this.filter.endStroke()}));return[()=>e.getInteractor().cancelAnimation(m),s.unsubscribe,n.unsubscribe,o.unsubscribe,l.unsubscribe]};e.addToViews(),e.executeViewFuncs({View3D:e=>(e.getInteractor().requestAnimation(m),()=>{e.getInteractor().cancelAnimation(m)}),View2D_X:t,View2D_Y:t,View2D_Z:t})},disablePainting(){this.paintProxy.removeFromViews(),this.$proxyManager.deleteProxy(this.paintProxy),this.widgetId=-1},upload(){setTimeout((()=>{const e=this.activeLabelmapProxy,t=this.activeLabelmapParentImageProxy;e&&t&&(t.getKey("girderProvenance")&&e.setKey("girderProvenance",t.getKey("girderProvenance")),this.$root.$emit("girder_upload_proxy",this.activeLabelmapId))}),10)}}},f={container:"PaintTool-container-K_01H",fullWidth:"PaintTool-fullWidth-ygvJa",labelInput:"PaintTool-labelInput-CX7Np",paintActions:"PaintTool-paintActions-NWnXC",paintSwitch:"PaintTool-paintSwitch-CEy8P",radioGroup:"PaintTool-radioGroup-oAs8K",headerRow:"PaintTool-headerRow-SXk6M",listRow:"PaintTool-listRow-QOnht",lowercaseText:"PaintTool-lowercaseText-Cncdr",colorBoxBackground:"PaintTool-colorBoxBackground-uCP_B",colorBox:"PaintTool-colorBox-MGe3f",colorPicker:"PaintTool-colorPicker-LSW1f",opacitySlider:"PaintTool-opacitySlider-_m6x7",activeRadio:"PaintTool-activeRadio-BOPEG"},b=a(581),x=a(3),w=a.n(x),_=a(582),S=a(601),P=a(607),k=a(637),C=a(644),V=a(608),I=a(610),T=a(611),$=a(647),D=a(641),M=a(642),L=a(646),Z=a(638),O=a(659),R=a(660),B=a(640),A=a(652),F=a(653),N=a(645),E=a(661),j=a(634);e=a.hmd(e);var z={};e.hot,e.hot;var G=(0,b.Z)(y,i,[],!1,(function(e){z.$style=f.locals||f,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return z.$style}})}),null,null);w()(G,{VBtn:_.Z,VCard:S.Z,VCardText:P.ZB,VContainer:k.Z,VDivider:C.Z,VFlex:V.Z,VIcon:I.Z,VLayout:T.Z,VList:$.Z,VListItem:D.Z,VListItemAction:M.Z,VListItemContent:L.km,VListItemTitle:L.V9,VMenu:Z.Z,VRadio:O.Z,VRadioGroup:R.Z,VSelect:B.Z,VSlider:A.Z,VSpacer:F.Z,VSubheader:N.Z,VSwitch:E.Z,VTextField:j.Z}),G.options.__file="src/components/tools/PaintTool/index.vue";var U=G.exports},172:function(e,t,a){"use strict";a.d(t,{Z:function(){return g}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.$style.wrapper},[a("v-btn",{attrs:{text:"",disabled:e.playing||e.isOnFirstFrame,small:""},on:{click:e.firstFrame}},[a("v-icon",[e._v("\n      mdi-chevron-double-left\n    ")])],1),e._v(" "),a("v-btn",{attrs:{text:"",disabled:e.playing||e.isOnFirstFrame,small:""},on:{click:e.previousFrame}},[a("v-icon",[e._v("\n      mdi-chevron-left\n    ")])],1),e._v(" "),e.playing?a("v-btn",{attrs:{text:"",small:""},on:{click:e.pause}},[a("v-icon",[e._v("\n      mdi-pause\n    ")])],1):a("v-btn",{attrs:{text:"",small:"",disabled:e.isOnLastFrame},on:{click:e.play}},[a("v-icon",[e._v("\n      mdi-play\n    ")])],1),e._v(" "),a("v-btn",{attrs:{text:"",disabled:e.playing||e.isOnLastFrame,small:""},on:{click:e.nextFrame}},[a("v-icon",[e._v("\n      mdi-chevron-right\n    ")])],1),e._v(" "),a("v-btn",{attrs:{text:"",disabled:e.playing||e.isOnLastFrame,small:""},on:{click:e.lastFrame}},[a("v-icon",[e._v("\n      mdi-chevron-double-right\n    ")])],1),e._v(" "),a("v-select",{staticClass:"pv-no-select",attrs:{disabled:e.playing,items:e.frames,value:e.currentFrame,dense:"",flat:"","hide-details":""},on:{change:e.setCurrentFrame}})],1)};i._withStripped=!0;var s=a(612),n={name:"AnimationControls",computed:{...(0,s.rn)("animations",{playing:e=>e.playing,currentFrame:e=>e.currentFrame,frames:e=>e.frames}),isOnFirstFrame(){return this.frames.length>0&&this.currentFrame===this.frames[0]},isOnLastFrame(){return this.frames.length>0&&this.currentFrame===this.frames[this.frames.length-1]}},methods:{setCurrentFrame(e){this.setFrameIndex(this.frames.indexOf(e))},...(0,s.nv)("animations",["play","pause","nextFrame","previousFrame","firstFrame","lastFrame","setFrameIndex"])}},o={wrapper:"AnimationControls-wrapper-LJEUM"},r=a(581),l=a(3),c=a.n(l),d=a(582),u=a(610),p=a(640);e=a.hmd(e);var v={};e.hot,e.hot;var m=(0,r.Z)(n,i,[],!1,(function(e){v.$style=o.locals||o,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return v.$style}})}),null,null);c()(m,{VBtn:d.Z,VIcon:u.Z,VSelect:p.Z}),m.options.__file="src/components/widgets/AnimationControls/index.vue";var g=m.exports},164:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var i=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{class:e.$style.container,style:e.style})};i._withStripped=!0;var s={name:"ColorGroup",props:{index:{type:Number,default:0},top:{type:Number,default:0},visible:{type:Boolean,default:!0},colors:{this:Array,default:()=>["#e1002a","#417dc0","#1d9a57","#e9bc2f","#9b3880"]}},computed:{style(){return this.visible?{background:this.colors[this.index%this.colors.length],top:`${this.top}px`}:"display: none;"}}},n={container:"ColorGroup-container-xP4_7"},o=a(581);e=a.hmd(e);var r={};e.hot,e.hot;var l=(0,o.Z)(s,i,[],!1,(function(e){r.$style=n.locals||n,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return r.$style}})}),null,null);l.options.__file="src/components/widgets/ColorGroup/index.vue";var c=l.exports},175:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var i=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{on:{dragover:function(t){return t.preventDefault(),e.onDragOver.apply(null,arguments)},dragleave:e.onDragLeave,drop:function(t){return t.preventDefault(),e.onDrop.apply(null,arguments)}}},[e._t("default",null,{dragHover:e.dragHover})],2)};i._withStripped=!0;var s={name:"DragAndDrop",props:{enabled:Boolean},data:()=>({dragHover:!1}),methods:{onDragOver:function(e){if(this.enabled){const t=e.dataTransfer.types;(t&&t instanceof Array?-1!==t.indexOf("Files"):"Files"in t)&&(this.dragHover=!0,null!==this.dragTimeout&&(window.clearTimeout(this.dragTimeout),this.dragTimeout=null))}},onDragLeave:function(){this.enabled&&(this.dragTimeout=window.setTimeout((()=>{this.dragHover=!1,this.dragTimeout=null}),50))},onDrop:function(e){this.enabled&&(this.$emit("drop",Array.from(e.dataTransfer.files)),this.dragHover=!1)}},created(){this.dragTimeout=null}},n=(0,a(581).Z)(s,i,[],!1,null,null,null);n.options.__file="src/components/widgets/DragAndDrop/index.vue";var o=n.exports},173:function(e,t,a){"use strict";a.d(t,{Z:function(){return b}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{class:e.$style.card,attrs:{flat:""}},[a("v-container",{staticClass:"pa-0",attrs:{"grid-list-xs":""}},[a("v-layout",{attrs:{row:"","align-center":""}},[a("span",{staticClass:"subtitle-2"},[e._v("Rendering")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-icon",e._g({attrs:{small:""}},i),[e._v("mdi-help-circle")])]}}])},[a("table",{class:e.$style.table},[a("tr",[a("td",{staticClass:"body-2"},[e._v("WebGL")]),e._v(" "),a("td",{staticClass:"body-1"},[e._v(e._s(e.webgl))])]),e._v(" "),a("tr",[a("td",{staticClass:"body-2"},[e._v("Vendor")]),e._v(" "),a("td",{staticClass:"body-1"},[e._v(e._s(e.vendor))])]),e._v(" "),a("tr",[a("td",{staticClass:"body-2"},[e._v("GPU")]),e._v(" "),a("td",{staticClass:"body-1"},[e._v(e._s(e.gpu))])])])])],1)],1),e._v(" "),a("v-divider",{class:e.$style.divider}),e._v(" "),a("div",{class:["js-monitor",e.$style.monitor]})],1)};i._withStripped=!0;var s=a(519);var n={props:{width:{default:268,type:Number},proxyManager:{required:!0}},data:()=>({vendor:"Unknown",gpu:"Unknown",webgl:0,infoDialog:!1}),methods:{onMounted:function(){this.monitor=s.ZP.newInstance({bufferSize:this.width}),this.updateActiveView=()=>{const e=this.proxyManager.getActiveView(),t=e?e.getRenderWindow():null;if(e){const t=e.getOpenGLRenderWindow().getGLInformations(),{UNMASKED_RENDERER:a,UNMASKED_VENDOR:i,WEBGL_VERSION:s}=t;this.vendor=i.value,this.gpu=a.value,this.webgl=s.value}this.monitor.setRenderWindow(t),this.monitor.update()},window.addEventListener("resize",this.monitor.update),this.subscriptions=[this.proxyManager.onModified(this.monitor.update).unsubscribe,this.proxyManager.onActiveViewChange(this.updateActiveView).unsubscribe,()=>window.removeEventListener("resize",this.monitor.update)],this.monitor.setContainer(this.$el.querySelector(".js-monitor")),this.monitor.getFpsMonitorContainer().style.flexDirection="column",this.updateActiveView()}},mounted(){this.$nextTick(this.onMounted)},beforeDestroy:function(){for(this.monitor&&(this.monitor.delete(),this.monitor=null);this.subscriptions.length;)this.subscriptions.pop()()}},o={card:"GPUInformation-card-uYItl",heading:"GPUInformation-heading-_XHR1",divider:"GPUInformation-divider-JhBB2",monitor:"GPUInformation-monitor-Fu0yC",table:"GPUInformation-table-BU0Qk"},r=a(581),l=a(3),c=a.n(l),d=a(601),u=a(637),p=a(644),v=a(610),m=a(611),g=a(653),h=a(654);e=a.hmd(e);var y={};e.hot,e.hot;var f=(0,r.Z)(n,i,[],!1,(function(e){y.$style=o.locals||o,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return y.$style}})}),null,null);c()(f,{VCard:d.Z,VContainer:u.Z,VDivider:p.Z,VIcon:v.Z,VLayout:m.Z,VSpacer:g.Z,VTooltip:h.Z}),f.options.__file="src/components/widgets/GPUInformation/index.vue";var b=f.exports},38:function(e,t,a){"use strict";a.d(t,{Z:function(){return p}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.$style.wrapper},e._l(e.palette,(function(t){return a("div",{key:t,class:e.$style.item},[a("div",{class:e.$style.blot,style:e.getStyles(t),on:{click:function(a){return e.$emit("input",t)}}},[t.toLowerCase()===e.selectedColor?a("v-icon",{class:e.$style.check,attrs:{size:e.size}},[e._v("\n        mdi-check\n      ")]):e._e()],1)])})),0)};i._withStripped=!0;var s={name:"PalettePicker",props:{palette:{type:Array,default:()=>[]},size:{type:Number,default:24},value:{type:String,default:""}},computed:{selectedColor(){return this.value.toLowerCase()}},methods:{getStyles(e){return{width:`${this.size}px`,height:`${this.size}px`,background:e}}}},n={wrapper:"PalettePicker-wrapper-Cz9zR",item:"PalettePicker-item-q0Hig",check:"PalettePicker-check-m60ux",blot:"PalettePicker-blot-JTooX"},o=a(581),r=a(3),l=a.n(r),c=a(610);e=a.hmd(e);var d={};e.hot,e.hot;var u=(0,o.Z)(s,i,[],!1,(function(e){d.$style=n.locals||n,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return d.$style}})}),null,null);l()(u,{VIcon:c.Z}),u.options.__file="src/components/widgets/PalettePicker/index.vue";var p=u.exports},152:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var i=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{class:e.$style.container})};i._withStripped=!0;var s=a(370);let n=null;var o={props:{source:{type:Object},piecewiseFunction:{required:!0,type:Object},proxyManager:{required:!0}},data:()=>({}),methods:{onOpacityChange:function(){if(n)return;n=this.piecewiseWidget;const e=this.piecewiseFunction;if(e){e.setGaussians(this.piecewiseWidget.getGaussians());const t=this.piecewiseWidget.getOpacityRange();e.getLookupTableProxy().setDataRange(...t)}n=null},updateWidget:function(){const e=this.piecewiseFunction;if(e){const t=e.getLookupTableProxy().getLookupTable();this.piecewiseWidget.setGaussians(e.getGaussians()),this.source?this.piecewiseWidget.setDataArray(this.source.getDataset().getPointData().getScalars().getData()):this.piecewiseWidget.setDataArray(Float32Array.from(e.getDataRange())),this.piecewiseWidget.setColorTransferFunction(t),this.subscriptions.push(t.onModified((()=>{if(n)return;n=this.piecewiseWidget;const t=this.piecewiseWidget.getOpacityRange();e.getLookupTableProxy().setDataRange(...t),this.piecewiseWidget.render(),n=null}))),this.piecewiseWidget.render()}},onMounted:function(){this.piecewiseWidget=s.ZP.newInstance({numberOfBins:256,size:[280,150]}),this.piecewiseWidget.updateStyle({backgroundColor:"rgba(255, 255, 255, 0.6)",histogramColor:"rgba(100, 100, 100, 0.5)",strokeColor:"rgb(0, 0, 0)",activeColor:"rgb(255, 255, 255)",handleColor:"rgb(50, 150, 50)",buttonDisableFillColor:"rgba(255, 255, 255, 0.5)",buttonDisableStrokeColor:"rgba(0, 0, 0, 0.5)",buttonStrokeColor:"rgba(0, 0, 0, 1)",buttonFillColor:"rgba(255, 255, 255, 1)",strokeWidth:2,activeStrokeWidth:3,buttonStrokeWidth:1.5,handleWidth:3,iconSize:0,padding:10}),this.subscriptions=[],this.widgetSubscriptions=[this.piecewiseWidget.onOpacityChange((()=>{this.onOpacityChange()})),this.piecewiseWidget.onAnimation((e=>{this.piecewiseFunction&&this.proxyManager.setAnimationOnAllViews(e)}))],this.piecewiseWidget.setContainer(this.$el),this.piecewiseWidget.bindMouseListeners(),this.updateWidget(),this.onOpacityChange()}},mounted(){this.$nextTick(this.onMounted)},beforeDestroy:function(){for(;this.widgetSubscriptions.length;)this.widgetSubscriptions.pop().unsubscribe();for(;this.subscriptions.length;)this.subscriptions.pop().unsubscribe();this.piecewiseWidget.unbindMouseListeners(),this.piecewiseWidget.setContainer(null)},updated(){for(;this.subscriptions.length;)this.subscriptions.pop().unsubscribe();this.updateWidget()}},r={container:"PiecewiseFunctionEditor-container-_jIUo"},l=a(581);e=a.hmd(e);var c={};e.hot,e.hot;var d=(0,l.Z)(o,i,[],!1,(function(e){c.$style=r.locals||r,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return c.$style}})}),null,null);d.options.__file="src/components/widgets/PiecewiseFunctionEditor/index.vue";var u=d.exports},76:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"container",class:e.$style.container},[a("div",{on:{click:function(t){e.visible=!e.visible}}},[e._t("trigger"),e._v(" "),a("div",{ref:"anchor",staticStyle:{width:"0",height:"0",margin:"0",padding:"0"}})],2),e._v(" "),e.visible?a("portal",{attrs:{selector:"#app-portal-mount"}},[a("div",{ref:"popup",class:e.$style.popup,style:e.getPositioning()},[e._t("popup",null,{close:e.close})],2)]):e._e()],1)};i._withStripped=!0;var s={name:"PopUp",components:{Portal:a(382).h_},data:()=>({visible:!1}),mounted(){document.addEventListener("mousedown",this.handleMouse,!0),document.addEventListener("keydown",this.handleEsc)},beforeDestroy(){document.removeEventListener("mousedown",this.handleMouse,!0),document.removeEventListener("keydown",this.handleEsc)},methods:{handleMouse(e){if(this.visible){let t=e.target;for(;t&&t!==this.$refs.container&&t!==this.$refs.popup;)t=t.parentElement;null===t&&(this.visible=!1)}},handleEsc(e){this.visible&&27===e.keyCode&&this.close()},getPositioning(){const e=this.$refs.anchor,{top:t,left:a}=e.getBoundingClientRect(),i=window.innerHeight;return t>i/2?{bottom:i-t+"px",left:`${a}px`}:{top:`${t}px`,left:`${a}px`}},close(){this.visible=!1}}},n={container:"PopUp-container-MOF8K",popup:"PopUp-popup-P9jw2"},o=a(581);e=a.hmd(e);var r={};e.hot,e.hot;var l=(0,o.Z)(s,i,[],!1,(function(e){r.$style=n.locals||n,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return r.$style}})}),null,null);l.options.__file="src/components/widgets/PopUp/index.vue";var c=l.exports},77:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var i=function(){var e=this,t=e.$createElement;return(e._self._c||t)("v-select",{directives:[{name:"show",rawName:"v-show",value:!e.shouldHide,expression:"!shouldHide"}],attrs:{label:e.label,items:e.sourceList,"item-text":"name","item-value":"proxyId",disabled:e.disabled,value:e.selection},on:{input:e.setInternalValue}})};i._withStripped=!0;function s(e){return{name:e.getName(),proxyId:e.getProxyId()}}var n={name:"SourceSelect",props:{filterFunc:{type:Function,default:()=>()=>!0},label:{type:String,default:()=>""},bindToActiveSource:{type:Boolean,default:()=>!1},hideIfOneDataset:{type:Boolean,default:()=>!1},value:{default:()=>-1},disabled:{type:Boolean,default:()=>!1}},data:()=>({sourceList:[],internalValue:-1}),computed:{selection(){const e=this.$proxyManager.getProxyById(this.internalValue);return e&&"Sources"===e.getProxyGroup()?s(e):null},shouldHide(){return this.hideIfOneDataset&&this.sourceList.length<=1}},watch:{value(e){this.internalValue=e}},mounted(){const e=this.$proxyManager.getActiveSource();e&&this.setInternalValue(e.getProxyId()),this.updateSourceList()},proxyManagerHooks:{onProxyModified(e){e.getProxyId()===this.waitForActiveDataset&&(this.waitForActiveDataset=null,this.setInternalValue(e.getProxyId())),this.updateSourceList()},onActiveSourceChange(e){if(this.bindToActiveSource)if(e){if(e.getProxyId()!==this.internalValue){const t=e.getProxyId();e.getDataset()?this.setInternalValue(t):this.waitForActiveDataset=t}}else this.setInternalValue(-1)},onProxyRegistrationChange(e){const{proxyGroup:t}=e;"Sources"===t&&this.updateSourceList()}},methods:{updateSourceList(){const e=this.$proxyManager.getSources().filter((e=>e&&!!e.getDataset()&&this.filterFunc(e)));this.sourceList=e.map((e=>s(e)))},setInternalValue(e){e!==this.internalValue&&(this.internalValue=e,this.$emit("input",e))}}},o=a(581),r=a(3),l=a.n(r),c=a(640),d=(0,o.Z)(n,i,[],!1,null,null,null);l()(d,{VSelect:c.Z}),d.options.__file="src/components/widgets/SourceSelect/index.vue";var u=d.exports},70:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.svg?a("img",{staticClass:"pv-no-select",attrs:{src:e.svg}}):e._e()};i._withStripped=!0;var s={name:"SvgIcon",props:{icon:String},data:()=>({svg:null}),watch:{icon(e){this.icon&&this.importIcon(e)}},mounted(){this.icon&&this.importIcon(this.icon)},methods:{importIcon(e){return a(505)(`./${e}.svg`).then((e=>{this.svg=e.default||e})).catch((e=>{throw this.svg=null,e}))}}},n=(0,a(581).Z)(s,i,[],!1,null,null,null);n.options.__file="src/components/widgets/SvgIcon/index.vue";var o=n.exports},154:function(e,t,a){"use strict";a.d(t,{Z:function(){return p}});var i=function(){var e,t=this,a=t.$createElement,i=t._self._c||a;return i("li",{class:t.$style.node},[i("div",{class:t.$style.header,on:{click:t.onItemClick}},[t.item[t.childrenKey]?i("div",{class:t.$style.expander},[i("v-icon",{class:(e={},e[t.$style.arrow]=!0,e[t.$style.openArrow]=t.open||t.value,e)},[t._v("\n        mdi-menu-down\n      ")])],1):t._e(),t._v(" "),i("span",{staticClass:"body-2",class:t.$style.name},[t._v(t._s(t.item[t.labelKey]))])]),t._v(" "),t.item[t.childrenKey]?i("ul",{directives:[{name:"show",rawName:"v-show",value:t.open||t.value,expression:"open || value"}]},t._l(t.item[t.childrenKey],(function(e,a){return i("node",t._b({key:a,attrs:{item:e},on:{input:function(e){return t.$emit("input",e)}}},"node",{open:t.open,labelKey:t.labelKey,childrenKey:t.childrenKey},!1))})),1):t._e()])};i._withStripped=!0;var s={name:"Node",props:{item:{},open:{type:Boolean,default:!1},labelKey:{type:String,default:()=>"name"},childrenKey:{type:String,default:()=>"children"}},data:()=>({value:!1}),methods:{onItemClick:function(){this.item[this.childrenKey]?this.value=!this.value:this.$emit("input",this.item)}}},n=a(380),o=a(581),r=a(3),l=a.n(r),c=a(610);e=a.hmd(e);var d={};e.hot,e.hot;var u=(0,o.Z)(s,i,[],!1,(function(e){d.$style=n.Z.locals||n.Z,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return d.$style}})}),null,null);l()(u,{VIcon:c.Z}),u.options.__file="src/components/widgets/TreeView/Node/index.vue";var p=u.exports},153:function(e,t,a){"use strict";a.d(t,{Z:function(){return p}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.$style.wrapper},[a("v-text-field",{ref:"filterInput",attrs:{placeholder:"Filter...",clearable:"","hide-details":""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.trySelect(e.filteredTree)}},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),e._l(e.filteredTree,(function(t,i){return a("node",{key:i,attrs:{item:t,open:!!e.filterText,labelKey:e.labelKey,childrenKey:e.childrenKey},on:{input:e.onSelect}})}))],2)};i._withStripped=!0;var s={name:"TreeView",components:{Node:a(154).Z},props:{tree:{type:Array,default:()=>[]},filterFunc:Function,labelKey:{type:String,default:()=>"name"},childrenKey:{type:String,default:()=>"children"}},data:()=>({filterText:null}),computed:{filteredTree(){return this.filterText?this.filter(this.tree,this.filterText,this.filterFunc||this.indexOfFilterFunc):this.tree}},methods:{onSelect:function(e){this.$emit("input",e)},trySelect:function(e){1===e.length&&(e[0][this.childrenKey]?this.trySelect(e[0][this.childrenKey]):this.onSelect(e[0]))},filter:function(e,t,a){const i=[];for(let s=0;s<e.length;++s)if(e[s][this.childrenKey]){const n=this.filter(e[s][this.childrenKey],t,a);n.length&&i.push({...e[s],[this.childrenKey]:n})}else a(e[s],t)&&i.push(e[s]);return i},indexOfFilterFunc:function(e,t){return e[this.labelKey].toLowerCase().indexOf(t.toLowerCase())>-1}}},n=a(380),o=a(581),r=a(3),l=a.n(r),c=a(634);e=a.hmd(e);var d={};e.hot,e.hot;var u=(0,o.Z)(s,i,[],!1,(function(e){d.$style=n.Z.locals||n.Z,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return d.$style}})}),null,null);l()(u,{VTextField:c.Z}),u.options.__file="src/components/widgets/TreeView/index.vue";var p=u.exports},505:function(e,t,a){var i={"./angle-tool.svg":506,"./glance-logo-mark.svg":507,"./glance-logo.svg":508,"./itkjs.svg":509,"./kitware-logo.svg":510,"./kitware.svg":511,"./length-tool.svg":512,"./paraview-glance-small.svg":513,"./paraview-glance.svg":514,"./text-tool.svg":515,"./vtkjs.svg":516};function s(e){return n(e).then((function(e){return a.t(e,1)}))}function n(e){return Promise.resolve().then((function(){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}))}s.keys=function(){return Object.keys(i)},s.resolve=n,s.id=505,e.exports=s},533:function(e,t,a){"use strict";e.exports=a.p+"7de480b60ea07530becf.jpg"},534:function(e,t,a){"use strict";e.exports=a.p+"08bbd2aa53dc8eac397c.jpg"},530:function(e,t,a){"use strict";e.exports=a.p+"fe1adfb1c2a6e035a806.jpg"},531:function(e,t,a){"use strict";e.exports=a.p+"132e309e274fe1882773.jpg"},538:function(e,t,a){"use strict";e.exports=a.p+"3a94be6267c413f24562.jpg"},532:function(e,t,a){"use strict";e.exports=a.p+"e046987d1271a351d59b.jpg"},535:function(e,t,a){"use strict";e.exports=a.p+"0bbce93537f566337c90.jpg"},536:function(e,t,a){"use strict";e.exports=a.p+"a7687b09d48560c2931e.jpg"},537:function(e,t,a){"use strict";e.exports=a.p+"286af999372ee982d6c8.jpg"},506:function(e,t,a){"use strict";e.exports=a.p+"5a39a3263089fab6ab24.svg"},507:function(e,t,a){"use strict";e.exports=a.p+"739652544df2c34fdc58.svg"},508:function(e,t,a){"use strict";e.exports=a.p+"e19981c655f2cfd0e03a.svg"},509:function(e,t,a){"use strict";e.exports=a.p+"19b58d68d243be25286a.svg"},510:function(e,t,a){"use strict";e.exports=a.p+"cc5d8973c8e2af638075.svg"},511:function(e,t,a){"use strict";e.exports=a.p+"011374e7707f227f9666.svg"},512:function(e,t,a){"use strict";e.exports=a.p+"9b3eb3ca56e835ab0258.svg"},513:function(e,t,a){"use strict";e.exports=a.p+"731e62f43c121e953a77.svg"},514:function(e,t,a){"use strict";e.exports=a.p+"f1c3d9cead24b2badd18.svg"},515:function(e,t,a){"use strict";e.exports=a.p+"a3e7e875d73fd955cf5e.svg"},516:function(e,t,a){"use strict";e.exports=a.p+"033029be7d659ffab8c6.svg"},357:function(){}},function(e){return e.O(0,[1],(function(){return t=328,e(e.s=t);var t})),e.O()}])}));